<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>(ï¾Ÿâˆ€ã€‚)</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-07-01T06:10:36.415Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>LUY</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CSAPP-Labç¬”è®°2:Bomb</title>
    <link href="http://yoursite.com/2020/07/01/CSAPP-Lab%E7%AC%94%E8%AE%B02-Bomb/"/>
    <id>http://yoursite.com/2020/07/01/CSAPP-Lab%E7%AC%94%E8%AE%B02-Bomb/</id>
    <published>2020-07-01T05:58:10.000Z</published>
    <updated>2020-07-01T06:10:36.415Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯æˆ‘åœ¨2020å¹´6æœˆ26æ—¥~7æœˆ1æ—¥å®Œæˆçš„Bomb Labçš„é¢˜è§£ä¸ç¬”è®°</p><p>ç‚¸å¼¹å®éªŒå®¤æ˜¯CS:APP é…å¥—å®éªŒä¸­çš„ç¬¬äºŒä¸ªå®éªŒ, é€šè¿‡å¯¹äºŒè¿›åˆ¶æ–‡ä»¶åæ±‡ç¼–æ¥åˆ†æè·å¾—æ‹†é™¤ç‚¸å¼¹çš„å¯†ç .</p><p>æœ¬æ–‡æ˜¾å¼åœ°åŒ…å«ç­”æ¡ˆ, å¦‚æœä½ æƒ³è‡ªå·±è§£å†³,ä¸å»ºè®®ä½¿ç”¨æœ¬æ–‡.</p><p><a href="https://github.com/luy-0/CS-APP-LABs/tree/master/Lab-Answer_HB/Lab2-BombLab" target="_blank" rel="noopener">å¯¹åº”Githubä»“åº“ ç‚¹æˆ‘</a></p><a id="more"></a><h2 id="Catalog"><a href="#Catalog" class="headerlink" title="Catalog"></a>Catalog</h2><ol><li>GDB    åŒ…æ‹¬GDBåŸºæœ¬ä½¿ç”¨æ³•, ä½†ä¸å…¨é¢</li><li>Bombs  åŒ…æ‹¬å„ç‚¸å¼¹çš„é¢˜è§£ä¸ç­”æ¡ˆ</li><li>Functions    åŒ…æ‹¬å„å‡½æ•°åŠå…¶å—è°ƒç”¨å‡½æ•°çš„åæ±‡ç¼–,åŠè§£é‡Š</li></ol><h2 id="GDB"><a href="#GDB" class="headerlink" title="GDB"></a>GDB</h2><h3 id="Breakpoints"><a href="#Breakpoints" class="headerlink" title="Breakpoints"></a>Breakpoints</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">break sumè¿›å…¥sum()æ—¶æ–­ç‚¹</span><br><span class="line">break *0x80483c3 åœ¨åœ°å€ 0x80483c3 è®¾ç½®æ–­ç‚¹(æ³¨æ„&#96;\*å·)</span><br></pre></td></tr></table></figure><h3 id="Execution"><a href="#Execution" class="headerlink" title="Execution"></a>Execution</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stepi næ‰§è¡Œnæ¡æŒ‡ä»¤,ç¼ºçœä¸º1 ä¼šè¿›å…¥è¢«è°ƒç”¨å‡½æ•°</span><br><span class="line">nexti næ‰§è¡Œnæ¡æŒ‡ä»¤,ç¼ºçœä¸º1 ä¸ä¼šè¿›å…¥è¢«è°ƒç”¨å‡½æ•°</span><br></pre></td></tr></table></figure><h3 id="Print"><a href="#Print" class="headerlink" title="Print"></a>Print</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print (char *) 0xbfff890   Examine a string stored at 0xbffff890</span><br><span class="line"></span><br><span class="line">print  &#x2F;x $rip         åå…­è¿›åˆ¶æ‰“å°ripå¯„å­˜å™¨ (&#x2F;xå¯æ¢ä¸º&#x2F;dæˆ–&#x2F;b)</span><br><span class="line"></span><br><span class="line">print *(int *) 0xbffff890 Print integer at address 0xbffff890</span><br><span class="line"></span><br><span class="line">print *(int **) ($rsp+8)Print address at address  ($rsp+8)</span><br></pre></td></tr></table></figure><h3 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> info registers     Print all registers and their contents </span><br><span class="line"></span><br><span class="line">info breakpoints  Print status of user-settable breakpoints</span><br></pre></td></tr></table></figure><h2 id="Bombs"><a href="#Bombs" class="headerlink" title="Bombs"></a>Bombs</h2><h3 id="Bomb1"><a href="#Bomb1" class="headerlink" title="Bomb1"></a>Bomb1</h3><p>ç‚¸å¼¹1æ¶‰åŠåˆ°ä»¥ä¸‹å‡½æ•°:</p><ol><li>Phase_1</li><li>strings_not_equal</li><li>string_length</li></ol><p>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸², å®ƒå°†ä¸ä½äºåœ°å€<code>0x402400</code>çš„å­—ç¬¦ä¸²æ¯”è¾ƒ, ç›¸ç¬¦å³å¯æ‹†é™¤.</p><p>å› æ­¤ç­”æ¡ˆä¸º:</p><blockquote><p>Border relations with Canada have never been better.</p></blockquote><h3 id="Bomb2"><a href="#Bomb2" class="headerlink" title="Bomb2"></a>Bomb2</h3><p>ç‚¸å¼¹2æ¶‰åŠåˆ°ä»¥ä¸‹å‡½æ•°:</p><ol><li>Phase_2</li><li>read_six_numbers</li></ol><p>è¾“å…¥6ä¸ªæ•°å­—, ç¬¬ä¸€ä¸ªæ˜¯1, å‰©ä¸‹æˆå…¬æ¯”ä¸º2çš„G.P. å³å¯æ‹†é™¤.</p><p>å› æ­¤ç­”æ¡ˆä¸º:</p><blockquote><p>1 2 4 8 16 32</p></blockquote><h3 id="Bomb3"><a href="#Bomb3" class="headerlink" title="Bomb3"></a>Bomb3</h3><p>ç‚¸å¼¹3æ¶‰åŠåˆ°ä»¥ä¸‹å‡½æ•°:</p><ol><li>phase_3</li><li>__isoc99_sscanf</li></ol><p>è¾“å…¥ä¸¤ä¸ªæ•°å­—, è¿™ä¸¤ä¸ªæ•°å­—å¿…é¡»æ˜¯ä»¥ä¸‹8ç»„ä¹‹ä¸€:</p><ul><li>0    207</li><li>1    311</li><li>2    707</li><li>3    256</li><li>4    389</li><li>5    206</li><li>6    682</li><li>7    327</li></ul><p>ä¾‹å¦‚,ç­”æ¡ˆå¯ä»¥è¾“å…¥:</p><blockquote><p>2   707</p></blockquote><p>ç­”æ¡ˆä¸å”¯ä¸€</p><h3 id="Bomb4"><a href="#Bomb4" class="headerlink" title="Bomb4"></a>Bomb4</h3><p>è¿™ä¸ªé€’å½’ç‚¸å¼¹çœŸæŠŠæˆ‘æ•´ğŸ¤®äº†â€¦ æ¯ä¸€æ¡æ±‡ç¼–æŒ‡ä»¤éƒ½èƒ½çœ‹æ‡‚åœ¨å¹²ä»€ä¹ˆ, åˆåœ¨ä¸€èµ·å°±å‚»äº†, è¿çŒœå¸¦è’™æŠŠç­”æ¡ˆé¼“æ£å‡ºæ¥äº†â€¦</p><p>æˆ‘è®¨åŒé€’å½’ğŸ˜­</p><p>PS: åæ¥ç”¨åæ±‡ç¼–è§£å†³äº†</p><p>ç‚¸å¼¹4æ¶‰åŠåˆ°ä»¥ä¸‹å‡½æ•°:</p><ol><li>phase_4</li><li>func4</li></ol><p>è¾“å…¥ä¸¤ä¸ªæ•°å­—, æ•°å­—1å¿…é¡»ä¸º <code>{0,1,3,7}</code> ä¸­ä»»ä¸€ä¸ª, æ•°å­—2å¿…é¡»ä¸º <code>0</code>.</p><p>ä¾‹å¦‚, ç­”æ¡ˆå¯ä»¥è¾“å…¥:</p><blockquote><p>3  0</p></blockquote><p>ç­”æ¡ˆä¸å”¯ä¸€</p><h3 id="Bomb-5"><a href="#Bomb-5" class="headerlink" title="Bomb 5"></a>Bomb 5</h3><p>ç›¸å¯¹ä¸éš¾çš„æ˜ å°„ç‚¸å¼¹, å°†è¾“å…¥çš„å­—ç¬¦è¿›è¡Œè¿ç®—æ˜ å°„åˆ°ç‰¹å®šåœ°å€, å¹¶æ ¹æ®è¿™äº›åœ°å€ä¸­å–å‡ºçš„å­—ç¬¦åˆ¤æ–­æ˜¯å¦çˆ†ç‚¸.</p><p>ç‚¸å¼¹5æ¶‰åŠåˆ°ä»¥ä¸‹å‡½æ•°:</p><ol><li>phase_5</li><li>strings_not_equal</li><li>string_length</li></ol><p>è¾“å…¥é•¿åº¦ä¸º6çš„å­—ç¬¦ä¸², æ¯ä¸ªå­—ç¬¦éƒ½è¦ç¬¦åˆä»¥ä¸‹æ¡ä»¶:</p><ol><li>ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ASCIIç å¿…é¡»æ˜¯<code>0x?9</code></li><li>ç¬¬äºŒä¸ªå­—ç¬¦çš„ASCIIç å¿…é¡»æ˜¯<code>0x?f</code></li><li>ç¬¬ä¸‰ä¸ªå­—ç¬¦çš„ASCIIç å¿…é¡»æ˜¯<code>0x?e</code></li><li>ç¬¬å››ä¸ªå­—ç¬¦çš„ASCIIç å¿…é¡»æ˜¯<code>0x?5</code></li><li>ç¬¬äº”ä¸ªå­—ç¬¦çš„ASCIIç å¿…é¡»æ˜¯<code>0x?6</code></li><li>ç¬¬å…­ä¸ªå­—ç¬¦çš„ASCIIç å¿…é¡»æ˜¯<code>0x?7</code></li></ol><p>å…¶ä¸­,<code>?</code>è¡¨ç¤ºä»»æ„æ•°å­—, ä¾‹å¦‚:</p><ol><li><p><code>?</code>å…¨éƒ¨å–4 . åº”è¾“å…¥çš„å­—ç¬¦ä¸²ä¸º:</p><blockquote><p>IONEFG</p></blockquote></li><li><p><code>?</code>å…¨éƒ¨å–3 . åº”è¾“å…¥çš„å­—ç¬¦ä¸²ä¸º:</p><blockquote><p>9?&gt;567</p></blockquote></li><li><p><code>?</code>ä¹Ÿä¸ä¸€å®šåªå–åŒä¸€ä¸ªå€¼, ä¾‹å¦‚ç¬¬12,34,56å­—ç¬¦çš„<code>?</code>å€¼åˆ†åˆ«å–3,4,6. åº”è¾“å…¥çš„å­—ç¬¦ä¸²ä¸º:</p><blockquote><p>9?NEfg</p></blockquote></li></ol><p>ä¸Šè¿°å­—ç¬¦ä¸²å‡å¯ä½œä¸ºç­”æ¡ˆ, ç­”æ¡ˆä¸å”¯ä¸€.</p><h3 id="Bomb-6"><a href="#Bomb-6" class="headerlink" title="Bomb 6"></a>Bomb 6</h3><p>æ¯”è¾ƒçƒ¦çš„å¾ªç¯ç‚¸å¼¹, ä¸€å…±æ¶‰åŠåˆ°äº†6ä¸ªå¾ªç¯(è¿˜åŒ…æ‹¬ä¸€ä¸ªåµŒå¥—å¾ªç¯) ,ä¸€ç‚¹ç‚¹æ‹å¼€å°±å¥½äº†.è¦æ±‚è¾“å…¥å…­ä¸ªä¸åŒæ•°å­—, æ¯ä¸ªæ•°å­—éƒ½å¿…é¡»åœ¨1-6ä¹‹é—´,å¹¶ä¸”æ•°å­—éœ€è¦æŒ‰ç…§å›ºå®šé¡ºåº</p><p>ç‚¸å¼¹6æ¶‰åŠä»¥ä¸‹å‡½æ•°:</p><ol><li>phase_6</li><li>read_six_numbers</li></ol><p>è¾“å…¥çš„æ¯ä¸ªæ•°å­—æœ€åéƒ½ä¼šæ˜ å°„åˆ°ä¸€ä¸ªä¸‰ä½æ•°ä¸Š, è¦æ±‚è¢«æ˜ å°„é¡ºåºå¿…é¡»ä½¿ç”±å¤§åˆ°å°, å› æ­¤è¾“å…¥çš„æ•°å­—å¿…é¡»æŒ‰ç…§å›ºå®šé¡ºåº. </p><p>ç­”æ¡ˆ:</p><blockquote><p>4,3,2,1,6,5</p></blockquote><h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><h3 id="Main"><a href="#Main" class="headerlink" title="Main()"></a>Main()</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *input;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* è¯»å…¥æ•°æ® */</span></span><br><span class="line">    <span class="keyword">if</span> (argc == <span class="number">1</span>) &#123;  </span><br><span class="line">infile = <span class="built_in">stdin</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (argc == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!(infile = fopen(argv[<span class="number">1</span>], <span class="string">"r"</span>))) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%s: Error: Couldn't open %s\n"</span>, argv[<span class="number">0</span>], argv[<span class="number">1</span>]);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">8</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Usage: %s [&lt;input_file&gt;]\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">8</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* å¼€å§‹ç‚¸å¼¹ */</span></span><br><span class="line">    initialize_bomb();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Welcome to my fiendish little bomb. You have 6 phases with\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"which to blow yourself up. Have a nice day!\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Bomb1 */</span></span><br><span class="line">    input = read_line();          </span><br><span class="line">    phase_1(input);               </span><br><span class="line">    phase_defused();                 </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Phase 1 defused. How about the next one?\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Bomb2 */</span></span><br><span class="line">    input = read_line();</span><br><span class="line">    phase_2(input);</span><br><span class="line">    phase_defused();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"That's number 2.  Keep going!\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Bomb3 */</span></span><br><span class="line">    input = read_line();</span><br><span class="line">    phase_3(input);</span><br><span class="line">    phase_defused();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Halfway there!\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Bomb4 */</span></span><br><span class="line">    input = read_line();</span><br><span class="line">    phase_4(input);</span><br><span class="line">    phase_defused();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"So you got that one.  Try this one.\n"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* Bomb5 */</span></span><br><span class="line">    input = read_line();</span><br><span class="line">    phase_5(input);</span><br><span class="line">    phase_defused();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Good work!  On to the next...\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Bomb6 */</span></span><br><span class="line">    input = read_line();</span><br><span class="line">    phase_6(input);</span><br><span class="line">    phase_defused();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ç»“æŸ */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Phase-1"><a href="#Phase-1" class="headerlink" title="Phase_1"></a>Phase_1</h3><ul><li>è¾“å…¥: ä¸€ä¸ªå­—ç¬¦æŒ‡é’ˆ input</li><li>åŠŸèƒ½: input æŒ‡å‘å¯¹è±¡ä¸ åœ°å€<code>$0x402400</code>æŒ‡å‘å¯¹è±¡ç›¸åŒ,ä¸åŒç‚¸</li><li>è°ƒç”¨: strings_not_equal();  </li><li>è¿”å›: 0</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_1:</span><br><span class="line">&#x2F;&#x2F;rdi &#x3D; *input</span><br><span class="line">    0x0000000000400ee0 &lt;+0&gt;:sub    $0x8,%rsp        &#x2F;&#x2F;æ ˆä¸‹è°ƒ8ä½</span><br><span class="line">    0x0000000000400ee4 &lt;+4&gt;:mov    $0x402400,%esi   &#x2F;&#x2F;$0x402400 æ”¾å…¥%esi(å‚æ•°2)</span><br><span class="line">    0x0000000000400ee9 &lt;+9&gt;:callq  0x401338 &lt;strings_not_equal&gt; &#x2F;&#x2F;è°ƒç”¨strings_not_equal</span><br><span class="line">    0x0000000000400eee &lt;+14&gt;:test   %eax,%eax       &#x2F;&#x2F;æ£€æµ‹å‚1å‚2æ˜¯å¦ç›¸åŒ</span><br><span class="line">    0x0000000000400ef0 &lt;+16&gt;:je     0x400ef7 &lt;phase_1+23&gt;    &#x2F;&#x2F;0ç›¸åŒ è½¬+23</span><br><span class="line">    0x0000000000400ef2 &lt;+18&gt;:callq  0x40143a &lt;explode_bomb&gt;  &#x2F;&#x2F;1ä¸åŒ,ç‚¸</span><br><span class="line">    0x0000000000400ef7 &lt;+23&gt;:add    $0x8,%rsp    &#x2F;&#x2F;å‡ºæ ˆ</span><br><span class="line">    0x0000000000400efb &lt;+27&gt;:retq</span><br></pre></td></tr></table></figure><h3 id="strings-not-equal"><a href="#strings-not-equal" class="headerlink" title="strings_not_equal"></a>strings_not_equal</h3><ul><li>è¾“å…¥: å‚æ•°12 å‡ä¸ºå­—ç¬¦åœ°å€</li><li>åŠŸèƒ½: æ¯”è¾ƒä¸¤ä¸ªæŒ‡å‘å¯¹è±¡é•¿åº¦ä¸å†…å®¹æ˜¯å¦ç›¸åŒ</li><li>è°ƒç”¨: string_length()</li><li>è¿”å›: ç›¸åŒè¿”å›0, ä¸åŒè¿”å›1</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function strings_not_equal:</span><br><span class="line">&#x2F;* rdi &#x3D; *input; esi &#x3D; $0x402400</span><br><span class="line">    0x0000000000401338 &lt;+0&gt;:push   %r12</span><br><span class="line">    0x000000000040133a &lt;+2&gt;:push   %rbp</span><br><span class="line">    0x000000000040133b &lt;+3&gt;:push   %rbx     &#x2F;&#x2F;ä»¥ä¸Šä¿å­˜ç¯å¢ƒ</span><br><span class="line">    0x000000000040133c &lt;+4&gt;:mov    %rdi,%rbx    &#x2F;&#x2F;rbx &#x3D; *input</span><br><span class="line">    0x000000000040133f &lt;+7&gt;:mov    %rsi,%rbp    &#x2F;&#x2F;rbp &#x3D; $0x402400(åœ°å€)</span><br><span class="line">    0x0000000000401342 &lt;+10&gt;:callq  0x40131b &lt;string_length&gt; &#x2F;&#x2F;è°ƒç”¨string_length, å‚æ•°ä¸å˜</span><br><span class="line">    0x0000000000401347 &lt;+15&gt;:mov    %eax,%r12d   &#x2F;&#x2F;r12d(åŒå­—)ä¿å­˜å­—ç¬¦ä¸²é•¿åº¦</span><br><span class="line">    0x000000000040134a &lt;+18&gt;:mov    %rbp,%rdi    &#x2F;&#x2F;è®¡ç®—($0x402400)çš„é•¿åº¦</span><br><span class="line">    0x000000000040134d &lt;+21&gt;:callq  0x40131b &lt;string_length&gt; &#x2F;&#x2F;($0x402400)é•¿åº¦ä¿å­˜åœ¨rax</span><br><span class="line">    0x0000000000401352 &lt;+26&gt;:mov    $0x1,%edx    &#x2F;&#x2F;edx &#x3D; 1</span><br><span class="line">    0x0000000000401357 &lt;+31&gt;:cmp    %eax,%r12d   &#x2F;&#x2F;å­—ç¬¦ä¸²ä¸å¸¸æ•°é•¿åº¦æ¯”è¾ƒ</span><br><span class="line">    0x000000000040135a &lt;+34&gt;:jne    0x40139b &lt;strings_not_equal+99&gt;  &#x2F;&#x2F;é•¿åº¦ä¸åŒè½¬99</span><br><span class="line">    0x000000000040135c &lt;+36&gt;:movzbl (%rbx),%eax  &#x2F;&#x2F;ä¸²1 -&gt; rax</span><br><span class="line">    0x000000000040135f &lt;+39&gt;:test   %al,%al</span><br><span class="line">    0x0000000000401361 &lt;+41&gt;:je     0x401388 &lt;strings_not_equal+80&gt;&#x2F;&#x2F;å¦‚æœä¸²1ç©º,è½¬80</span><br><span class="line">    0x0000000000401363 &lt;+43&gt;:cmp    0x0(%rbp),%al        &#x2F;&#x2F;æ¯”è¾ƒä¸²1ä¸²2</span><br><span class="line">    0x0000000000401366 &lt;+46&gt;:je     0x401372 &lt;strings_not_equal+58&gt;  &#x2F;&#x2F;ç›¸ç­‰,è½¬58</span><br><span class="line">    0x0000000000401368 &lt;+48&gt;:jmp    0x40138f &lt;strings_not_equal+87&gt;  &#x2F;&#x2F;ä¸ç­‰,è½¬87</span><br><span class="line">    0x000000000040136a &lt;+50&gt;:cmp    0x0(%rbp),%al    &#x2F;&#x2F;æ¯”è¾ƒ(å¸¸æ•°)ä¸å­—ç¬¦ä¸²</span><br><span class="line">    0x000000000040136d &lt;+53&gt;:nopl   (%rax)       &#x2F;&#x2F;å¥½åƒæ˜¯å¯¹é½ç”¨çš„? æ— æ“ä½œ</span><br><span class="line">    0x0000000000401370 &lt;+56&gt;:jne    0x401396 &lt;strings_not_equal+94&gt;  &#x2F;&#x2F;ä¸ç­‰è½¬94</span><br><span class="line">    0x0000000000401372 &lt;+58&gt;:add    $0x1,%rbx    &#x2F;&#x2F;å­—ç¬¦ä¸²æŒ‡é’ˆ++</span><br><span class="line">    0x0000000000401376 &lt;+62&gt;:add    $0x1,%rbp    &#x2F;&#x2F;å¸¸æ•°åœ°å€æŒ‡é’ˆ++</span><br><span class="line">    0x000000000040137a &lt;+66&gt;:movzbl (%rbx),%eax  </span><br><span class="line">    0x000000000040137d &lt;+69&gt;:test   %al,%al      &#x2F;&#x2F;å¦‚æœå­—ç¬¦ä¸²ä¸ç©º</span><br><span class="line">    0x000000000040137f &lt;+71&gt;:jne    0x40136a &lt;strings_not_equal+50&gt; &#x2F;&#x2F;è½¬+50</span><br><span class="line">    0x0000000000401381 &lt;+73&gt;:mov    $0x0,%edx&#x2F;&#x2F;å¦‚æœä¸²1ç©º</span><br><span class="line">    0x0000000000401386 &lt;+78&gt;:jmp    0x40139b &lt;strings_not_equal+99&gt;</span><br><span class="line">    0x0000000000401388 &lt;+80&gt;:mov    $0x0,%edx&#x2F;&#x2F;ä¸Šæ¥41,ä¸²1ç©º, è¿”å›0</span><br><span class="line">    0x000000000040138d &lt;+85&gt;:jmp    0x40139b &lt;strings_not_equal+99&gt;</span><br><span class="line">    0x000000000040138f &lt;+87&gt;:mov    $0x1,%edx    &#x2F;&#x2F;ä¸Šæ¥48,ä¸²12ä¸ç­‰,è¿”å›1</span><br><span class="line">    0x0000000000401394 &lt;+92&gt;:jmp    0x40139b &lt;strings_not_equal+99&gt;</span><br><span class="line">    0x0000000000401396 &lt;+94&gt;:mov    $0x1,%edx    &#x2F;&#x2F;ä¸Šæ¥94,ä¸²ä¸ç­‰,è¿”å›1</span><br><span class="line">    0x000000000040139b &lt;+99&gt;:mov    %edx,%eax    &#x2F;&#x2F;ä¸Šæ¥34,é•¿åº¦ä¸ç­‰,è¿”å›1</span><br><span class="line">    0x000000000040139d &lt;+101&gt;:pop    %rbx </span><br><span class="line">    0x000000000040139e &lt;+102&gt;:pop    %rbp</span><br><span class="line">    0x000000000040139f &lt;+103&gt;:pop    %r12 &#x2F;&#x2F;æ¢å¤ç¯å¢ƒ</span><br><span class="line">    0x00000000004013a1 &lt;+105&gt;:retq</span><br></pre></td></tr></table></figure><p>æ³¨:</p><ol><li><p>å¼€å¤´ç»“å°¾æœ‰ä¿å­˜ç¯å¢ƒçš„pushä¸popæ“ä½œ</p></li><li><p>r12d æŒ‡12å¯„å­˜å™¨çš„åŒå­—éƒ¨åˆ†, ä¾æ¬¡æ˜¯:r12, r12d, r12w, r12b. dç–‘ä¼¼æŒ‡double word</p></li><li><p>nopl ä¸ºæ— æ“ä½œ, å¯å‚è€ƒ<a href="https://exp.newsmth.net/topic/article/9a37ce02c405b2b7ae9558f161f38c38" target="_blank" rel="noopener">è¿™é‡Œ</a>.</p></li><li><p>è¿‡ç¨‹:</p><ol><li>å…ˆæ¯”è¾ƒä¸¤ä¸²çš„é•¿åº¦,è‹¥ä¸åŒç›´æ¥è¿”å›1(+34); </li><li>ç„¶åä¸€ä¸ªä¸€ä¸ªbitåœ°æ¯”è¾ƒ, æ¯æ¬¡æ¯”è¾ƒå®Œè·³è½¬å›+50, ç›´åˆ°å…¨éƒ¨æ¯”è¾ƒç»“æŸ, ä¸²ä¸ºç©º,è¿”å›0</li><li>å½“æ¯”è¾ƒä¸­é‡åˆ°ä¸²ä¸ç­‰, ç«‹åˆ»é€€å‡º,è¿”å›1</li></ol></li><li><p>ç–‘æƒ‘:</p><ol><li><p>ä¸ºä»€ä¹ˆæ¯æ¬¡æŒ‡é’ˆä»…ä»…æ˜¯è‡ªåŠ ? æ¯æ¬¡æ˜¯å¯¹alæ¯”è¾ƒ(1byte), æŒ‡é’ˆ+4å²‚ä¸ç¾å“‰?</p></li><li><p>87,94,99éƒ½æ˜¯å‡ºé”™, è¿”å›1, ä¸ºä»€ä¹ˆä¸åˆå¹¶æˆ1ä¸ª? </p><p>(çŒœæµ‹:å¯èƒ½æ˜¯ä¼˜åŒ–çº§åˆ«ä¸å¤Ÿ, ç…§é¡¾æˆ‘ä»¬çš„æ™ºåŠ›æ°´å¹³ğŸ˜‚)</p></li></ol></li></ol><h3 id="string-length"><a href="#string-length" class="headerlink" title="string_length"></a>string_length</h3><ul><li>è¾“å…¥: å­—ç¬¦æŒ‡é’ˆ</li><li>åŠŸèƒ½: è¿”å›æŒ‡å‘çš„ä¸²çš„é•¿åº¦, ç©ºè¿”å›0</li><li>æ— è°ƒç”¨</li><li>è¿”å›: è¿”å›æŒ‡å‘çš„ä¸²çš„é•¿åº¦, ç©ºè¿”å›0</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">rdi &#x3D; *input; </span><br><span class="line">Dump of assembler code for function string_length:</span><br><span class="line">    0x000000000040131b &lt;+0&gt;:cmpb   $0x0,(%rdi)      </span><br><span class="line">    0x000000000040131e &lt;+3&gt;:je     0x401332 &lt;string_length+23&gt;  &#x2F;&#x2F;å¦‚æœinputç©º, è½¬23(è¿”å›0)</span><br><span class="line">    0x0000000000401320 &lt;+5&gt;:mov    %rdi,%rdx        &#x2F;&#x2F;rdx &#x3D; *input</span><br><span class="line">    0x0000000000401323 &lt;+8&gt;:add    $0x1,%rdx        &#x2F;&#x2F;rdx ++ æ¯è½®å°†æŒ‡é’ˆ+1 </span><br><span class="line">    0x0000000000401327 &lt;+12&gt;:mov    %edx,%eax    &#x2F;&#x2F;eax &#x3D;rdx</span><br><span class="line">    0x0000000000401329 &lt;+14&gt;:sub    %edi,%eax    &#x2F;&#x2F;eax -&#x3D; edi, å½“å‰æŒ‡é’ˆä¸åŸæŒ‡é’ˆå·®å€¼</span><br><span class="line">    0x000000000040132b &lt;+16&gt;:cmpb   $0x0,(%rdx)  &#x2F;&#x2F;æŒ‡é’ˆæŒ‡å‘ä¸0æ¯”è¾ƒ</span><br><span class="line">    0x000000000040132e &lt;+19&gt;:jne    0x401323 &lt;string_length+8&gt;&#x2F;&#x2F;å½“æŒ‡å‘éé›¶, è¡¨ç¤ºè¿˜æœªç»“æŸ é€’å½’è°ƒç”¨</span><br><span class="line">    0x0000000000401330 &lt;+21&gt;:repz retq   &#x2F;&#x2F;è¿”è¿˜rax å³æœ€åçš„å·®å€¼, ä¸ºæŒ‡é’ˆå‚¨å­˜çš„æ•°æ®çš„é•¿åº¦</span><br><span class="line">    0x0000000000401332 &lt;+23&gt;:mov    $0x0,%eax    &#x2F;&#x2F;(ä¸Šæ¥+3) è¿”å›0</span><br><span class="line">    0x0000000000401337 &lt;+28&gt;:retq</span><br></pre></td></tr></table></figure><hr><h3 id="Phase-2"><a href="#Phase-2" class="headerlink" title="Phase_2"></a>Phase_2</h3><ul><li>è¾“å…¥: *input</li><li>åŠŸèƒ½: ä¸å…­ä¸ªæ•°å­—æ¯”è¾ƒ, ä¸åŒç‚¸</li><li>è°ƒç”¨: read_six_numbers</li><li>è¿”å›: æ— </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_2:</span><br><span class="line">&#x2F;&#x2F;rdi *input</span><br><span class="line">    0x0000000000400efc &lt;+0&gt;:push   %rbp</span><br><span class="line">    0x0000000000400efd &lt;+1&gt;:push   %rbx&#x2F;&#x2F;ä¿å­˜ç¯å¢ƒ</span><br><span class="line">    0x0000000000400efe &lt;+2&gt;:sub    $0x28,%rsp   &#x2F;&#x2F;æ ˆåˆ†28ä½</span><br><span class="line">    0x0000000000400f02 &lt;+6&gt;:mov    %rsp,%rsi    &#x2F;&#x2F;æ ˆæŒ‡é’ˆä½œä¸ºç¬¬äºŒä¸ªå‚æ•°</span><br><span class="line">    0x0000000000400f05 &lt;+9&gt;:callq  0x40145c &lt;read_six_numbers&gt;&#x2F;&#x2F;è¯»æ•°åœ¨æ ˆå†…</span><br><span class="line">    0x0000000000400f0a &lt;+14&gt;:cmpl   $0x1,(%rsp)  &#x2F;&#x2F;æ ˆé¡¶å…ƒç´ ä¸1æ¯”è¾ƒ</span><br><span class="line">    0x0000000000400f0e &lt;+18&gt;:je     0x400f30 &lt;phase_2+52&gt;    &#x2F;&#x2F;ä¸åŒç‚¸, ç›¸åŒè½¬52</span><br><span class="line">    0x0000000000400f10 &lt;+20&gt;:callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">    0x0000000000400f15 &lt;+25&gt;:jmp    0x400f30 &lt;phase_2+52&gt;</span><br><span class="line">    0x0000000000400f17 &lt;+27&gt;:mov    -0x4(%rbx),%eax      &#x2F;&#x2F;eax &#x3D; æ ˆå…ƒç´ å‰ä¸€ä¸ªå…ƒç´ </span><br><span class="line">    0x0000000000400f1a &lt;+30&gt;:add    %eax,%eax            &#x2F;&#x2F;eax *&#x3D; 2</span><br><span class="line">    0x0000000000400f1c &lt;+32&gt;:cmp    %eax,(%rbx)              &#x2F;&#x2F;rbx(ä¸‹ä¸€ä¸ªå…ƒç´ )ä¸eax(ä¸¤å€çš„ä¸Šä¸€ä¸ªå…ƒç´ )æ¯”è¾ƒ</span><br><span class="line">    0x0000000000400f1e &lt;+34&gt;:je     0x400f25 &lt;phase_2+41&gt;    &#x2F;&#x2F;ä¸åŒç‚¸,ç›¸åŒè½¬41</span><br><span class="line">    0x0000000000400f20 &lt;+36&gt;:callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">    0x0000000000400f25 &lt;+41&gt;:add    $0x4,%rbx            &#x2F;&#x2F;rbx &#x3D; æ ˆä¸‹ä¸€ä¸ªå…ƒç´ </span><br><span class="line">    0x0000000000400f29 &lt;+45&gt;:cmp    %rbp,%rbx            &#x2F;&#x2F;rbx ä¸ rbpæ¯”è¾ƒ</span><br><span class="line">    0x0000000000400f2c &lt;+48&gt;:jne    0x400f17 &lt;phase_2+27&gt;    &#x2F;&#x2F;ä¸åŒè½¬27,ç»§ç»­è½®å›</span><br><span class="line">    0x0000000000400f2e &lt;+50&gt;:jmp    0x400f3c &lt;phase_2+64&gt;&#x2F;&#x2F;ç›¸åŒ,ç¬¬å…­ä¸ªå…ƒç´  è½¬64</span><br><span class="line">    0x0000000000400f30 &lt;+52&gt;:lea    0x4(%rsp),%rbx       &#x2F;&#x2F;rbx &#x3D; ä¸‹ä¸€ä¸ªå…ƒç´ </span><br><span class="line">    0x0000000000400f35 &lt;+57&gt;:lea    0x18(%rsp),%rbp      &#x2F;&#x2F;rbp &#x3D; æ ˆé¡¶+18(åº”è¯¥æ˜¯ç¬¬å…­ä¸ªå…ƒç´ ,å­˜ç–‘)</span><br><span class="line">    0x0000000000400f3a &lt;+62&gt;:jmp    0x400f17 &lt;phase_2+27&gt;   &#x2F;&#x2F;è½¬27</span><br><span class="line">    0x0000000000400f3c &lt;+64&gt;:add    $0x28,%rsp           &#x2F;&#x2F;å‡ºæ ˆ28ä½</span><br><span class="line">    0x0000000000400f40 &lt;+68&gt;:pop    %rbx</span><br><span class="line">    0x0000000000400f41 &lt;+69&gt;:pop    %rbp             &#x2F;&#x2F;æ¢å¤ç¯å¢ƒ</span><br><span class="line">    0x0000000000400f42 &lt;+70&gt;:retq                    &#x2F;&#x2F;ç»“æŸ</span><br></pre></td></tr></table></figure><p>æ³¨: </p><ol><li>read_six_numbers å‡½æ•°å†…å…¶å®æ²¡çœ‹æ‡‚, ç”±åå­—çŒœæµ‹äº†ä¸€æ³¢</li><li>lea S DæŒ‡ä»¤, å°†S(ä¸€ä¸ªæœ‰æ•ˆåœ°å€) å¤åˆ¶ç»™D, åç»­å¼•ç”¨(D)ç”¨æ³•ç±»ä¼¼æŒ‡é’ˆ</li><li><code>add    $0x4,%rbx</code> æŒ‡é’ˆä¸‹ä¸€ä¸ªå…ƒç´ , æ³¨æ„æ ˆæ˜¯å€’è¿‡æ¥å‚¨å­˜çš„</li><li>å­˜ç–‘:<ol><li>57 è¡Œ, <code>%rbp</code>åº”è¯¥æ˜¯è¢«èµ‹äº†ç¬¬å…­ä¸ªå‚æ•°çš„å€¼. å¯æ˜¯ä¸ºä»€ä¹ˆæ˜¯+18? ä¸åº”è¯¥æ˜¯+ 20(4*5)å—?</li></ol></li></ol><h3 id="read-six-numbers"><a href="#read-six-numbers" class="headerlink" title="read_six_numbers"></a>read_six_numbers</h3><ul><li>è¾“å…¥: *input, æ ˆæŒ‡é’ˆ</li><li>åŠŸèƒ½: è¯»å–6ä¸ªæ•°æ®å†™åœ¨å†…å­˜ä¸­</li><li>è°ƒç”¨: __isoc99_sscanf@plt (ç–‘ä¼¼åº“å‡½æ•°?)</li><li>è¿”å›: æ— </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function read_six_numbers:</span><br><span class="line">    0x000000000040145c &lt;+0&gt;:sub    $0x18,%rsp       &#x2F;&#x2F;åˆ†é…18</span><br><span class="line">    0x0000000000401460 &lt;+4&gt;:mov    %rsi,%rdx        &#x2F;&#x2F;rdx &#x3D; åŸæ ˆæŒ‡é’ˆ</span><br><span class="line">    0x0000000000401463 &lt;+7&gt;:lea    0x4(%rsi),%rcx   &#x2F;&#x2F;rcx &#x3D; (æ ˆ4)</span><br><span class="line">    0x0000000000401467 &lt;+11&gt;:lea    0x14(%rsi),%rax  &#x2F;&#x2F;rax &#x3D; (æ ˆ20)</span><br><span class="line">    0x000000000040146b &lt;+15&gt;:mov    %rax,0x8(%rsp)   &#x2F;&#x2F;(æ ˆ+8) &#x3D; æ ˆ20</span><br><span class="line">    0x0000000000401470 &lt;+20&gt;:lea    0x10(%rsi),%rax  &#x2F;&#x2F;rax &#x3D; (æ ˆ+16)</span><br><span class="line">    0x0000000000401474 &lt;+24&gt;:mov    %rax,(%rsp)      &#x2F;&#x2F;(rsp) &#x3D; rax &#x3D; (åŸæ ˆ+16)</span><br><span class="line">    0x0000000000401478 &lt;+28&gt;:lea    0xc(%rsi),%r9    &#x2F;&#x2F;r9 &#x3D; (rsi+12)</span><br><span class="line">    0x000000000040147c &lt;+32&gt;:lea    0x8(%rsi),%r8    &#x2F;&#x2F;r8 &#x3D; (rsi+8)</span><br><span class="line">    0x0000000000401480 &lt;+36&gt;:mov    $0x4025c3,%esi   &#x2F;&#x2F;si &#x3D; $0x4025c3</span><br><span class="line">    0x0000000000401485 &lt;+41&gt;:mov    $0x0,%eax        &#x2F;&#x2F;ax &#x3D; 0</span><br><span class="line">    0x000000000040148a &lt;+46&gt;:callq  0x400bf0 &lt;__isoc99_sscanf@plt&gt;</span><br><span class="line">    0x000000000040148f &lt;+51&gt;:cmp    $0x5,%eax        &#x2F;&#x2F;ç»“æœä¸5æ¯”è¾ƒ</span><br><span class="line">    0x0000000000401492 &lt;+54&gt;:jg     0x401499 &lt;read_six_numbers+61&gt;&#x2F;&#x2F;ç»“æœ&gt;5 ä¸ç‚¸</span><br><span class="line">    0x0000000000401494 &lt;+56&gt;:callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">    0x0000000000401499 &lt;+61&gt;:add    $0x18,%rsp       &#x2F;&#x2F;æ”¶å›18</span><br><span class="line">    0x000000000040149d &lt;+65&gt;:retq</span><br></pre></td></tr></table></figure><p>å—¯â€¦è™½ç„¶æˆ‘æ²¡æ‡‚ä»–æ¯ä¸€æ­¥åœ¨å¹²ä»€ä¹ˆ, ä¸å¦¨ç¢æˆ‘çŒœå‡ºä»–æ˜¯ç”¨æ¥å¹²å•¥çš„.</p><h3 id="Phase-3"><a href="#Phase-3" class="headerlink" title="Phase_3"></a>Phase_3</h3><ul><li>è¾“å…¥: *input</li><li>åŠŸèƒ½: ä¸ä¸¤ä¸ªæ•°å­—æ¯”è¾ƒ, ä¸åŒç‚¸</li><li>è°ƒç”¨: __isoc99_sscanf</li><li>è¿”å›: æ— </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">rdi &#x3D; &amp;input</span><br><span class="line">Dump of assembler code for function phase_3:</span><br><span class="line">    0x0000000000400f43 &lt;+0&gt;:    sub    $0x18,%rsp               &#x2F;&#x2F;æ ˆæ‰©18</span><br><span class="line">    0x0000000000400f47 &lt;+4&gt;:    lea    0xc(%rsp),%rcx           &#x2F;&#x2F;rcx &#x3D; &amp;(æ ˆ12)</span><br><span class="line">    0x0000000000400f4c &lt;+9&gt;:    lea    0x8(%rsp),%rdx           &#x2F;&#x2F;rdx &#x3D; &amp;(æ ˆ8)</span><br><span class="line">    0x0000000000400f51 &lt;+14&gt;:mov    $0x4025cf,%esi           &#x2F;&#x2F;si &#x3D; $0x4025cf</span><br><span class="line">    0x0000000000400f56 &lt;+19&gt;:mov    $0x0,%eax                &#x2F;&#x2F;ax &#x3D; $0x0</span><br><span class="line">    0x0000000000400f5b &lt;+24&gt;:callq  0x400bf0 &lt;__isoc99_sscanf@plt&gt;   &#x2F;&#x2F; è§æ³¨è§£p3_1,å°†2ä¸ªæ•°å­—è£…å…¥æ ˆ8 å’Œ æ ˆ12å¤„</span><br><span class="line">    0x0000000000400f60 &lt;+29&gt;:cmp    $0x1,%eax                &#x2F;&#x2F;axä¸1æ¯”è¾ƒ </span><br><span class="line">    0x0000000000400f63 &lt;+32&gt;:jg     0x400f6a &lt;phase_3+39&gt;    &#x2F;&#x2F;ax&gt;1 è·³è½¬39 å¦åˆ™ç‚¸</span><br><span class="line">    0x0000000000400f65 &lt;+34&gt;:callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">    0x0000000000400f6a &lt;+39&gt;:cmpl   $0x7,0x8(%rsp)           &#x2F;&#x2F;*(æ ˆ8)ä¸7æ¯”è¾ƒ (ä¹Ÿå°±æ˜¯æ•°å­—1ä¸7æ¯”è¾ƒ)</span><br><span class="line">    0x0000000000400f6f &lt;+44&gt;:ja     0x400fad &lt;phase_3+106&gt;   &#x2F;&#x2F;*(æ ˆ8)&gt;7(æ— ç¬¦å·) è½¬106,ç‚¸</span><br><span class="line">    0x0000000000400f71 &lt;+46&gt;:mov    0x8(%rsp),%eax           &#x2F;&#x2F;ax &#x3D; *(æ ˆ8) æ•°1</span><br><span class="line">    0x0000000000400f75 &lt;+50&gt;:jmpq   *0x402470(,%rax,8)       &#x2F;&#x2F;è·³è½¬åˆ°(ax*8+0x402470) è§æ³¨è§£p3_2</span><br><span class="line">    0x0000000000400f7c &lt;+57&gt;:mov    $0xcf,%eax               &#x2F;&#x2F;ä¸Šæ¥50 ä¸”ax&#x3D;0 key &#x3D; 0xcf &#x3D; 207</span><br><span class="line">    0x0000000000400f81 &lt;+62&gt;:jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">    0x0000000000400f83 &lt;+64&gt;:mov    $0x2c3,%eax              &#x2F;&#x2F;ä¸Šæ¥50 ä¸”ax&#x3D;2 key &#x3D; 0x2c3 &#x3D; 707</span><br><span class="line">    0x0000000000400f88 &lt;+69&gt;:jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">    0x0000000000400f8a &lt;+71&gt;:mov    $0x100,%eax              &#x2F;&#x2F;ä¸Šæ¥50 ä¸”ax&#x3D;3 key &#x3D; 0x100 &#x3D; 256</span><br><span class="line">    0x0000000000400f8f &lt;+76&gt;:jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">    0x0000000000400f91 &lt;+78&gt;:mov    $0x185,%eax              &#x2F;&#x2F;ä¸Šæ¥50 ä¸”ax&#x3D;4 key &#x3D; 0x185 &#x3D; 389</span><br><span class="line">    0x0000000000400f96 &lt;+83&gt;:jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">    0x0000000000400f98 &lt;+85&gt;:mov    $0xce,%eax               &#x2F;&#x2F;ä¸Šæ¥50 ä¸”ax&#x3D;5 key &#x3D; 0xce  &#x3D; 206</span><br><span class="line">    0x0000000000400f9d &lt;+90&gt;:jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">    0x0000000000400f9f &lt;+92&gt;:mov    $0x2aa,%eax              &#x2F;&#x2F;ä¸Šæ¥50 ä¸”ax&#x3D;6 key &#x3D; 0x2aa &#x3D; 682</span><br><span class="line">    0x0000000000400fa4 &lt;+97&gt;:jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">    0x0000000000400fa6 &lt;+99&gt;:mov    $0x147,%eax              &#x2F;&#x2F;ä¸Šæ¥50 ä¸”ax&#x3D;7 key &#x3D; 0x147 &#x3D; 327</span><br><span class="line">    0x0000000000400fab &lt;+104&gt;:jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">    0x0000000000400fad &lt;+106&gt;:callq  0x40143a &lt;explode_bomb&gt;  &#x2F;&#x2F;ä¸Šæ¥44,è¾“å…¥ä¸ªæ•°&lt;2</span><br><span class="line">    0x0000000000400fb2 &lt;+111&gt;:mov    $0x0,%eax                &#x2F;&#x2F;è¿™é‡Œæ˜¯ä»€ä¹ˆæƒ…å†µ?å­˜ç–‘</span><br><span class="line">    0x0000000000400fb7 &lt;+116&gt;:jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">    0x0000000000400fb9 &lt;+118&gt;:mov    $0x137,%eax              &#x2F;&#x2F;ä¸Šæ¥50 ä¸”ax&#x3D;1 key &#x3D; 0x137 &#x3D; 311</span><br><span class="line">    0x0000000000400fbe &lt;+123&gt;:cmp    0xc(%rsp),%eax           &#x2F;&#x2F;æ¯”è¾ƒax(å³key)ä¸æ•°2</span><br><span class="line">    0x0000000000400fc2 &lt;+127&gt;:je     0x400fc9 &lt;phase_3+134&gt;   &#x2F;&#x2F;ä¸ç­‰ç‚¸</span><br><span class="line">    0x0000000000400fc4 &lt;+129&gt;:callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">    0x0000000000400fc9 &lt;+134&gt;:add    $0x18,%rsp</span><br><span class="line">    0x0000000000400fcd &lt;+138&gt;:retq</span><br></pre></td></tr></table></figure><p>æ³¨: </p><ol><li><p>è¾“å…¥ä¸¤ä¸ªæ•°å­—,åˆ†åˆ«å‚¨å­˜åœ¨æ ˆ8ä¸æ ˆ12å¤„, å¤šä½™è¾“å…¥ä¸è®¡</p></li><li><p>å¦‚æœè¾“å…¥1ä¸ª,ç›´æ¥ç‚¸</p></li><li><p>æ•°1(æ ˆ8) è‹¥&gt;(unsigned )7, ç›´æ¥ç‚¸</p></li><li><p>æ ¹æ®æ•°1çš„ä¸åŒå–å€¼(0~7), è·³è½¬åˆ°æ ˆç§å‚¨å­˜çš„ä¸åŒåœ°å€, å¹¶æ ¹æ®åœ°å€æ‹¿åˆ°key(å­˜å‚¨åˆ°axä¸­)</p></li><li><p>æ•°2(æ ˆ12) ä¸ keyæ¯”è¾ƒ, ä¸åŒç‚¸, ç›¸åŒè¿‡</p></li><li><p>ç–‘æƒ‘:</p><p>+111å¤„æ˜¯ä»€ä¹ˆæ—¶å€™ä¼šè¿è¡Œåˆ°? ç›´æ¥æŠŠaxèµ‹0?</p></li></ol><h4 id="æ³¨è§£p3-1"><a href="#æ³¨è§£p3-1" class="headerlink" title="æ³¨è§£p3_1"></a>æ³¨è§£p3_1</h4><p><strong>__isoc99_sscanf()</strong></p><p>â€‹    c99æ ‡å‡†åº“sscanfå‡½æ•°, <a href="http://www.cplusplus.com/reference/cstdio/sscanf/" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p><blockquote><p>â€‹    int sscanf ( const char <em> s, const char </em> format, â€¦);</p><p>â€‹    Read formatted data from string</p><p>â€‹    Reads data from s and stores them according to parameter format into the locations given by the additional arguments, as if scanf was used, but reading from s instead of the standard input (stdin).</p><p>â€‹    The additional arguments should point to already allocated objects of the type specified by their corresponding format specifier within the format string.</p><p>â€‹    Return Value</p><p>â€‹    On success, the function returns the number of items in the argument list successfully filled. This count can match the expected number of items or be less (even zero) in the case of a matching failure.</p><p>â€‹    In the case of an input failure before any data could be successfully interpreted, EOF is returned. </p></blockquote><p>â€‹    è¿”å›è¯»å–åˆ°çš„itemçš„ä¸ªæ•°</p><h4 id="æ³¨è§£p3-2"><a href="#æ³¨è§£p3-2" class="headerlink" title="æ³¨è§£p3_2"></a>æ³¨è§£p3_2</h4><p><strong>æ¯ä¸ª(ax*8+0x402470)ä¸­å‚¨å­˜çš„åœ°å€</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(gdb) print *(int**)  (0x402470+8*0)</span><br><span class="line">$11 &#x3D; (int *) 0x400f7c &lt;phase_3+57&gt;</span><br><span class="line"></span><br><span class="line">(gdb) print *(int**)  (0x402470+8*1)</span><br><span class="line">$12 &#x3D; (int *) 0x400fb9 &lt;phase_3+118&gt;</span><br><span class="line"></span><br><span class="line">(gdb) print *(int**)  (0x402470+8*2)</span><br><span class="line">$13 &#x3D; (int *) 0x400f83 &lt;phase_3+64&gt;</span><br><span class="line"></span><br><span class="line">(gdb) print *(int**)  (0x402470+8*3)</span><br><span class="line">$14 &#x3D; (int *) 0x400f8a &lt;phase_3+71&gt;</span><br><span class="line"></span><br><span class="line">(gdb) print *(int**)  (0x402470+8*4)</span><br><span class="line">$15 &#x3D; (int *) 0x400f91 &lt;phase_3+78&gt;</span><br><span class="line"></span><br><span class="line">(gdb) print *(int**)  (0x402470+8*5)</span><br><span class="line">$16 &#x3D; (int *) 0x400f98 &lt;phase_3+85&gt;</span><br><span class="line"></span><br><span class="line">(gdb) print *(int**)  (0x402470+8*6)</span><br><span class="line">$17 &#x3D; (int *) 0x400f9f &lt;phase_3+92&gt;</span><br><span class="line"></span><br><span class="line">(gdb) print *(int**)  (0x402470+8*7)</span><br><span class="line">$18 &#x3D; (int *) 0x400fa6 &lt;phase_3+99&gt;</span><br></pre></td></tr></table></figure><h3 id="Phase-4"><a href="#Phase-4" class="headerlink" title="Phase_4"></a>Phase_4</h3><ul><li>è¾“å…¥: *input</li><li>åŠŸèƒ½: ä¸ä¸¤ä¸ªæ•°å­—æ¯”è¾ƒ, ç›¸åŒåˆ™ç‚¸å¼¹æ‹†é™¤</li><li>è°ƒç”¨: __isoc99_sscanf</li><li>è¿”å›: æ— </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">%rdi &amp;input</span><br><span class="line">Dump of assembler code for function phase_4:</span><br><span class="line">    0x000000000040100c &lt;+0&gt;:sub    $0x18,%rsp               &#x2F;&#x2F;æ‰©æ ˆ18</span><br><span class="line">    0x0000000000401010 &lt;+4&gt;:lea    0xc(%rsp),%rcx           &#x2F;&#x2F;cx æ ˆ12   æ•°2</span><br><span class="line">    0x0000000000401015 &lt;+9&gt;:lea    0x8(%rsp),%rdx           &#x2F;&#x2F;dx æ ˆ8    æ•°1</span><br><span class="line">    0x000000000040101a &lt;+14&gt;:mov    $0x4025cf,%esi           &#x2F;&#x2F;si &#x3D; 0x4025cf</span><br><span class="line">    0x000000000040101f &lt;+19&gt;:mov    $0x0,%eax                &#x2F;&#x2F;ax &#x3D; 0</span><br><span class="line">    0x0000000000401024 &lt;+24&gt;:callq  0x400bf0 &lt;__isoc99_sscanf@plt&gt;   &#x2F;&#x2F;è¯»å–</span><br><span class="line">    0x0000000000401029 &lt;+29&gt;:cmp    $0x2,%eax                &#x2F;&#x2F;è¯»å…¥2ä¸ªæ•°å­—</span><br><span class="line">    0x000000000040102c &lt;+32&gt;:jne    0x401035 &lt;phase_4+41&gt;    &#x2F;&#x2F;è¯»å…¥ä¸ªæ•°!&#x3D;2,ç‚¸</span><br><span class="line">    0x000000000040102e &lt;+34&gt;:cmpl   $0xe,0x8(%rsp)           &#x2F;&#x2F;æ•°1 ä¸ 14æ¯”è¾ƒ</span><br><span class="line">    0x0000000000401033 &lt;+39&gt;:jbe    0x40103a &lt;phase_4+46&gt;    &#x2F;&#x2F;æ•°1 &lt;&#x3D;14 è½¬46</span><br><span class="line">    0x0000000000401035 &lt;+41&gt;:callq  0x40143a &lt;explode_bomb&gt;  &#x2F;&#x2F;æ•°1 &gt;14 ç‚¸</span><br><span class="line">    0x000000000040103a &lt;+46&gt;:mov    $0xe,%edx                &#x2F;&#x2F;14èµ‹ç»™dx</span><br><span class="line">    0x000000000040103f &lt;+51&gt;:mov    $0x0,%esi                &#x2F;&#x2F;si &#x3D; 0</span><br><span class="line">    0x0000000000401044 &lt;+56&gt;:mov    0x8(%rsp),%edi           &#x2F;&#x2F;di æ ˆ8    æ•°1</span><br><span class="line">    0x0000000000401048 &lt;+60&gt;:callq  0x400fce &lt;func4&gt;         </span><br><span class="line">    0x000000000040104d &lt;+65&gt;:test   %eax,%eax                &#x2F;&#x2F;å¯¹äºè¿”å›å€¼ax</span><br><span class="line">    0x000000000040104f &lt;+67&gt;:jne    0x401058 &lt;phase_4+76&gt;    &#x2F;&#x2F;ax!&#x3D;0 è½¬76 ç‚¸</span><br><span class="line">    0x0000000000401051 &lt;+69&gt;:cmpl   $0x0,0xc(%rsp)           &#x2F;&#x2F;æ ˆ12(æ•°2) &#x3D;&#x3D; 0</span><br><span class="line">    0x0000000000401056 &lt;+74&gt;:je     0x40105d &lt;phase_4+81&gt;    &#x2F;&#x2F;ä¸ç­‰ç‚¸,ç­‰æ‹†</span><br><span class="line">    0x0000000000401058 &lt;+76&gt;:callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">    0x000000000040105d &lt;+81&gt;:add    $0x18,%rsp</span><br><span class="line">    0x0000000000401061 &lt;+85&gt;:retq</span><br></pre></td></tr></table></figure><p>æ³¨:</p><ol><li>è¿™ä¸€å—ä»£ç è¿˜æ˜¯æ¯”è¾ƒå¥½æ‡‚çš„. 0~32ä»inputä¸­å–ä¸¤ä¸ªæ•°å­—æ”¾å…¥æ ˆ8 æ ˆ12 å¤„, å¦‚æœä¸æ˜¯<strong>ä¸¤ä¸ª</strong>æ•°å­—çš„è¯ç›´æ¥ç‚¸</li><li>34~67 æ˜¯å¯¹æ•°1 æ£€æµ‹, é¦–å…ˆæ•°1å¿…é¡»&lt;=14, å¦åˆ™ç‚¸. ç„¶åå¯¹æ•°1è°ƒç”¨func4å‡½æ•°, å¦‚æœè¿”å›å€¼!=0ç›´æ¥ç‚¸</li><li>69~85 æ˜¯å¯¹æ•°2 æ£€æµ‹, ç®€å•çš„ä»¤äººå‘æŒ‡. ä¸ä¸º0ç‚¸, ä¸º0ç‚¸å¼¹æ‹†é™¤.</li></ol><h3 id="func4"><a href="#func4" class="headerlink" title="func4"></a>func4</h3><ul><li>è¾“å…¥: rdi = æ•°1 rsi = ?   rdx = 0xe</li><li>åŠŸèƒ½: å¯¹å‚æ•°è¿›è¡ŒæŸç§ç¥ç§˜æ“ä½œ, è¿”å›æŸä¸ªå€¼</li><li>è°ƒç”¨:  func4</li><li>è¿”å›: æŸä¸ªint</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€è½®: rdi &#x3D; æ•°1 rsi &#x3D; 0   rdx &#x3D; 0xe </span><br><span class="line">Dump of assembler code for function func4:</span><br><span class="line">   0x0000000000400fce &lt;+0&gt;:    sub    $0x8,%rsp            &#x2F;&#x2F;æ ˆæ‰©8</span><br><span class="line">   0x0000000000400fd2 &lt;+4&gt;:    mov    %edx,%eax            &#x2F;&#x2F;ax &#x3D; dx</span><br><span class="line">   0x0000000000400fd4 &lt;+6&gt;:    sub    %esi,%eax            &#x2F;&#x2F;ax &#x3D; dx-si</span><br><span class="line">   0x0000000000400fd6 &lt;+8&gt;:    mov    %eax,%ecx            &#x2F;&#x2F;cx &#x3D; dx-si</span><br><span class="line">   0x0000000000400fd8 &lt;+10&gt;:shr    $0x1f,%ecx           &#x2F;&#x2F;é€»è¾‘å³ç§» cx 31ä½ æ­£0è´Ÿ1</span><br><span class="line">   0x0000000000400fdb &lt;+13&gt;:add    %ecx,%eax            &#x2F;&#x2F;ax +&#x3D; cx</span><br><span class="line">   0x0000000000400fdd &lt;+15&gt;:sar    %eax                 &#x2F;&#x2F;ax ç®—æ•°å³ç§»1ä½</span><br><span class="line">   0x0000000000400fdf &lt;+17&gt;:lea    (%rax,%rsi,1),%ecx   &#x2F;&#x2F;cx &#x3D; si + ax</span><br><span class="line">   0x0000000000400fe2 &lt;+20&gt;:cmp    %edi,%ecx            &#x2F;&#x2F;cxä¸æ•°1æ¯”è¾ƒ </span><br><span class="line">   0x0000000000400fe4 &lt;+22&gt;:jle    0x400ff2 &lt;func4+36&gt;  &#x2F;&#x2F;cx&lt;&#x3D;æ•°1, è½¬36</span><br><span class="line">   0x0000000000400fe6 &lt;+24&gt;:lea    -0x1(%rcx),%edx      &#x2F;&#x2F;cx&gt;æ•°1 dx &#x3D; cx-1</span><br><span class="line">   0x0000000000400fe9 &lt;+27&gt;:callq  0x400fce &lt;func4&gt;     &#x2F;&#x2F;è°ƒç”¨func4 di&#x3D;æ•°1,si&#x3D;si,dx&#x3D;cx-1</span><br><span class="line">   0x0000000000400fee &lt;+32&gt;:add    %eax,%eax            &#x2F;&#x2F;è¿”å›å€¼ax*&#x3D;2</span><br><span class="line">   0x0000000000400ff0 &lt;+34&gt;:jmp    0x401007 &lt;func4+57&gt;  &#x2F;&#x2F;è¿”å›</span><br><span class="line">   0x0000000000400ff2 &lt;+36&gt;:mov    $0x0,%eax            &#x2F;&#x2F;ä¸Šæ¥22 ax &#x3D; 0</span><br><span class="line">   0x0000000000400ff7 &lt;+41&gt;:cmp    %edi,%ecx            &#x2F;&#x2F;æ¯”è¾ƒcx æ•°1</span><br><span class="line">   0x0000000000400ff9 &lt;+43&gt;:jge    0x401007 &lt;func4+57&gt;  &#x2F;&#x2F;cx&gt;&#x3D;æ•°1(ä¹Ÿå°±æ˜¯cx&#x3D;æ•°1) è½¬57 è¿”å› </span><br><span class="line">   0x0000000000400ffb &lt;+45&gt;:lea    0x1(%rcx),%esi       &#x2F;&#x2F;cx&lt;æ•°1 si &#x3D; cx+1</span><br><span class="line">   0x0000000000400ffe &lt;+48&gt;:callq  0x400fce &lt;func4&gt;     &#x2F;&#x2F;è°ƒç”¨func4 di&#x3D;æ•°1,si&#x3D;si&#x3D;cx+1,dx&#x3D;dx</span><br><span class="line">   0x0000000000401003 &lt;+53&gt;:lea    0x1(%rax,%rax,1),%eax    &#x2F;&#x2F;ax&#x3D;2ax+1</span><br><span class="line">   0x0000000000401007 &lt;+57&gt;:add    $0x8,%rsp            </span><br><span class="line">   0x000000000040100b &lt;+61&gt;:retq</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°æŠ˜ç£¨äº†æˆ‘æ•´æ•´24h, æœ€ç»ˆæ²¡å¿ä½å»æœäº†åˆ«äººçš„é¢˜è§£. ä¸‹é¢è¿™ä¸€æ®µå€Ÿé‰´äº†<a href="https://www.jianshu.com/p/33eb51b2024e" target="_blank" rel="noopener">ä¸€ä½ç®€ä¹¦ç½‘å‹çš„è¿™ç¯‡æ–‡ç« </a></p><p>å¯¹func4å‡½æ•°è¿›è¡Œåæ±‡ç¼–:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fun4</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> v2, <span class="keyword">int</span> v3)</span></span>&#123;</span><br><span class="line">    <span class="comment">/*  x = rdi(æ•°1) </span></span><br><span class="line"><span class="comment">        v2 = rsi(åˆå€¼0)</span></span><br><span class="line"><span class="comment">        v3 = rdx(åˆå€¼e)*/</span></span><br><span class="line">    <span class="keyword">int</span> tmp = (v3 - v2) &gt;&gt; <span class="number">21</span>;    <span class="comment">//é€»è¾‘å³ç§»</span></span><br><span class="line">    <span class="keyword">int</span> re = ((v3 - v2) + tmp) &gt;&gt; <span class="number">1</span>; <span class="comment">//ç®—æ•°å³ç§»</span></span><br><span class="line">    tmp = v2 + re;</span><br><span class="line">    <span class="keyword">if</span>(tmp &lt;= x) &#123;</span><br><span class="line">        <span class="keyword">if</span>(tmp&gt;=x) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        re = fun4(x,tmp+<span class="number">1</span>,v3);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>*re+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        re = fun4(x,v2,tmp<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * re;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸å¦¨å†å†™ä¸ªæµ‹è¯•å‡½æ•°:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">0xe</span> ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(fun4(i, <span class="number">0x0</span>, <span class="number">0xe</span>)==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾—åˆ°:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">7</span><br></pre></td></tr></table></figure><p>å½“ä¸”ä»…å½“ x = 0,1,3,7 ä¸­æŸä¸ªå€¼æ—¶,funcä¼šè¿”å›0.</p><h3 id="Phase-5"><a href="#Phase-5" class="headerlink" title="Phase_5"></a>Phase_5</h3><ul><li>è¾“å…¥: *input</li><li>åŠŸèƒ½: æ ¹æ® input æŒ‡å‘å¯¹è±¡æ˜ å°„å¾—å‡ºæ–°å­—ç¬¦ä¸², è‹¥æ–°å­—ç¬¦ä¸²ä¸<code>flyers</code>ç›¸åŒåˆ™ç‚¸å¼¹æ‹†é™¤</li><li>è°ƒç”¨: strings_not_equal(); string_length</li><li>è¿”å›: 0</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">%rdi &amp;input</span><br><span class="line">Dump of assembler code for function phase_5:</span><br><span class="line">    0x0000000000401062 &lt;+0&gt;:push   %rbx</span><br><span class="line">    0x0000000000401063 &lt;+1&gt;:sub    $0x20,%rsp</span><br><span class="line">    0x0000000000401067 &lt;+5&gt;:mov    %rdi,%rbx            &#x2F;&#x2F;rbx &#x3D; &amp;input</span><br><span class="line">    0x000000000040106a &lt;+8&gt;:mov    %fs:0x28,%rax        &#x2F;&#x2F;rax &#x3D; &amp;fs+28      è¯¦è§æ³¨è§£p5_1</span><br><span class="line">    0x0000000000401073 &lt;+17&gt;:mov    %rax,0x18(%rsp)      &#x2F;&#x2F;æ ˆ18å‚¨å­˜&amp;fs+28</span><br><span class="line">    0x0000000000401078 &lt;+22&gt;:xor    %eax,%eax            &#x2F;&#x2F;è‡ªæˆ‘å¼‚æˆ–, ç­‰ä»·äºaxç½®0</span><br><span class="line">    0x000000000040107a &lt;+24&gt;:callq  0x40131b &lt;string_length&gt; &#x2F;&#x2F;æ£€æµ‹rdiçš„é•¿åº¦</span><br><span class="line">    0x000000000040107f &lt;+29&gt;:cmp    $0x6,%eax            </span><br><span class="line">    0x0000000000401082 &lt;+32&gt;:je     0x4010d2 &lt;phase_5+112&gt;   &#x2F;&#x2F;é•¿åº¦&#x3D;6 è½¬112</span><br><span class="line">    0x0000000000401084 &lt;+34&gt;:callq  0x40143a &lt;explode_bomb&gt;  &#x2F;&#x2F;é•¿åº¦!&#x3D;6,ç‚¸</span><br><span class="line">    0x0000000000401089 &lt;+39&gt;:jmp    0x4010d2 &lt;phase_5+112&gt;</span><br><span class="line">    0x000000000040108b &lt;+41&gt;:movzbl (%rbx,%rax,1),%ecx       &#x2F;&#x2F;cx &#x3D; (ax+bx) &#x3D; input[ax]</span><br><span class="line">    0x000000000040108f &lt;+45&gt;:mov    %cl,(%rsp)               &#x2F;&#x2F;æ ˆ0 &#x3D; cl</span><br><span class="line">    0x0000000000401092 &lt;+48&gt;:mov    (%rsp),%rdx              &#x2F;&#x2F;dx &#x3D; æ ˆ0</span><br><span class="line">    0x0000000000401096 &lt;+52&gt;:and    $0xf,%edx                &#x2F;&#x2F;dx^f å–å4ä½</span><br><span class="line">    0x0000000000401099 &lt;+55&gt;:movzbl 0x4024b0(%rdx),%edx      &#x2F;&#x2F;dx &#x3D; (0x4024b0+dx) è¿™é‡Œæ¯”è¾ƒå¤æ‚,è¯¦è§æ³¨è§£p5_2,p5_3</span><br><span class="line">    0x00000000004010a0 &lt;+62&gt;:mov    %dl,0x10(%rsp,%rax,1)    &#x2F;&#x2F;æ ˆ10+ax &#x3D; dl </span><br><span class="line">    0x00000000004010a4 &lt;+66&gt;:add    $0x1,%rax                &#x2F;&#x2F;ax+&#x3D;1</span><br><span class="line">    0x00000000004010a8 &lt;+70&gt;:cmp    $0x6,%rax                &#x2F;&#x2F;axä¸6æ¯”è¾ƒ</span><br><span class="line">    0x00000000004010ac &lt;+74&gt;:jne    0x40108b &lt;phase_5+41&gt;    &#x2F;&#x2F;ä¸ä¸º6 ç»§ç»­å¾ªç¯è‡³41</span><br><span class="line">    &#x2F;&#x2F;å¯¹è¾“å…¥çš„æ¯ä¸ªå­—ç¬¦ä¾æ¬¡è¿ç®—,æ ¹æ®è¿ç®—ç»“æœå–å‡ºç‰¹å®šå†…å­˜ä¸­çš„å­—ç¬¦,ä¾æ¬¡å­˜å‚¨åœ¨æ ˆ10~æ ˆ16å¤„</span><br><span class="line">    0x00000000004010ae &lt;+76&gt;:movb   $0x0,0x16(%rsp)          &#x2F;&#x2F;æ ˆ16&#x3D;0</span><br><span class="line">    0x00000000004010b3 &lt;+81&gt;:mov    $0x40245e,%esi           &#x2F;&#x2F;si&#x3D;0x40245e</span><br><span class="line">    0x00000000004010b8 &lt;+86&gt;:lea    0x10(%rsp),%rdi          &#x2F;&#x2F;di&#x3D;æ ˆ10</span><br><span class="line">    0x00000000004010bd &lt;+91&gt;:callq  0x401338 &lt;strings_not_equal&gt; &#x2F;&#x2F;æ ˆ10ä¸0x40245eæ¯”è¾ƒ</span><br><span class="line">    0x00000000004010c2 &lt;+96&gt;:test   %eax,%eax                    &#x2F;&#x2F;å¯¹äºax (strings_not_equalçš„è¿”å›å€¼)</span><br><span class="line">    0x00000000004010c4 &lt;+98&gt;:je     0x4010d9 &lt;phase_5+119&gt;       &#x2F;&#x2F;è¿”å›å€¼1(ä¸åŒ) ç‚¸ ç›¸åŒè½¬119</span><br><span class="line">    0x00000000004010c6 &lt;+100&gt;:callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">    0x00000000004010cb &lt;+105&gt;:nopl   0x0(%rax,%rax,1)</span><br><span class="line">    0x00000000004010d0 &lt;+110&gt;:jmp    0x4010d9 &lt;phase_5+119&gt;</span><br><span class="line">    0x00000000004010d2 &lt;+112&gt;:mov    $0x0,%eax                    &#x2F;&#x2F;axç½®0</span><br><span class="line">    0x00000000004010d7 &lt;+117&gt;:jmp    0x40108b &lt;phase_5+41&gt;        &#x2F;&#x2F;è½¬41</span><br><span class="line">    0x00000000004010d9 &lt;+119&gt;:mov    0x18(%rsp),%rax              &#x2F;&#x2F;ax&#x3D;æ ˆ18</span><br><span class="line">    0x00000000004010de &lt;+124&gt;:xor    %fs:0x28,%rax                &#x2F;&#x2F;æ ˆ18 ä¸fs+28å¼‚æˆ–</span><br><span class="line">    0x00000000004010e7 &lt;+133&gt;:je     0x4010ee &lt;phase_5+140&gt;       &#x2F;&#x2F;ç›¸åŒ è½¬140 è§£å†³</span><br><span class="line">    0x00000000004010e9 &lt;+135&gt;:callq  0x400b30 &lt;__stack_chk_fail@plt&gt;</span><br><span class="line">    0x00000000004010ee &lt;+140&gt;:add    $0x20,%rsp</span><br><span class="line">    0x00000000004010f2 &lt;+144&gt;:pop    %rbx</span><br><span class="line">    0x00000000004010f3 &lt;+145&gt;:retq</span><br></pre></td></tr></table></figure><p>æ³¨:</p><ol><li>ä»£ç ä¸­+8~+17,+119~+133éƒ¨åˆ†æ¶‰åŠåˆ°äº†å¯¹äºæ®µå¯„å­˜å™¨fsçš„æ“ä½œ, è¿™æ˜¯è¿›è¡Œäº†æ ˆä¿æŠ¤, é¿å…æ ˆçš„ç¼“å†²åŒºæº¢å‡º.æ­¤å¤„å°†é‡‘ä¸é›€å€¼(canary)å­˜å…¥æ ˆ18å¤„, å¹¶å¤‡ä»½åœ¨fsæ®µ,ç»“æŸæ—¶æ¯”è¾ƒcanaryæ˜¯å¦è¢«ä¿®æ”¹, å¹¶è°ƒç”¨æ ˆæ£€æŸ¥å¤±è´¥å‡½æ•°(__stack_chk_fail) . æ›´å¤šå‚è§æ•™æ3.10ç« ç¼“å†²åŒºæº¢å‡ºéƒ¨åˆ†.</li><li>24~34 æ£€æµ‹è¾“å…¥å­—ç¬¦ä¸²é•¿åº¦, è‹¥!=6 ç›´æ¥ç‚¸</li><li>41~74 å¯¹ä¸²ä¸­çš„å…­ä¸ªå­—ç¬¦ä¾æ¬¡è¿ç®—,æ ¹æ®è¿ç®—ç»“æœå–å‡ºç‰¹å®šå†…å­˜ä¸­çš„æ˜ å°„å­—ç¬¦,ä¾æ¬¡å­˜å‚¨åœ¨æ ˆ10~æ ˆ16å¤„</li><li>76~98 æ¯”è¾ƒå–å‡ºæ¥çš„æ˜ å°„å­—ç¬¦æ˜¯å¦ä¸åœ°å€ <code>0x40245e</code>ä¸­çš„å­—ç¬¦ä¸²(flyers)ä¸€è‡´, ç›¸åŒåˆ™ç‚¸å¼¹æ‹†é™¤.</li></ol><h4 id="æ³¨è§£p5-1"><a href="#æ³¨è§£p5-1" class="headerlink" title="æ³¨è§£p5_1"></a>æ³¨è§£p5_1</h4><p>â€‹    fsæ®µå¯„å­˜å™¨</p><p>â€‹    8086CPUå°†å†…å­˜åˆ†æ®µï¼Œå¹¶è®¾è®¡äº† 4 ä¸ªæ®µå¯„å­˜å™¨ï¼ŒCSï¼ŒDSï¼ŒES å’Œ SSï¼Œåˆ†åˆ«ç”¨äºæŒ‡ä»¤ã€æ•°æ®ã€å…¶å®ƒå’Œå †æ ˆã€‚</p><p>â€‹    FSã€GS æ˜¯ä» 80386 å¼€å§‹å¢åŠ çš„ä¸¤ä¸ªè¾…åŠ©æ®µå¯„å­˜å™¨ï¼Œæ²¡æœ‰å…¨ç§°ï¼Œå–åå°±æ˜¯æŒ‰å­—æ¯åºæ’åœ¨ CSã€DSã€ES ä¹‹åçš„ã€‚ </p><h4 id="æ³¨è§£p5-2"><a href="#æ³¨è§£p5-2" class="headerlink" title="æ³¨è§£p5_2"></a>æ³¨è§£p5_2</h4><p>char ç±»å‹å æœ‰1ä¸ªå­—èŠ‚(8bits)çš„ç©ºé—´, ä»£ç ä¸­å¯¹äºæ¯ä¸ªå­—ç¬¦, å–åå››ä½ä»£ç , å¹¶åŠ ä¸Š0x4024b0å¾—åˆ°æ˜ å°„å­—ç¬¦çš„åœ°å€, å¹¶å°†å¾—åˆ°çš„æ˜ å°„å­—ç¬¦å­˜å…¥æ ˆä¸­çš„å¯¹åº”ä½ç½®.ä¾‹å¦‚å½“å­—ç¬¦ä¸²çš„ç¬¬äºŒä¸ªå­—ç¬¦ä¸ºOæ—¶, ä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œ:</p><blockquote><p>å­—ç¬¦<code>O</code>å¯¹åº”çš„ASCAIIç ä¸º <code>0x4f</code></p><p>å–åå››ä½ä»£ç  <code>0xf</code></p><p>å¾—åˆ°æ˜ å°„å­—ç¬¦çš„åœ°å€ <code>0x4024bf</code></p><p>è®¿é—®è¯¥åœ°å€, å¾—åˆ°æ˜ å°„å­—ç¬¦<code>l</code> , å¹¶å­˜å…¥æ ˆ11å¤„ (11æ˜¯ç¬¬äºŒä¸ªå­—ç¬¦å¯¹åº”æ ˆä¸­çš„ä½ç½®)</p></blockquote><h4 id="æ³¨è§£p5-3"><a href="#æ³¨è§£p5-3" class="headerlink" title="æ³¨è§£p5_3"></a>æ³¨è§£p5_3</h4><p><strong><code>0x4024b0</code>é™„è¿‘å­˜å‚¨çš„å­—ç¬¦</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">(gdb) print (char) *(0x4024b0+0x0)</span><br><span class="line">$1 &#x3D; 109 &#39;m&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0x1)</span><br><span class="line">$2 &#x3D; 97 &#39;a&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0x2)</span><br><span class="line">$3 &#x3D; 100 &#39;d&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0x3)</span><br><span class="line">$4 &#x3D; 117 &#39;u&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0x4)</span><br><span class="line">$5 &#x3D; 105 &#39;i&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0x5)</span><br><span class="line">$6 &#x3D; 101 &#39;e&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0x6)</span><br><span class="line">$7 &#x3D; 114 &#39;r&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0x7)</span><br><span class="line">$8 &#x3D; 115 &#39;s&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0x8)</span><br><span class="line">$9 &#x3D; 110 &#39;n&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0x9)</span><br><span class="line">$10 &#x3D; 102 &#39;f&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0xa)</span><br><span class="line">$11 &#x3D; 111 &#39;o&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0xb)</span><br><span class="line">$12 &#x3D; 116 &#39;t&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0xc)</span><br><span class="line">$13 &#x3D; 118 &#39;v&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0xd)</span><br><span class="line">$14 &#x3D; 98 &#39;b&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0xe)</span><br><span class="line">$15 &#x3D; 121 &#39;y&#39;</span><br><span class="line">(gdb) print (char) *(0x4024b0+0xf)</span><br><span class="line">$16 &#x3D; 108 &#39;l&#39;</span><br></pre></td></tr></table></figure><p><strong><code>0x40245e</code> å‚¨å­˜çš„å­—ç¬¦</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) print (char*) 0x40245e</span><br><span class="line">$17 &#x3D; 0x40245e &quot;flyers&quot;</span><br></pre></td></tr></table></figure><p><strong>å¶ç„¶å‘ç°çš„ä¸€ä¸ªå½©è›‹</strong></p><p>å›åˆ° <code>0x4024b0</code>é™„è¿‘, ç†è®ºä¸Šå¯èƒ½æ˜ å°„åˆ°çš„å­—ç¬¦åœ°å€åº”è¯¥æ˜¯ä» <code>0x4024b0</code>~<code>0x4024bf</code> , ä½†å®é™…ä¸Š<code>0x4024c0</code>ä»¥åŠåé¢æœ‰å­—ç¬¦å¯ä»¥å–åˆ°, å¦‚æœè°ƒç”¨çš„ä¸æ˜¯æŸ¥çœ‹åœ°å€å¯¹åº”çš„å­—ç¬¦, è€Œæ˜¯å­—ç¬¦ä¸²çš„è¯, ä¼šå‘ç°ä¸‹é¢ä¸€æ®µè¯:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) print (char*) 0x4024b0</span><br><span class="line">$18 &#x3D; 0x4024b0 &lt;array&gt; &quot;maduiersnfotvbylSo you think you can stop the bomb with ctrl-c, do you?&quot;</span><br></pre></td></tr></table></figure><p>å‰16ä¸ªå­—ç¬¦å°±æ˜¯æˆ‘ä»¬ç”¨äºè§£é¢˜çš„å­—ç¬¦, åé¢å±…ç„¶è¿˜æœ‰ä¸€å¥æ¥è‡ªæ•™æˆçš„åæ§½LOLğŸ˜‚</p><h3 id="Phase-6"><a href="#Phase-6" class="headerlink" title="Phase_6"></a>Phase_6</h3><ul><li>è¾“å…¥: *input</li><li>åŠŸèƒ½: è¾“å…¥å…­ä¸ªæ•°å­—</li><li>è°ƒç”¨: read_six_numbers</li><li>è¿”å›: 0</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">%rdi &amp;input</span><br><span class="line">Dump of assembler code for function phase_6:</span><br><span class="line">   0x00000000004010f4 &lt;+0&gt;:push   %r14</span><br><span class="line">   0x00000000004010f6 &lt;+2&gt;:push   %r13</span><br><span class="line">   0x00000000004010f8 &lt;+4&gt;:push   %r12</span><br><span class="line">   0x00000000004010fa &lt;+6&gt;:push   %rbp</span><br><span class="line">   0x00000000004010fb &lt;+7&gt;:push   %rbx</span><br><span class="line">   0x00000000004010fc &lt;+8&gt;:sub    $0x50,%rsp</span><br><span class="line">   0x0000000000401100 &lt;+12&gt;:mov    %rsp,%r13</span><br><span class="line">   0x0000000000401103 &lt;+15&gt;:mov    %rsp,%rsi</span><br><span class="line">   0x0000000000401106 &lt;+18&gt;:callq  0x40145c &lt;read_six_numbers&gt;  &#x2F;&#x2F;è¯»å…¥6ä¸ªæ•°å­—</span><br><span class="line">   0x000000000040110b &lt;+23&gt;:mov    %rsp,%r14</span><br><span class="line">   0x000000000040110e &lt;+26&gt;:mov    $0x0,%r12d   </span><br><span class="line">   0x0000000000401114 &lt;+32&gt;:mov    %r13,%rbp                &#x2F;&#x2F;rbp&#x3D;r13 å¤–å¾ªç¯1èµ·å§‹</span><br><span class="line">   0x0000000000401117 &lt;+35&gt;:mov    0x0(%r13),%eax              </span><br><span class="line">   0x000000000040111b &lt;+39&gt;:sub    $0x1,%eax                &#x2F;&#x2F;ax&#x3D;(r13)-1</span><br><span class="line">   0x000000000040111e &lt;+42&gt;:cmp    $0x5,%eax                &#x2F;&#x2F;axä¸5æ¯”è¾ƒ</span><br><span class="line">   0x0000000000401121 &lt;+45&gt;:jbe    0x401128 &lt;phase_6+52&gt;    &#x2F;&#x2F;ax&gt;5 ç‚¸</span><br><span class="line">   0x0000000000401123 &lt;+47&gt;:callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401128 &lt;+52&gt;:add    $0x1,%r12d               &#x2F;&#x2F;r12++  r12ä¸ºå¤–å¾ªç¯ç´¢å¼•</span><br><span class="line">   0x000000000040112c &lt;+56&gt;:cmp    $0x6,%r12d               &#x2F;&#x2F;æ¯”è¾ƒr12ä¸6</span><br><span class="line">   0x0000000000401130 &lt;+60&gt;:je     0x401153 &lt;phase_6+95&gt;    &#x2F;&#x2F;å¾ªç¯6æ¬¡ ç»“æŸè½¬95(å¤–å¾ªç¯ 1)</span><br><span class="line">   0x0000000000401132 &lt;+62&gt;:mov    %r12d,%ebx</span><br><span class="line">   0x0000000000401135 &lt;+65&gt;:movslq %ebx,%rax                &#x2F;&#x2F;é‡Œå¾ªç¯èµ·å§‹</span><br><span class="line">   0x0000000000401138 &lt;+68&gt;:mov    (%rsp,%rax,4),%eax       &#x2F;&#x2F;ax &#x3D; æ ˆ[r12]</span><br><span class="line">   0x000000000040113b &lt;+71&gt;:cmp    %eax,0x0(%rbp)           &#x2F;&#x2F;æ¯”è¾ƒ(r13)ä¸ax</span><br><span class="line">   0x000000000040113e &lt;+74&gt;:jne    0x401145 &lt;phase_6+81&gt;    &#x2F;&#x2F;ä¸ç­‰äº è½¬81 ç­‰äº ç‚¸</span><br><span class="line">   0x0000000000401140 &lt;+76&gt;:callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401145 &lt;+81&gt;:add    $0x1,%ebx                &#x2F;&#x2F;bx++ bxä¸ºé‡Œå¾ªç¯ç´¢å¼•</span><br><span class="line">   0x0000000000401148 &lt;+84&gt;:cmp    $0x5,%ebx                </span><br><span class="line">   0x000000000040114b &lt;+87&gt;:jle    0x401135 &lt;phase_6+65&gt;    &#x2F;&#x2F;è‹¥bx&lt;&#x3D;5, å³æ•°2~æ•°5 å¾ªç¯65 (é‡Œå¾ªç¯ 2)</span><br><span class="line">   0x000000000040114d &lt;+89&gt;:add    $0x4,%r13                &#x2F;&#x2F;ç°åœ¨æ•°6,r13&#x3D;ä¸‹ä¸€ä¸ªæ•°å­—æ ˆåœ°å€</span><br><span class="line">   0x0000000000401151 &lt;+93&gt;:jmp    0x401114 &lt;phase_6+32&gt;    &#x2F;&#x2F;è½¬32(å¤–å¾ªç¯) </span><br><span class="line">   &#x2F;&#x2F;å¾ªç¯12: å¤–å¾ªç¯ä¿è¯æ¯ä¸ªæ•°å­—å‡âˆˆ[1,6] , é‡Œå¾ªç¯ä¿è¯æ•°å­—å„ä¸ç›¸åŒ</span><br><span class="line">   &#x2F;&#x2F;æ–¹ä¾¿èµ·è§, ç§°è¾“å…¥çš„6ä¸ªæ•°å­—ä¸ºa[i],iâˆˆ[0,5]</span><br><span class="line">   0x0000000000401153 &lt;+95&gt;:lea    0x18(%rsp),%rsi          &#x2F;&#x2F;rsi&#x3D;æ ˆ+24 (æ ˆ0~20å­˜å‚¨æ•°1-6)</span><br><span class="line">   0x0000000000401158 &lt;+100&gt;:mov    %r14,%rax                &#x2F;&#x2F;ax&#x3D;æ ˆ0åœ°å€</span><br><span class="line">   0x000000000040115b &lt;+103&gt;:mov    $0x7,%ecx                &#x2F;&#x2F;cx&#x3D;7</span><br><span class="line">   0x0000000000401160 &lt;+108&gt;:mov    %ecx,%edx                &#x2F;&#x2F;dx &#x3D; cx       å¾ªç¯3èµ·å§‹</span><br><span class="line">   0x0000000000401162 &lt;+110&gt;:sub    (%rax),%edx              &#x2F;&#x2F;dx -&#x3D; *ax</span><br><span class="line">   0x0000000000401164 &lt;+112&gt;:mov    %edx,(%rax)              &#x2F;&#x2F;*ax &#x3D; dx</span><br><span class="line">   0x0000000000401166 &lt;+114&gt;:add    $0x4,%rax                &#x2F;&#x2F;axæŒ‡å‘ä¸‹ä¸€ä¸ªæ•°å­—  axä¸ºå¾ªç¯3ç´¢å¼•</span><br><span class="line">   0x000000000040116a &lt;+118&gt;:cmp    %rsi,%rax                &#x2F;&#x2F;å¦‚æœax!&#x3D;æ ˆ+24</span><br><span class="line">   0x000000000040116d &lt;+121&gt;:jne    0x401160 &lt;phase_6+108&gt;   &#x2F;&#x2F;è½¬108 å¾ªç¯3</span><br><span class="line">   0x000000000040116f &lt;+123&gt;:mov    $0x0,%esi                &#x2F;&#x2F;si &#x3D; 0   </span><br><span class="line">   0x0000000000401174 &lt;+128&gt;:jmp    0x401197 &lt;phase_6+163&gt;   &#x2F;&#x2F;è½¬163         å¾ªç¯3ç»“æŸ</span><br><span class="line">   &#x2F;&#x2F;å¾ªç¯3: ä½¿æ¯æ•°1-æ•°6ä¸åŸåœ°å¯¹7å–è¡¥(1-&gt;6,2-&gt;5) ç§°å–è¡¥åçš„æ•°ä¸ºb[i]&#x3D;7-a[i]</span><br><span class="line">   0x0000000000401176 &lt;+130&gt;:mov    0x8(%rdx),%rdx           &#x2F;&#x2F;dx +&#x3D; 0x8</span><br><span class="line">   0x000000000040117a &lt;+134&gt;:add    $0x1,%eax                &#x2F;&#x2F;ax++</span><br><span class="line">   0x000000000040117d &lt;+137&gt;:cmp    %ecx,%eax                &#x2F;&#x2F;æ¯”è¾ƒæ•°è¡¥ä¸ax</span><br><span class="line">   0x000000000040117f &lt;+139&gt;:jne    0x401176 &lt;phase_6+130&gt;   &#x2F;&#x2F;ä¸ç­‰ è½¬130</span><br><span class="line">   0x0000000000401181 &lt;+141&gt;:jmp    0x401188 &lt;phase_6+148&gt;   &#x2F;&#x2F;ç­‰ è½¬148</span><br><span class="line">   0x0000000000401183 &lt;+143&gt;:mov    $0x6032d0,%edx           &#x2F;&#x2F;dx &#x3D; 0x6032d0</span><br><span class="line">   0x0000000000401188 &lt;+148&gt;:mov    %rdx,0x20(%rsp,%rsi,2)   &#x2F;&#x2F;(æ ˆ+2*si+32)&#x3D;dx</span><br><span class="line">   0x000000000040118d &lt;+153&gt;:add    $0x4,%rsi                &#x2F;&#x2F;si+&#x3D;4         siä½œä¸ºå¾ªç¯4ç´¢å¼•</span><br><span class="line">   0x0000000000401191 &lt;+157&gt;:cmp    $0x18,%rsi               &#x2F;&#x2F;è‹¥si&#x3D;&#x3D;24 </span><br><span class="line">   0x0000000000401195 &lt;+161&gt;:je     0x4011ab &lt;phase_6+183&gt;   &#x2F;&#x2F;è½¬183         å¾ªç¯4ç»“æŸ</span><br><span class="line">   0x0000000000401197 &lt;+163&gt;:mov    (%rsp,%rsi,1),%ecx       &#x2F;&#x2F;cx &#x3D; (æ ˆ+si)  å¾ªç¯4èµ·å§‹ </span><br><span class="line">   0x000000000040119a &lt;+166&gt;:cmp    $0x1,%ecx                &#x2F;&#x2F;cx ä¸ 1æ¯”è¾ƒ</span><br><span class="line">   0x000000000040119d &lt;+169&gt;:jle    0x401183 &lt;phase_6+143&gt;   &#x2F;&#x2F;è‹¥cx&lt;&#x3D;1 è½¬143 </span><br><span class="line">   0x000000000040119f &lt;+171&gt;:mov    $0x1,%eax                &#x2F;&#x2F;ax &#x3D; 1</span><br><span class="line">   0x00000000004011a4 &lt;+176&gt;:mov    $0x6032d0,%edx           &#x2F;&#x2F;dx &#x3D; 0x6032d0</span><br><span class="line">   0x00000000004011a9 &lt;+181&gt;:jmp    0x401176 &lt;phase_6+130&gt;   &#x2F;&#x2F;è½¬130</span><br><span class="line">   &#x2F;&#x2F;å¾ªç¯4: ä½¿(æ ˆ32+8*(i-1))&#x3D;0x6032d0+b[i]*16 </span><br><span class="line">   &#x2F;&#x2F;ç§°åœ°å€ æ ˆ32+8*(i-1) ä¸ºd0~d5</span><br><span class="line">   &#x2F;&#x2F;ç§°å…¶ä¸­å‚¨å­˜çš„æ•°æ®,å³0x6032d0+b[i]*16,ä¸ºk0~k5</span><br><span class="line">   0x00000000004011ab &lt;+183&gt;:mov    0x20(%rsp),%rbx          &#x2F;&#x2F;bx &#x3D; k[0]</span><br><span class="line">   0x00000000004011b0 &lt;+188&gt;:lea    0x28(%rsp),%rax          &#x2F;&#x2F;ax &#x3D; &amp;k[1] &#x3D; d[0]</span><br><span class="line">   0x00000000004011b5 &lt;+193&gt;:lea    0x50(%rsp),%rsi          &#x2F;&#x2F;si &#x3D; &amp;æ ˆ+0x50 &#x3D; d[6]</span><br><span class="line">   0x00000000004011ba &lt;+198&gt;:mov    %rbx,%rcx                &#x2F;&#x2F;cx &#x3D; bx</span><br><span class="line">   0x00000000004011bd &lt;+201&gt;:mov    (%rax),%rdx              &#x2F;&#x2F;dx &#x3D; (ax)  å¾ªç¯5èµ·å§‹</span><br><span class="line">   0x00000000004011c0 &lt;+204&gt;:mov    %rdx,0x8(%rcx)           &#x2F;&#x2F;cx+8å‚¨å­˜dx ä¾‹å¦‚ k0+8å‚¨å­˜k1 k4+8å‚¨å­˜k5</span><br><span class="line">   0x00000000004011c4 &lt;+208&gt;:add    $0x8,%rax                &#x2F;&#x2F;ax &#x3D; &amp;(ä¸‹ä¸€ä¸ª)</span><br><span class="line">   0x00000000004011c8 &lt;+212&gt;:cmp    %rsi,%rax</span><br><span class="line">   0x00000000004011cb &lt;+215&gt;:je     0x4011d2 &lt;phase_6+222&gt;   &#x2F;&#x2F;å¾ªç¯5ç»“æŸ è½¬222</span><br><span class="line">   0x00000000004011cd &lt;+217&gt;:mov    %rdx,%rcx                &#x2F;&#x2F;rcx &#x3D; k5  </span><br><span class="line">   0x00000000004011d0 &lt;+220&gt;:jmp    0x4011bd &lt;phase_6+201&gt;   &#x2F;&#x2F;è½¬201</span><br><span class="line">   &#x2F;&#x2F;å¾ªç¯5:  k0+8å‚¨å­˜k1 v4+8å‚¨å­˜k5</span><br><span class="line">   &#x2F;&#x2F;è‹¥å°†k[i]ä½œä¸ºåœ°å€,æŒ‡å‘æ•°å­—v[i]</span><br><span class="line">   0x00000000004011d2 &lt;+222&gt;:movq   $0x0,0x8(%rdx)           &#x2F;&#x2F;k5+8å‚¨å­˜0</span><br><span class="line">   0x00000000004011da &lt;+230&gt;:mov    $0x5,%ebp                &#x2F;&#x2F;bp&#x3D;5  ä½œä¸ºç´¢å¼•</span><br><span class="line">   0x00000000004011df &lt;+235&gt;:mov    0x8(%rbx),%rax           &#x2F;&#x2F;ax &#x3D; (k[i]+8) &#x3D; k[i+1]   å¾ªç¯6èµ·å§‹</span><br><span class="line">   0x00000000004011e3 &lt;+239&gt;:mov    (%rax),%eax              &#x2F;&#x2F;ax &#x3D; (k[i+1]) &#x3D; v[i+1]</span><br><span class="line">   0x00000000004011e5 &lt;+241&gt;:cmp    %eax,(%rbx)              &#x2F;&#x2F;æ¯”è¾ƒ(rbx) ä¸ ax , bx&#x3D;k[i], (bx)&#x3D;v[i]</span><br><span class="line">   0x00000000004011e7 &lt;+243&gt;:jge    0x4011ee &lt;phase_6+250&gt;   &#x2F;&#x2F;è‹¥(rbx)&gt;ax è½¬ 250</span><br><span class="line">   0x00000000004011e9 &lt;+245&gt;:callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x00000000004011ee &lt;+250&gt;:mov    0x8(%rbx),%rbx           &#x2F;&#x2F;bx+&#x3D;8</span><br><span class="line">   0x00000000004011f2 &lt;+254&gt;:sub    $0x1,%ebp                &#x2F;&#x2F;bp-1  </span><br><span class="line">   0x00000000004011f5 &lt;+257&gt;:jne    0x4011df &lt;phase_6+235&gt;   &#x2F;&#x2F;å¾ªç¯6</span><br><span class="line">   &#x2F;&#x2F;å¾ªç¯6: ä¿è¯v[i]&gt;v[i+1]</span><br><span class="line">   0x00000000004011f7 &lt;+259&gt;:add    $0x50,%rsp               </span><br><span class="line">   0x00000000004011fb &lt;+263&gt;:pop    %rbx</span><br><span class="line">   0x00000000004011fc &lt;+264&gt;:pop    %rbp</span><br><span class="line">   0x00000000004011fd &lt;+265&gt;:pop    %r12</span><br><span class="line">   0x00000000004011ff &lt;+267&gt;:pop    %r13</span><br><span class="line">   0x0000000000401201 &lt;+269&gt;:pop    %r14</span><br><span class="line">   0x0000000000401203 &lt;+271&gt;:retq</span><br></pre></td></tr></table></figure><p>æ³¨: </p><ul><li>ä»£ç ä¸­ä¸€å…±æ¶‰åŠåˆ°6ä¸ªå¾ªç¯ä½“</li><li>æˆ‘ä»¬ç§°è¾“å…¥çš„åŸæ•°ä¸ºa[i], iâˆˆ[0,5]</li><li>å¾ªç¯1, å¾ªç¯2 ä¸ºä¸€ä¸ªäºŒé‡åµŒå¥—å¾ªç¯, å¾ªç¯1ä¸ºå¤–å¾ªç¯, å¾ªç¯2ä¸ºé‡Œå¾ªç¯</li><li>å¾ªç¯1ä¿è¯è¾“å…¥çš„æ¯ä¸ªæ•°å­—éƒ½å±äº[1,6]</li><li>å¾ªç¯2ä¿è¯è¾“å…¥çš„æ¯ä¸ªæ•°å­—ä¸¤ä¸¤ç›¸å¼‚</li><li>å¾ªç¯3 ä½¿æ¯æ•°1-æ•°6ä¸åŸåœ°å¯¹7å–è¡¥(1-&gt;6,2-&gt;5) ç§°å–è¡¥åçš„æ•°ä¸ºb[i]=7-a[i]</li><li>å¾ªç¯4: <ul><li>å¯¹äºæ¯ä¸ªi, ç§°åœ°å€ $æ ˆ32+8\times(i-1)$ ä¸ºd[0]~d[5] </li><li>å¯¹äºæ¯ä¸ªi, ç§°æ•°æ® $0x6032d0+b[i]\times 16$ ä¸ºk[0]-k[5]</li><li>åœ¨ d[i] ä¸­å‚¨å­˜ k[i]</li><li>k[i] ä¹Ÿå¯ä»¥ä½œä¸ºåœ°å€, å¯¹åº”æ•°æ®æˆä¸ºv[i]</li></ul></li><li>å¾ªç¯5:åœ¨<code>k[i] + 8</code> å¤„å‚¨å­˜ <code>k[i+1],</code> è¿™ä¸€æ­¥æ˜¯ä¸ºäº†åç»­æ“ä½œçš„æ–¹ä¾¿</li><li>å¾ªç¯6: å¿…é¡»ä¿è¯<code>v[i]&gt;v[i+1]</code></li></ul><h4 id="æ³¨è§£p6-1"><a href="#æ³¨è§£p6-1" class="headerlink" title="æ³¨è§£p6_1"></a>æ³¨è§£p6_1</h4><p>0x6032d0é™„è¿‘å‚¨å­˜çš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(gdb) print *(int*) (0x6032d0+16*0)</span><br><span class="line">$83 &#x3D; 332</span><br><span class="line"></span><br><span class="line">(gdb) print *(int*) (0x6032d0+16*1)</span><br><span class="line">$84 &#x3D; 168</span><br><span class="line"></span><br><span class="line">(gdb) print *(int*) (0x6032d0+16*2)</span><br><span class="line">$85 &#x3D; 924</span><br><span class="line"></span><br><span class="line">(gdb) print *(int*) (0x6032d0+16*3)</span><br><span class="line">$86 &#x3D; 691</span><br><span class="line"></span><br><span class="line">(gdb) print *(int*) (0x6032d0+16*4)</span><br><span class="line">$88 &#x3D; 477</span><br><span class="line"></span><br><span class="line">(gdb) print *(int*) (0x6032d0+16*5)</span><br><span class="line">$89 &#x3D; 443</span><br></pre></td></tr></table></figure><h4 id="æ³¨è§£p6-2"><a href="#æ³¨è§£p6-2" class="headerlink" title="æ³¨è§£p6_2"></a>æ³¨è§£p6_2</h4><p>å› æ­¤, è‹¥ä½¿å¾—v[0]~v[5]ä¾æ¬¡ä¸º924,691,477,443,332,168</p><p>åˆ™b[i]-1 åº”ä¾æ¬¡ä¸º: 2,3,4,5,0,1</p><p>åŸå€¼a[i] åº”ä¾æ¬¡ä¸º: 4,3,2,1,6,5</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>ç‚¸å¼¹å®éªŒå®¤ä»6æœˆ25æ—¥å¼€å§‹, è‡³7æœˆ1æ—¥å‡Œæ™¨ä¸¤ç‚¹å®Œæˆ. </p><p>æŒæ¡äº†gdbè°ƒè¯•æ–¹æ³•, å’Œç®€å•æ±‡ç¼–è¯­è¨€çš„é˜…è¯»èƒ½åŠ›, å¯¹å…¶ä¸­çš„æ•°æ®å‚¨å­˜, æ•°æ®åŸºæœ¬è®¡ç®—, å‡½æ•°è°ƒç”¨, åˆ†æ”¯ä¸å¾ªç¯çš„ä½“ç°, æ ˆä¸å†…å­˜çš„åˆ†é…ç­‰å†…å®¹æœ‰äº†åŸºæœ¬äº†è§£. </p><p>åæ¥åœ¨å‚è€ƒå…¶ä»–åšå®¢çš„ç¬”è®°æ—¶å‘ç°è¿˜æœ‰ä¸€ä¸ªéšè—ç‚¸å¼¹. å…ˆæ”¾ç½®å§, æœ‰æ—¶é—´ä¼šæ¥å¡«å‘.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ˜¯æˆ‘åœ¨2020å¹´6æœˆ26æ—¥~7æœˆ1æ—¥å®Œæˆçš„Bomb Labçš„é¢˜è§£ä¸ç¬”è®°&lt;/p&gt;
&lt;p&gt;ç‚¸å¼¹å®éªŒå®¤æ˜¯CS:APP é…å¥—å®éªŒä¸­çš„ç¬¬äºŒä¸ªå®éªŒ, é€šè¿‡å¯¹äºŒè¿›åˆ¶æ–‡ä»¶åæ±‡ç¼–æ¥åˆ†æè·å¾—æ‹†é™¤ç‚¸å¼¹çš„å¯†ç .&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ˜¾å¼åœ°åŒ…å«ç­”æ¡ˆ, å¦‚æœä½ æƒ³è‡ªå·±è§£å†³,ä¸å»ºè®®ä½¿ç”¨æœ¬æ–‡.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/luy-0/CS-APP-LABs/tree/master/Lab-Answer_HB/Lab2-BombLab&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å¯¹åº”Githubä»“åº“ ç‚¹æˆ‘&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="ä¹˜é¾™æœ¯" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B9%98%E9%BE%99%E6%9C%AF/"/>
    
      <category term="CSAPP" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B9%98%E9%BE%99%E6%9C%AF/CSAPP/"/>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="http://yoursite.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="CSAPP" scheme="http://yoursite.com/tags/CSAPP/"/>
    
      <category term="Lab" scheme="http://yoursite.com/tags/Lab/"/>
    
  </entry>
  
  <entry>
    <title>æ—¶ä¸å…‰W_202006-4</title>
    <link href="http://yoursite.com/2020/06/28/%E6%97%B6%E4%B8%8E%E5%85%89W_202006-4/"/>
    <id>http://yoursite.com/2020/06/28/%E6%97%B6%E4%B8%8E%E5%85%89W_202006-4/</id>
    <published>2020-06-28T12:41:22.000Z</published>
    <updated>2020-06-28T14:16:47.560Z</updated>
    
    <content type="html"><![CDATA[<p>2020å¹´6æœˆ22æ—¥ ~ 28æ—¥.</p><p>å¼€å§‹ä¸ªäººå°ç»“è®¡åˆ’</p><p>å­¦ä¹  CSAPP </p><p>è¿½å‰§, ç©æ¸¸æˆ</p><a id="more"></a><h2 id="æ—¶ä¸å…‰-ä¸ªäººå°ç»“è®¡åˆ’"><a href="#æ—¶ä¸å…‰-ä¸ªäººå°ç»“è®¡åˆ’" class="headerlink" title="æ—¶ä¸å…‰:ä¸ªäººå°ç»“è®¡åˆ’"></a>æ—¶ä¸å…‰:ä¸ªäººå°ç»“è®¡åˆ’</h2><p>å¬è¯´æ¯å¤©åšæŒå†™æŠ€æœ¯åšå®¢æœ‰åˆ©äºçŸ¥è¯†å·©å›ºä¸æŠ€èƒ½åŠ æ·±, è‡ªè§‰æ²¡æœ‰æ¯å¤©åšæŒçš„èƒ½åŠ›, æƒ³äº†ä¸ªæŠ˜ä¸­çš„åŠæ³•: ä»¥ä¸€å‘¨ä¸ºé˜¶æ®µå®šæœŸæ€»ç»“. å½“ç„¶, æ¯æœˆæœˆåº•, æ¯åŠå¹´, æ¯å¹´ä¹Ÿè¦æ•´ç†è®°å½•! </p><p>ä¸»è¦å†…å®¹å¸Œæœ›è‡ªå·±èƒ½å¤Ÿä»¥æŠ€æœ¯å­¦ä¹ , ç”Ÿæ´»è®°å½•ä¸ºä¸». åæ­£ä¹Ÿä¸ä¼šæœ‰åˆ«äººçœ‹, å°±å†™çš„ç®€ç•¥ä¸”éšæ€§ä¸€äº›. </p><p><strong>ä»¥ä¸‹æ˜¯æ¯æ¬¡å°ç»“çš„è§„èŒƒ:</strong></p><ol><li>å°ç»“åˆ†ä¸º: å‘¨è®°, æœˆè®°, åŠå¹´æ€»ç»“, å¹´åº¦æ€»ç»“ å››ç§, åç¼€åˆ†åˆ«ä»¥<code>w,m,h,y</code>æ ‡è¯†.</li><li>å‘½åæ ¼å¼ä¾‹: <ol><li>å‘¨è®°: <code>æ—¶ä¸å…‰W_202006-4</code> æœ«ä½æ•°å­—ä»£è¡¨æœ¬æœˆç¬¬å‡ å‘¨(å‘¨æ—¥ä¸ºå‡†)</li><li>æœˆè®°: <code>æ—¶ä¸å…‰M_202006</code></li><li>åŠå¹´è®°: <code>æ—¶ä¸å…‰H_2020ä¸ŠåŠå¹´</code></li><li>å¹´åº¦è®°: <code>æ—¶ä¸å…‰Y_2020å¹´åº¦æ€»ç»“</code></li></ol></li><li>å†…å®¹åŒ…æ‹¬: <ol><li>æŠ€æœ¯å­¦ä¹ æˆæœä¸äº§å‡ºæ€»ç»“</li><li>è®°å½•ç”Ÿæ´», å¦‚æ—…æ¸¸ è¯»ä¹¦ è§‚å½± æ¸¸æˆ</li><li>çªå¦‚å…¶æ¥çš„æƒ³æ³•</li><li>ä¸‹ä¸€é˜¶æ®µçš„å±•æœ›</li></ol></li></ol><h2 id="å­¦ä¹ CSAPP"><a href="#å­¦ä¹ CSAPP" class="headerlink" title="å­¦ä¹ CSAPP"></a>å­¦ä¹ CSAPP</h2><p>é¡¹ç›®åœ°å€:</p><p><a href="https://github.com/luy-0/CS-APP-LABs" target="_blank" rel="noopener">https://github.com/luy-0/CS-APP-LABs</a></p><p>å¯¹CSAPPè¿™æœ¬ä¹¦å‚æ¶å·²ä¹…, è¶ç€ç–«æƒ…çš„æœŸæœ«å¤§æŠŠç©ºé—²æ—¶é—´å’Œä¸¤ä½åŒå­¦ç»„é˜Ÿå­¦ä¹ CSAPPä»¥åŠCMUçš„15-213è¯¾ç¨‹. æ›´å¤šå­¦ä¹ æƒ…å†µå‚çœ‹READMEéƒ¨åˆ†.</p><p>æœ¬å‘¨ç€é‡äºå®Œæˆæœºå™¨çº§åˆ«ç¼–ç¨‹éƒ¨åˆ†, ä»¥åŠè¯¾ç¨‹é…å¥—å®éªŒä¸­çš„Bomb Lab, è¿™æ˜¯ä¸€ä¸ªé€šè¿‡ gdb æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶çš„æ±‡ç¼–ä»£ç , å¹¶ä¸”æ¨å¯¼å‡ºç‚¸å¼¹æ‹†é™¤çš„å¯†é’¥. åœ¨è¿™å‡ å¤©ä¹ å¾—äº†åŸºæœ¬çš„æ±‡ç¼–ä»£ç é˜…è¯»èƒ½åŠ›, gdb çš„åŸºæœ¬è¿ç”¨èƒ½åŠ›, å¯¹Cè®¡ç®—æœºåº•å±‚è¿ç®—çš„å®ç°æœ‰äº†æ›´æ·±çš„ç†è§£. </p><p>è¿™ä¸ªLabçœŸæ˜¯è®©äººåˆçˆ±åˆæ¨, æ¯æ‹†é™¤ä¸€ä¸ªç‚¸å¼¹çš„æ—¶å€™æˆå°±æ„Ÿæ»¡æ»¡, ä½†æ˜¯å¯¹ç€æ±‡ç¼–ä»£ç æ­»æ´»çªä¸å‡ºé€»è¾‘çš„æš´èºå’Œæ— å¥ˆâ€¦</p><p>æœºå™¨çº§åˆ«ç¼–ç¨‹ æ˜¯æŒ‡ ä½¿ç”¨æ±‡ç¼–ä»£ç å®Œæˆå‡½æ•°æ“ä½œ. ä¸»è¦å­¦ä¹ å†…å®¹åŒ…æ‹¬ æ§åˆ¶æœºå™¨æ‰§è¡Œ, æ‰§è¡Œè¿‡ç¨‹ æ•°æ®çš„å­˜å‚¨(æ•°ç»„ ç»“æ„ è”åˆ) ä»¥åŠå…¶ä»–è¿›é˜¶éƒ¨åˆ†. å…¶ä¸­å…³äºç¼“å­˜åŒºæº¢å‡º, æ ˆæ”»å‡», æµ®ç‚¹ä»£ç ç­‰éƒ¨åˆ†æŒæ¡çš„ä¸å¥½.</p><h2 id="è¿½å‰§"><a href="#è¿½å‰§" class="headerlink" title="è¿½å‰§"></a>è¿½å‰§</h2><p>è¿™ä¸€å‘¨åœ¨è¿½ã€Šéšè”½çš„è§’è½ã€‹ . æ”¹ç¼–è‡ªç´«é‡‘é™ˆçš„æ¨ç†å°è¯´ã€Šåå°å­©ã€‹ï¼Œè®²è¿°äº†åœ¨æ²¿æµ·å°åŸä¸‰ä¸ªå­©å­(æœ±æœé˜³, å²³æ™®, ä¸¥è‰¯) åœ¨æ™¯åŒºæ¸¸ç©æ—¶æ— æ„é—´æ‹æ‘„è®°å½•äº†ä¸€æ¬¡è°‹æ€(å¼ ä¸œå‡, ç§¦æ˜Šé¥°)ï¼Œæƒ³å€Ÿæœºæ•²è¯ˆæ¥ç­¹é’±ï¼Œä»¥åŠéšåå‘ç”Ÿçš„ä¸€è¿ä¸²çš„æ•…äº‹ã€‚å¤§ç»“å±€æ’­å®Œè±†ç“£è¯„åˆ†ä¾æ—§ä¸º9.0</p><p>ä¸»è¦æ˜¯å‘¨å›´åŒå­¦éƒ½åœ¨è¿½å“ˆå“ˆå“ˆ, æ„Ÿå¹å›½äº§ç½‘å‰§çœŸçš„å¾ˆæˆç†Ÿäº†, å‰å‡ é›†å¯¼æ¼”å¯¹äºèŠ‚å¥æŠŠæ¡çš„å¾ˆå¥½, ä¸­é—´å™äº‹ç¨æœ‰å¹³æ·¡, æœ€åä¸€éƒ¨åˆ†è¿˜æ²¡çœ‹ğŸ˜‚  é…ä¹æŒºç”¨å¿ƒ, è™½ç„¶æˆ‘å¬ä¸æ‡‚åç°ä»£, ä½†æ˜¯è¿˜æ˜¯æœ‰è¢«æƒ…ç»ªæ„ŸæŸ“åˆ°. åœ¨å±•ç°ä¸Šåˆ¶ç‰‡ç»„çš„ç»†è‡´ç¨‹åº¦ä»¤äººæ„ŸåŠ¨, ä¾‹å¦‚å¼ ä¸œå‡æµ·å¤œè¿½æœé˜³æ—¶å¯¹ç€è„šæ­¥å°, ä¾‹å¦‚è¯•å·å’Œæ¿ä¹¦ä¸Šçš„é¢˜ç›®çœŸçš„æ˜¯åˆä¸­çŸ¥è¯†ç‚¹ , ç«Ÿç„¶æœ‰ä¸€ç‚¹ç‚¹å¯¹ç€ç¾å‰§æ‰£ç»†èŠ‚çš„æ„Ÿè§‰äº†. æ¼”å‘˜ä¹Ÿå®åŠ›è¯ é‡Š, ç§¦æ˜Šçš„æ¼”æŠ€ä»¤äººèƒŒåå‘å‡‰, å°æœ‹å‹çš„æ¼”æŠ€ä¹Ÿå¾ˆç¨³å•Š~ æœé˜³é‚£ç§è¯´çš„å°‘æƒ³å¾—å¤šçš„å†…å‘å¥½å­¦ç”Ÿéå¸¸çœŸå®, æ™®æ™®çš„å¯çˆ±æ˜¯çœŸçš„æˆé‡Œæˆå¤–çš„å¯çˆ± ,å°±æ˜¯å¤ªæœºçµæ‡‚äº‹äº†, ç‰›é€¼çš„è®©äººå¿ƒç–¼(è¯è¯´æˆ‘æ€ä¹ˆæ€»è§‰å¾—å¥¹æœ€åè¦é»‘åŒ–ä¸€ç±»çš„?) ä¸¥è‰¯å…¶å®æ²¡æœ‰å¾ˆå¥½åœ°æ¼”å‡ºæƒ³è±¡é‡Œçš„å°ç—å­æ°”, ç¼ºç‚¹é‚£ç§åå‘³.ä¸€éƒ¨å¾ˆä¼˜ç§€çš„å›½äº§å‰§, æ‹¯æ•‘äº†æˆ‘è¢«è¨€æƒ…è€½æ”¹å‰§æ‘§æ¯çš„ä¿¡å¿ƒ~ (æ²¡é”™æˆ‘å°±æ˜¯æŒ‡sssså’Œcql)</p><p>å¸Œæœ›ç»“å±€èƒ½å¤Ÿä¾æ—§ç²¾å½©å§! </p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/XGYW%25K%7DKW%40MFX%7BQNNHBI95W.jpg" alt=""></p><h2 id="ç©æ¸¸æˆ"><a href="#ç©æ¸¸æˆ" class="headerlink" title="ç©æ¸¸æˆ"></a>ç©æ¸¸æˆ</h2><p>å—¯â€¦æœ€è¿‘åˆå…¥äº†å¹³å®‰äº¬çš„å‘, MOBAçœŸé¦™:dog: ä¸è¿‡æ‰“äº†ä¸€å‘¨ä¸Šäº†å°‘å±å°±æ²¡å•¥åŠ¨åŠ›äº†â€¦ å¿«ä¹å’¸é±¼ä½›ç³»æ¸¸æˆ, ç«æŠ€æ¸¸æˆå˜› å¿ƒæ€æ”¾å¥½å°±è¡Œäº†~</p><h2 id="ä¸‹å‘¨ç›®æ ‡"><a href="#ä¸‹å‘¨ç›®æ ‡" class="headerlink" title="ä¸‹å‘¨ç›®æ ‡"></a>ä¸‹å‘¨ç›®æ ‡</h2><p>ç»§ç»­CSAPP </p><p>å¼€å§‹åˆ·LC</p><p>æ§åˆ¶æ¯æ—¥æ¸¸æˆæ—¶é•¿</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;2020å¹´6æœˆ22æ—¥ ~ 28æ—¥.&lt;/p&gt;
&lt;p&gt;å¼€å§‹ä¸ªäººå°ç»“è®¡åˆ’&lt;/p&gt;
&lt;p&gt;å­¦ä¹  CSAPP &lt;/p&gt;
&lt;p&gt;è¿½å‰§, ç©æ¸¸æˆ&lt;/p&gt;
    
    </summary>
    
    
      <category term="æ—¶ä¸å…‰" scheme="http://yoursite.com/categories/%E6%97%B6%E4%B8%8E%E5%85%89/"/>
    
    
      <category term="å°ç»“" scheme="http://yoursite.com/tags/%E5%B0%8F%E7%BB%93/"/>
    
      <category term="å‘¨è®°" scheme="http://yoursite.com/tags/%E5%91%A8%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>æ“ä½œç³»ç»Ÿä¹‹å†…å­˜ç®¡ç†</title>
    <link href="http://yoursite.com/2020/06/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"/>
    <id>http://yoursite.com/2020/06/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</id>
    <published>2020-06-09T01:14:11.000Z</published>
    <updated>2020-06-09T06:48:04.382Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç« å°†ä¼šæ¶‰åŠåˆ°</p><ol><li>åŸºæœ¬å†…å­˜ç®¡ç†</li><li>Segmentation    åˆ†æ®µ </li><li>Swap    äº¤æ¢</li><li>â­Virtual   è™šæ‹Ÿå†…å­˜</li><li>å…¶ä»–éœ€è¦è€ƒè™‘çš„é—®é¢˜</li></ol><a id="more"></a><h2 id="åŸºæœ¬å†…å­˜ç®¡ç†"><a href="#åŸºæœ¬å†…å­˜ç®¡ç†" class="headerlink" title="åŸºæœ¬å†…å­˜ç®¡ç†"></a>åŸºæœ¬å†…å­˜ç®¡ç†</h2><p>æœ¬èŠ‚ä¼šæ¶‰åŠåˆ°:</p><ol><li>å‚¨å­˜å±‚æ¬¡</li><li>CPUåˆ©ç”¨ç‡</li><li>é‡å®šä½<ol><li>Base &amp; Limit</li><li>ä»€ä¹ˆæ—¶å€™é‡å®šä½</li></ol></li></ol><h3 id="å‚¨å­˜å±‚æ¬¡"><a href="#å‚¨å­˜å±‚æ¬¡" class="headerlink" title="å‚¨å­˜å±‚æ¬¡"></a>å‚¨å­˜å±‚æ¬¡</h3><p>å‚çœ‹è®¡ç»„éƒ¨åˆ†, ä¸æ˜¯é‡ç‚¹, ç•¥</p><h3 id="CPUåˆ©ç”¨ç‡"><a href="#CPUåˆ©ç”¨ç‡" class="headerlink" title="CPUåˆ©ç”¨ç‡"></a>CPUåˆ©ç”¨ç‡</h3><p>å¦‚æœè€ƒè™‘åˆ°å†…å­˜çš„å­˜åœ¨, CPUçš„åˆ©ç”¨ç‡è¿˜å°†ä¼šè¿›ä¸€æ­¥é™ä½.  å¦‚æœCPUä¸­åŒæ—¶å­˜åœ¨ $n$ ä¸ªè¿è¡Œä¸­çš„ç¨‹åº (ç§°ä¸ºå¤šé“ç¨‹åºçš„åº¦ degree) ,åˆ™ CPUåˆ©ç”¨ç‡ä¸º</p><script type="math/tex; mode=display">1-P^n</script><p>å…¶ä¸­ $P$ æ˜¯IOç­‰å¾…æ—¶é—´çš„å æ¯”</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609124321.jpg" alt="1591668423275"></p><blockquote><ul><li>These  sizes allow 4 programs to be in memory at once. With an 80% average I/O wait, we have a CPU utilization of 1-0.8^4â‰ˆ60%. </li><li>Adding another 16MB of memory allow 8 programs, thus raising the CPU utilization to 83%. </li><li>Adding yet another 16MB of memory allow 12 programs, only increase CPU utilization to 93%. </li><li>â€¦97% </li></ul></blockquote><p>ä¸‹å›¾å±•ç¤ºäº†å®é™…CPUä¸­çš„èµ„æºåˆ†é…</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609124332.jpg" alt="1591668467874"></p><ul><li>0-10ç§’å†… ä»…Job1 åœ¨å·¥ä½œ. CPUåˆ©ç”¨ç‡ä¸º $1-0.8^1=0.2$ ç›¸å½“äºæ‰§è¡Œäº† $10\times0.2=2 min$</li><li>10-15ç§’å†… Job1/2 åœ¨å·¥ä½œ. CPUåˆ©ç”¨ç‡ä¸º $1-0.8^2=0.36$ å¹³å‡æ¯ä¸ªä»»åŠ¡ç›¸å½“äºæ‰§è¡Œäº† $5\times\frac{1}{2}\times0.36=0.9 min$</li><li>15-20 ç§’å†… Job1/2/3 åœ¨å·¥ä½œ. CPUåˆ©ç”¨ç‡ä¸º $1-0.8^3=0.49$ å¹³å‡æ¯ä¸ªä»»åŠ¡ç›¸å½“äºæ‰§è¡Œäº† $5\times\frac{1}{3}\times0.49=0.8 min$</li><li>â€¦â€¦</li></ul><h3 id="é‡å®šä½"><a href="#é‡å®šä½" class="headerlink" title="é‡å®šä½"></a>é‡å®šä½</h3><p>ç¨‹åºæœ¬èº«åŒ…å«çš„æ•°æ®æ˜¯ä»é›¶å¼€å§‹<del>çš„å¼‚ä¸–ç•Œç”Ÿæ´»</del> è€Œåœ¨å®é™…è¿è¡Œä¸­, å‡ ä¹ä¸å¯èƒ½ç‰©ç†åœ°å€æ°å¥½ä»é›¶å¼€å§‹, å› æ­¤éœ€è¦å°†ç¨‹åºä¸­çš„é€»è¾‘åœ°å€(ä¹Ÿå«ç›¸å¯¹åœ°å€) è½¬æ¢æˆç‰©ç†åœ°å€. è¿™åœ¨CPUä¸­æ˜¯ç”± MMU (å†…å­˜æ§åˆ¶å•å…ƒ) å®Œæˆçš„.</p><h4 id="åŸºå€ä¸é™å€-Base-amp-Limit"><a href="#åŸºå€ä¸é™å€-Base-amp-Limit" class="headerlink" title="åŸºå€ä¸é™å€   Base &amp; Limit"></a>åŸºå€ä¸é™å€   Base &amp; Limit</h4><p>Base &amp; Limit éƒ½æ˜¯ä½œä¸ºå¯„å­˜å™¨å‚¨å­˜åœ¨PCBä¸­, æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ª. </p><p>Base æ˜¯é€»è¾‘åœ°å€0 åœ¨ç‰©ç†åœ°å€ç©ºé—´ä¸­çš„åœ°å€(çš„æŒ‡é’ˆ) , ä¹Ÿå°±æ˜¯è¯¥è¿›ç¨‹åœ¨å†…å­˜ç©ºé—´ä¸­å¼€å§‹çš„åœ°æ–¹. </p><p>Limit æ˜¯è¿›ç¨‹æ‰€æ‹¥æœ‰çš„æœ€å¤§åœ°å€<strong>æ•°ç›®</strong>, Base + Limit æ˜¯ è¿›ç¨‹çš„æœ€å¤§åœ°å€</p><blockquote><p>â€‹    eg Base = 10000   Limit = 4000  â¡ æœ€å¤§åœ°å€ä¸º 14000</p></blockquote><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609124344.jpg" alt="é‡å®šä½å›¾"></p><p>å¦‚å›¾, é€»è¾‘åœ°å€å…ˆä¸limitæ¯”è¾ƒ, æ— è¯¯åå†åŠ ä¸Šbaseæˆä¸ºç‰©ç†åœ°å€</p><h4 id="MMU"><a href="#MMU" class="headerlink" title="MMU"></a>MMU</h4><p>Memory Management Unit , å†…å­˜ç®¡ç†ç©ºé—´, ä½œç”¨æ˜¯å°†è™šæ‹Ÿå†…å­˜è½¬åŒ–ä¸ºå®é™…çš„ç‰©ç†åœ°å€, å†å°†å…¶é€å¾€æ•°æ®Busä¸Š.</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609124432.jpg" alt="mmu"></p><h4 id="ä»€ä¹ˆæ—¶å€™å‘ç”Ÿé‡å®šä½"><a href="#ä»€ä¹ˆæ—¶å€™å‘ç”Ÿé‡å®šä½" class="headerlink" title="ä»€ä¹ˆæ—¶å€™å‘ç”Ÿé‡å®šä½?"></a>ä»€ä¹ˆæ—¶å€™å‘ç”Ÿé‡å®šä½?</h4><p>ä¸€èˆ¬æ¥è¯´æœ‰ä¸‰ç§:</p><ol><li>ç¼–è¯‘æ—¶, è¿™ç§å°±è¦æ±‚ç¼–è¯‘ä¹‹åçš„ç¨‹åºä»£ç çš„åœ°å€å¿…é¡»æ˜¯å®é™…è¿è¡Œä¸­çš„åœ°å€, å¸¸ç”¨äºç›´æ¥çƒ§å½•çš„åµŒå…¥å¼ç­‰.</li><li>è½½å…¥æ—¶, è¦æ±‚è½½å…¥åç¨‹åºåœ¨å†…å­˜ä¸­çš„ä½ç½®å¿…å®šä¸å˜, æ— æ³•è¿›è¡Œçµæ´»åœ°ç®¡ç†ä¸åˆ‡æ¢</li><li>è¿è¡Œæ—¶, æ”¯æŒäº¤æ¢ åˆ†é¡µç­‰æ“ä½œ</li></ol><hr><h2 id="Segmentation-åˆ†æ®µ"><a href="#Segmentation-åˆ†æ®µ" class="headerlink" title="Segmentation åˆ†æ®µ"></a>Segmentation åˆ†æ®µ</h2><p>åœ¨ä¸Šè¿°è®¨è®ºä¸­, æˆ‘ä»¬æ˜¯æŠŠç¨‹åºçš„æ‰€æœ‰ä¸œè¥¿æ•´ä½“æ”¾å…¥å†…å­˜ä¸­. è€Œäº‹å®ä¸Š, ç¨‹åºçš„æ•°æ®åŒ…æ‹¬ä»£ç æ®µ(Code), æ•°æ®æ®µ(Data), å †æ ˆæ®µ(Stack),â€¦.</p><p>å¯èƒ½å‡ºç°çš„é—®é¢˜: ä¿®æ”¹Dataæ•°æ®æ—¶è¯¯æ”¹äº†Codeæ®µ; æ‰¹å¤„ç†æ—¶å¯ä»¥å¤ç”¨ä»£ç æ®µç­‰.</p><p>æ‰€ä»¥é‡‡ç”¨åˆ†æ®µ.æ¯ä¸€æ®µçš„é€»è¾‘åœ°å€éƒ½ä»0 å¼€å§‹, æ¯ä¸€æ®µéƒ½æ‹¥æœ‰è‡ªå·±çš„Base ä¸ Limit , è¿™äº›æ˜ å°„å…³ç³»å‚¨å­˜åœ¨æ®µè¡¨ä¸­.</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609082725.jpg" alt="åˆ†æ®µ"></p><h3 id="GDT-amp-LDT"><a href="#GDT-amp-LDT" class="headerlink" title="GDT &amp; LDT"></a>GDT &amp; LDT</h3><p>æ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰è‡ªå·±çš„LDT (Local Descriptor Table) ç”¨äºå‚¨å­˜è¿›ç¨‹ä¸­æ¯ä¸ªæ®µçš„Baseç­‰æ•°æ®.</p><p>OS æ‹¥æœ‰ä¸€ä¸ªGDT (Global  Descriptor Table) </p><p>å­˜ç–‘ GDTæ—¶ç”¨æ¥å¹²ä»€ä¹ˆçš„?</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609125624.jpg" alt=""></p><h3 id="æ®µçš„å¤§å°"><a href="#æ®µçš„å¤§å°" class="headerlink" title="æ®µçš„å¤§å°"></a>æ®µçš„å¤§å°</h3><p>ä¸€èˆ¬ Inter 16Kæ®µ, æ¯æ®µæ‹¥æœ‰1 billion 32-bit words</p><h3 id="åˆ†æ®µä¸æ¢é¡µçš„æ¯”è¾ƒ"><a href="#åˆ†æ®µä¸æ¢é¡µçš„æ¯”è¾ƒ" class="headerlink" title="åˆ†æ®µä¸æ¢é¡µçš„æ¯”è¾ƒ"></a>åˆ†æ®µä¸æ¢é¡µçš„æ¯”è¾ƒ</h3><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609125600.jpg" alt="æ¯”è¾ƒ"></p><hr><h2 id="Swap-äº¤æ¢"><a href="#Swap-äº¤æ¢" class="headerlink" title="Swap äº¤æ¢"></a>Swap äº¤æ¢</h2><p>æœ¬å°èŠ‚æ¶‰åŠåˆ°:</p><ol><li>äº¤æ¢çš„æ¦‚å¿µ</li><li>ç¢ç‰‡/ç©ºæ´</li><li>â­å†…å­˜ç®¡ç†æœºåˆ¶<ol><li>ä½å›¾    bit map    </li><li>é“¾è¡¨    list</li></ol></li><li>â­å†…å­˜çš„åˆ†é…æœºåˆ¶</li></ol><p>å…ˆå‰è¯´åˆ°å†…å­˜ç©ºé—´çš„å¤§å°è¿œè¿œä¸å¤Ÿæ”¯æ’‘æ‰€æœ‰è¿›ç¨‹åŒæ—¶ä½¿ç”¨. å› æ­¤Swap å‡ºç°äº†, åŸºæœ¬æ€æƒ³æ˜¯è°ç”¨, å†…å­˜èµ„æºç»™è°. å½“å¦å¤–ä¸€ä¸ªè¿›ç¨‹éœ€è¦CPUèµ„æºæ—¶, å°†åŸå…ˆçš„è¿›ç¨‹æ’¤å‡º, æ¢å…¥ç›®æ ‡è¿›ç¨‹.</p><p>å†…å­˜åˆ†åŒºçš„å¯ä»¥åˆ†æˆå›ºå®šå¤§å°, ç¼ºç‚¹æ˜¯ä¼šé€ æˆç©ºé—´çš„æµªè´¹, å¹¶ä¸”æ— æ³•è¿è¡Œå¤§äºåˆ†åŒºå¤§å°çš„ç¨‹åº. </p><p>åˆ†åŒºå¤§å°ä¹Ÿå¯ä»¥æ˜¯å¯å˜çš„, ä½†æ˜¯éšç€æ—¶é—´ä¼šæœ‰ç¢ç‰‡(ç©ºæ´, Holes) çš„äº§ç”Ÿ</p><h3 id="Holes-ç©ºæ´"><a href="#Holes-ç©ºæ´" class="headerlink" title="Holes ç©ºæ´"></a>Holes ç©ºæ´</h3><p>ç©ºæ´çš„äº§ç”Ÿ</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609124358.jpg" alt=""></p><p>ç©ºæ´è¿˜æ˜¯éš¾ä»¥æ¸…é™¤çš„. å†…å­˜æ˜¯å¤„åœ¨é«˜é€Ÿå˜åŒ–ä¸­çš„, è¯•å›¾å°†ç¢ç‰‡åˆå¹¶ä¸ºæ›´å¤§çš„å†…å­˜ç©ºé—´ç‰‡å¼å¿…é¡»è¦å°†ç›®å‰çš„è¿›ç¨‹åœæ». å¯¹å¤–è¡¨ç°ä¸ºé•¿è¾¾æ•°åç§’ç”šè‡³åˆ†é’Ÿçš„æœºå™¨å‡æ­», æ˜¯ä¸å¯è¢«å¿å—çš„.</p><h3 id="å†…å­˜çš„ç®¡ç†æœºåˆ¶"><a href="#å†…å­˜çš„ç®¡ç†æœºåˆ¶" class="headerlink" title="å†…å­˜çš„ç®¡ç†æœºåˆ¶"></a>å†…å­˜çš„ç®¡ç†æœºåˆ¶</h3><p>å°†å†…å­˜åˆ’åˆ†ä¸ºæ›´åŠ ç²¾ç»†çš„ç­‰å¤§ç‰‡æ®µ, å¹¶è®°å½•å…¶æ˜¯å¦å¤„äºä½¿ç”¨ä¸­, å¦‚ä¸‹å›¾</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609124410.jpg" alt="å†…å­˜ç®¡ç†"></p><h4 id="ä½å›¾"><a href="#ä½å›¾" class="headerlink" title="ä½å›¾"></a>ä½å›¾</h4><p>å¦‚å›¾B, 1è¡¨ç¤ºä½¿ç”¨ä¸­, 0è¡¨ç¤ºæœªä½¿ç”¨.</p><p>pro: ä¾¿äºç®¡ç†, ä¿®æ”¹åªéœ€è¦å–éæ“ä½œå³å¯</p><p>con: éš¾äºæŸ¥æ‰¾, æ¯æ¬¡å¿…é¡»æŸ¥æ‰¾nä½è¿ç»­çš„0; å®é™…ä½å›¾å¾ˆå¤§</p><h4 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h4><p>å¦‚å›¾C, Pè¡¨ç¤ºprocess, Hè¡¨ç¤ºholes, ç¬¬äºŒä½è¡¨ç¤ºå¼€å§‹ä½, ç¬¬ä¸‰ä½è¡¨ç¤ºé•¿åº¦.</p><p>pro: ä¾¿äºæŸ¥æ‰¾, åªéœ€è¦æ¯”è¾ƒé•¿åº¦, èŠ‚çº¦ç®¡ç†æˆæœ¬.</p><p>con: éš¾äºç®¡ç†, å½’è¿˜å†…å­˜æ—¶è¦åˆå¹¶ç©ºæ´, åˆå¹¶å†…å­˜æ—¶è¦åˆ†è£‚ç©ºæ´</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609124419.jpg" alt="åˆå¹¶ç©ºæ´"></p><h3 id="å†…å­˜çš„åˆ†é…æœºåˆ¶"><a href="#å†…å­˜çš„åˆ†é…æœºåˆ¶" class="headerlink" title="å†…å­˜çš„åˆ†é…æœºåˆ¶"></a>å†…å­˜çš„åˆ†é…æœºåˆ¶</h3><h4 id="First-fit"><a href="#First-fit" class="headerlink" title="First fit"></a>First fit</h4><p>ä»0å¼€å§‹æ‰¾åˆ°ç¬¬ä¸€ä¸ªåˆé€‚çš„</p><h4 id="Next-fit"><a href="#Next-fit" class="headerlink" title="Next fit"></a>Next fit</h4><p>ä»ä¸Šä¸€æ¬¡æŸ¥æ‰¾ç»“æŸçš„åœ°æ–¹å¼€å§‹æ‰¾åˆ°ç¬¬ä¸€ä¸ªåˆé€‚çš„</p><h4 id="Best-fit"><a href="#Best-fit" class="headerlink" title="Best fit"></a>Best fit</h4><p>åœ¨æ‰€æœ‰ç©ºæ´ä¸­æ‰¾<strong>æœ€ç•¥å¤§äº</strong>æ‰€éœ€å†…å­˜çš„ç©ºæ´</p><h4 id="Worst-fit"><a href="#Worst-fit" class="headerlink" title="Worst fit"></a>Worst fit</h4><p>åœ¨æ‰€æœ‰ç©ºæ´ä¸­æ‰¾<strong>æœ€å¤§äº</strong>æ‰€éœ€å†…å­˜çš„ç©ºæ´</p><h4 id="Quick-fit"><a href="#Quick-fit" class="headerlink" title="Quick fit"></a>Quick fit</h4><p>éšæœºæŸ¥æ‰¾ç©ºæ´, åªè¦å¤Ÿç”¨å°±å®‰æ’</p><ul><li><p>Fist , Next , Quick æ–¹å¼ , åªè¦æ‰¾åˆ°èƒ½ç”¨çš„å³å¯, ä¸è€ƒè™‘ç©ºæ´ä½“é‡æ˜¯å¦ä¸æ‰€éœ€è¦çš„ç¬¦åˆ.</p></li><li><p>Best é—®é¢˜:</p><ul><li>ç¢ç‰‡äº§ç”Ÿçš„å¤ªå¤šä¸”å°</li><li>æŸ¥æ‰¾è¿‡ç¨‹å¤ªæ…¢</li></ul></li><li><p>Worst é—®é¢˜</p><ul><li>è¿…é€Ÿæ¶ˆè€—å¤§ç©ºæ´</li><li>æŸ¥æ‰¾è¿‡ç¨‹å¤ªæ…¢</li></ul></li><li><p>å®é™…æ€§èƒ½æœ€å¥½çš„æ˜¯ Quick fit</p><p><del>è¿™å°±æ˜¯æ— æ‹›èƒœæœ‰æ‹›å— ğŸ‘´å°±æ˜¯é£æ¸…æ‰¬, iäº†iäº†</del></p></li></ul><h2 id="Virtual-Memory-è™šæ‹Ÿå†…å­˜"><a href="#Virtual-Memory-è™šæ‹Ÿå†…å­˜" class="headerlink" title="Virtual Memory è™šæ‹Ÿå†…å­˜"></a>Virtual Memory è™šæ‹Ÿå†…å­˜</h2><p>æœ¬èŠ‚åŒ…æ‹¬:</p><ol><li>åˆ†é¡µ</li><li>å¤šçº§é¡µè¡¨<ol><li>é¡µè¡¨æ¯é¡¹å¯¹åº”å¤§å°</li><li>é¡µè¡¨åŒ…æ‹¬çš„å†…å®¹</li></ol></li><li>TLB å¿«è¡¨</li><li><del>åè½¬é¡µè¡¨</del></li></ol><h3 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h3><p>å…ˆå‰éƒ½æ˜¯æŒ‰ç…§æœ€å¤§éœ€è¦çš„å†…å­˜æ¥åˆ’åˆ†ç©ºé—´çš„. å®é™…ä¸Šå¾ˆå¤šæ—¶å€™æ˜¯ç”¨ä¸åˆ°è¿™äº›ç©ºé—´çš„. å› æ­¤æˆ‘ä»¬åœ¨æŠŠæ¯ä¸ªè¿›ç¨‹(æˆ–è€…æ®µ)æ‹†åˆ†, å½“å‰ä½¿ç”¨ä¸­çš„éƒ¨åˆ†åœ¨å†…å­˜ä¸­, å…¶ä»–éƒ¨åˆ†æ”¾åœ¨ç£ç›˜ä¸­. </p><p>å°†è¿›ç¨‹(æˆ–æ®µ) çš„è™šæ‹Ÿç©ºé—´åœ°å€åˆ†æˆä¸€å®šå¤§å°çš„<strong>é¡µ(Page)</strong> , ç§°ä¸ºåˆ†é¡µ.</p><p>å°†è¿›ç¨‹(æˆ–æ®µ) çš„ç‰©ç†ç©ºé—´åœ°å€åˆ†æˆä¸€å®šå¤§å°çš„<strong>é¡µå¸§(Frame)</strong> </p><p>å½“è¿›ç¨‹å‘ç°æ‰€éœ€è¦çš„æ•°æ®æ‰€åœ¨çš„é¡µä¸åœ¨å†…å­˜, è€Œåœ¨ç£ç›˜ä¸­æ—¶, ä¼šå‘ç”Ÿ<strong>é¡µé¢å¤±æ•ˆ(Page Fault)</strong> , å¹¶é€šè¿‡é¡µé¢è°ƒåº¦å°†å†…å­˜ä¸­æŸä¸€é¡µè°ƒå‡º, è°ƒå…¥ç›®æ ‡é¡µ. </p><h4 id="åˆ†é¡µè¿‡ç¨‹"><a href="#åˆ†é¡µè¿‡ç¨‹" class="headerlink" title="åˆ†é¡µè¿‡ç¨‹"></a>åˆ†é¡µè¿‡ç¨‹</h4><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609125322.jpg" alt="åˆ†é¡µ"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ†é¡µç®—æ³•  ä¼ªä»£ç </span></span><br><span class="line">address ad_lo <span class="comment">//é€»è¾‘åœ°å€,å·²çŸ¥</span></span><br><span class="line">address ad_phy<span class="comment">//ç‰©ç†åœ°å€,å¾…æ±‚</span></span><br><span class="line">address* Base<span class="comment">//å·²çŸ¥</span></span><br><span class="line">size Limit<span class="comment">//å·²çŸ¥</span></span><br><span class="line">size page_size<span class="comment">//æ¯ä¸€é¡µçš„å¤§å°, ä¸€èˆ¬ä¸é¡µå¸§å¤§å°ç›¸åŒ,å·²çŸ¥</span></span><br><span class="line">pageTable table[]<span class="comment">//é¡µè¡¨,å·²çŸ¥</span></span><br><span class="line"><span class="keyword">int</span> pageNo<span class="comment">//é¡µå·,æœªçŸ¥</span></span><br><span class="line"><span class="keyword">int</span> frameNo<span class="comment">//é¡µå¸§å·,æœªçŸ¥</span></span><br><span class="line"></span><br><span class="line">getAd_Phy()&#123;</span><br><span class="line"><span class="keyword">if</span> (ad_lo &gt; *(Base + Limit) )</span><br><span class="line"><span class="keyword">throw</span> error(<span class="string">"åœ°å€è¶Šç•Œ!"</span>)</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">pageNo = ad_lo % page_size<span class="comment">//é¡µå·</span></span><br><span class="line">offset = ad_lo - pageNo * page_size<span class="comment">//é¡µå†…åç§»é‡</span></span><br><span class="line">frameNo = table[PageNo]<span class="comment">//é¡µå¸§å·</span></span><br><span class="line"><span class="keyword">if</span> (frameNo == null)</span><br><span class="line"><span class="keyword">throw</span> error(<span class="string">"é¡µé¢å¤±æ•ˆ!"</span>)</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">ad_phy = frameNo * page_size + offset</span><br><span class="line"><span class="keyword">return</span> ad_phy</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/img_1173.png" alt="ç»ƒä¹ "></p><h4 id="åˆ†é¡µåœºæ™¯"><a href="#åˆ†é¡µåœºæ™¯" class="headerlink" title="åˆ†é¡µåœºæ™¯"></a>åˆ†é¡µåœºæ™¯</h4><ol><li><p>è¿›ç¨‹åˆ›å»ºæ—¶</p><ul><li><p>ç¡®å®šç¨‹åºä½“é‡</p></li><li><p>åˆ›å»ºè¿›ç¨‹è¡¨</p></li></ul></li><li><p>ç¨‹åºæ‰§è¡Œæ—¶</p><ul><li><p>MMUåˆ·æ–°</p></li><li><p>TLBåˆ·æ–°</p></li></ul></li><li><p>é¡µé¢å¤±æ•ˆæ—¶</p><ul><li>åˆ¤æ–­å¤±æ•ˆé¡µé¢, ç¡®å®šè°ƒå…¥é¡µé¢</li><li>ç¡®å®šå¹¶è°ƒå‡ºè°ƒå‡ºé¡µé¢</li><li>è°ƒå…¥è°ƒå…¥é¡µé¢</li></ul></li><li><p>ç¨‹åºç»“æŸ</p><ul><li>é‡Šæ”¾èµ„æº</li></ul></li></ol><h3 id="å¤šçº§é¡µè¡¨"><a href="#å¤šçº§é¡µè¡¨" class="headerlink" title="å¤šçº§é¡µè¡¨"></a>å¤šçº§é¡µè¡¨</h3><p>å®é™…ä¸Šé¡µè¡¨å¾ˆå¤§($2^{32}$), ä½†æ˜¯æˆ‘ä»¬è¦æ±‚å®ƒå¿«!</p><ol><li><p>å°†é¡µè¡¨æ”¾åœ¨ç¡¬ä»¶(å¯„å­˜å™¨)ä¸­</p><p>â€¦â€¦ç”¨è„šè¶¾å¤´æƒ³éƒ½ä¸ç°å®</p><p><del>ä¸‡ä¸€å“ªå¤©ç§‘æŠ€çªé£çŒ›è¿›äº†åäººçœ‹åˆ°è¿™ç¯‡åšå®¢ä¼šæ˜¯ä»€ä¹ˆæƒ³æ³•å‘¢</del></p></li><li><p>é¡µè¡¨æ”¾åœ¨è½¯ä»¶(å†…å­˜)ä¸­</p><p>æ•ˆç‡ä½</p></li></ol><p>å¤šçº§åˆ—è¡¨,å­—é¢æ„æ€,  åº”è¯¥å¾ˆå¥½æ‡‚.</p><p><strong>æ¯é¡¹çš„å¤§å°</strong></p><div class="table-container"><table><thead><tr><th>PT1</th><th>PT2</th><th>Offset</th></tr></thead><tbody><tr><td>10 $bits$</td><td>10  $bits$</td><td>12  $bits$</td></tr></tbody></table></div><p>é‚£ä¹ˆæ€»è™šæ‹Ÿåœ°å€ç©ºé—´å¤§å°ä¸º $2^{10+10+12} = 4G$ ,ä¸€çº§é¡µè¡¨ä¸­æ¯é¡¹å¯¹åº”çš„å®é™…ä¸Šæ˜¯ $2^{10+12} = 4M$ åœ°å€ç©ºé—´, äºŒçº§é¡µè¡¨å®é™…ä¸Šæ˜¯$2^{12} = 4K$</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609125441.jpg" alt="é¡µé¢å¤§å°"></p><p><strong>å®é™…ä¸Šé¡µè¡¨è¿˜åŒ…æ‹¬</strong></p><ol><li>Page frame number é¡µå¸§å·</li><li>Present /absent  è‹¥ä¸º1 ,è¡¨ç¤ºè¯¥é¡µå¯¹åº”ç‰©ç†åœ°å€åœ¨å†…å­˜ä¸­</li><li>Protection  æ ‡è¯†è®¿é—®æƒé™, R/W/X</li><li>Modified    æ ‡è¯†æ˜¯å¦ä¿®æ”¹è¿‡, è‹¥1, è°ƒå‡ºæ—¶éœ€è¦å†™å…¥ç£ç›˜</li><li>Referenced  æœ€è¿‘æ˜¯å¦è¢«è®¿é—®, ç”¨äºé¡µé¢è°ƒåº¦ç®—æ³•çš„å‚è€ƒ</li><li>Caching disabled   ä¸æ‡‚</li></ol><h3 id="TLB-å¿«è¡¨"><a href="#TLB-å¿«è¡¨" class="headerlink" title="TLB å¿«è¡¨"></a>TLB å¿«è¡¨</h3><p>æ ¹æ®äºŒå…«åŸåˆ™, 20% çš„é¡µé¢è¢«è®¿é—®80%æ¬¡, å°†å®ƒä»¬è®°å½•åœ¨ç¡¬ä»¶ä¸Š, ç›´æŸ¥ç‰©ç†åœ°å€</p><p>å‰©ä¸‹çš„80%å†è·‘å»é¡µè¡¨æŸ¥</p><p>è¿™ä¸€å—ç¡¬ä»¶ç§°ä¸º <strong>è½¬æ¢æ£€æµ‹ç¼“å†²åŒº  (Translation Lookaside Buffers, TLB, åˆç§°å¿«è¡¨)</strong></p><p>TLBåŒ…æ‹¬çš„å†…å®¹ä¸é¡µè¡¨å¤§è‡´ç›¸åŒ, ä½†æ˜¯æ›´å¿«!</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609125452.jpg" alt="å†…å®¹"></p><h3 id="åè½¬é¡µè¡¨"><a href="#åè½¬é¡µè¡¨" class="headerlink" title="åè½¬é¡µè¡¨"></a>åè½¬é¡µè¡¨</h3><p>æ²¡å¬, å¥½åƒæ˜¯ä»é¡µå¸§è½¬é¡µ, ä½†æ˜¯ä¸é‡è¦</p><h2 id="é¡µé¢è°ƒåº¦ç®—æ³•"><a href="#é¡µé¢è°ƒåº¦ç®—æ³•" class="headerlink" title="é¡µé¢è°ƒåº¦ç®—æ³•"></a>é¡µé¢è°ƒåº¦ç®—æ³•</h2><p>æœ¬èŠ‚åŒ…æ‹¬</p><ol><li>æœ€ä¼˜PRA</li><li>NRU  æœ€è¿‘æœªä½¿ç”¨</li><li>FIFO  </li><li>SC  ç¬¬äºŒæœºä¼š</li><li>Clock PRA</li><li>LRU<ol><li>ç¡¬ä»¶å®ç°</li><li>è½¯ä»¶å®ç°</li></ol></li><li>Working Set</li><li>WSClock </li></ol><p>å› ä¸ºå¾ˆé‡è¦æ‰€ä»¥å•ç‹¬æ‹‰å‡ºæ¥ä¸€ç‚¹è®²äº†</p><ul><li><p>åˆšæ‰æåˆ°é¡µé¢å¤±æ•ˆ,  å¹¶éšåè¿›è¡Œé¡µé¢è°ƒåº¦. è°ƒå…¥çš„é¡µé¢æ˜¯æ˜ç¡®çš„, ä½†æ˜¯æŠŠä»€ä¹ˆè°ƒå‡ºå‘¢? è¿™å°±æ˜¯é¡µé¢è°ƒåº¦ç®—æ³•<strong>(Page Replacement Algorithms ,PRA)</strong></p></li><li><p>é™¤äº†é¡µé¢å¤±æ•ˆå¤–åœ¨åˆ«çš„åœ°æ–¹ä¹Ÿæœ‰ä½¿ç”¨ ä¾‹å¦‚</p><ul><li>ç¼“å­˜</li><li>æœç´¢å¼•æ“çš„çƒ­ç‚¹</li></ul></li></ul><h3 id="æœ€ä¼˜PRA"><a href="#æœ€ä¼˜PRA" class="headerlink" title="æœ€ä¼˜PRA"></a>æœ€ä¼˜PRA</h3><p>æ¯æ¬¡éƒ½å°†æœªæ¥æœ€è¿œä¸ä¼šç”¨åˆ°çš„è°ƒèµ°</p><p><del>åºŸè¯ä½†æ˜¯æˆ‘æ€ä¹ˆçŸ¥é“å•·ä¸ªæ˜¯æœªæ¥ä¸ä¼šç”¨åˆ°çš„å•Š</del></p><p>æ‰€ä»¥è¿™ä¸ªç®—æ³•æ²¡æœ‰å®é™…æ„ä¹‰, ç”¨äºè¯„ä»·å…¶ä»–ç®—æ³•çš„æ€§èƒ½</p><h3 id="Not-Recently-Used-NRU-æœ€è¿‘æœªä½¿ç”¨"><a href="#Not-Recently-Used-NRU-æœ€è¿‘æœªä½¿ç”¨" class="headerlink" title="Not Recently Used (NRU, æœ€è¿‘æœªä½¿ç”¨)"></a>Not Recently Used (NRU, æœ€è¿‘æœªä½¿ç”¨)</h3><p>æ¯ä¸ªé¡µç éƒ½æœ‰ Reference bit, Modified bit  (æ˜¯å¦è¢«è®¿é—®, ä¿®æ”¹ä½)</p><p>æŒ‰ç…§ä»¥ä¸‹é¡ºåºè°ƒå‡º:</p><ol><li>not referenced, not modified </li><li>not referenced, modified</li><li>referenced, not modified </li><li>referenced, modified</li></ol><h3 id="FIFO-PRA"><a href="#FIFO-PRA" class="headerlink" title="FIFO PRA"></a>FIFO PRA</h3><p>å…ˆè¿›å…ˆå‡º</p><p>con: ç»å¸¸å°†è®¿é—®è¿‡, ä¿®æ”¹è¿‡çš„ä½è°ƒå‡º</p><p>ä¸‹é¢æ˜¯å®ƒçš„æ”¹è¿›</p><h3 id="Second-Chance-PRA"><a href="#Second-Chance-PRA" class="headerlink" title="Second Chance PRA"></a>Second Chance PRA</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;SC PRA</span><br><span class="line">while(é¡µé¢åˆ°é˜Ÿå¤´)&#123;</span><br><span class="line">if(referenceBit &#x3D;&#x3D; 0)</span><br><span class="line">è°ƒå‡º;</span><br><span class="line">else &#123;</span><br><span class="line">referenceBit &#x3D; 0;</span><br><span class="line">é¡µé¢å‡ºé˜Ÿ;</span><br><span class="line">é¡µé¢å…¥é˜Ÿ; &#x2F;&#x2F;å°±æ˜¯æ‰”å›é˜Ÿå°¾äº†</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="The-Clock-PRA"><a href="#The-Clock-PRA" class="headerlink" title="The Clock  PRA"></a>The Clock  PRA</h3><p>åŸç†ç›¸åŒ, åªæ˜¯æ”¹æˆå¾ªç¯, æ”¹å˜æŒ‡é’ˆæ¥ä»¿é€ é˜Ÿåˆ—ç§»åŠ¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">while(æŒ‡é’ˆåˆ°æœ¬é¡µäº†)&#123;</span><br><span class="line">if(referenceBit &#x3D;&#x3D; 0)</span><br><span class="line">è°ƒå‡º;</span><br><span class="line">else &#123;</span><br><span class="line">referenceBit &#x3D; 0;</span><br><span class="line">æŒ‡é’ˆåç§»;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609125508.jpg" alt="clock"></p><h3 id="Least-Recently-Used-LRU-æœ€è¿‘æœ€å°‘ä½¿ç”¨"><a href="#Least-Recently-Used-LRU-æœ€è¿‘æœ€å°‘ä½¿ç”¨" class="headerlink" title="Least Recently Used (LRU, æœ€è¿‘æœ€å°‘ä½¿ç”¨)"></a>Least Recently Used (LRU, æœ€è¿‘æœ€å°‘ä½¿ç”¨)</h3><p>æ˜¯NRUçš„å‡çº§ç‰ˆ, æ ¹æ®<a href="https://baike.baidu.com/item/%E7%A8%8B%E5%BA%8F%E5%B1%80%E9%83%A8%E6%80%A7%E5%8E%9F%E7%90%86/15572003?fr=aladdin" target="_blank" rel="noopener">ç¨‹åºå±€éƒ¨æ€§åŸç†</a>, æœ€è¿‘è¢«ä½¿ç”¨çš„å¾€å¾€å°†ä¼šå†æ¬¡è¢«ä½¿ç”¨.</p><p>å®ç°æ–¹å¼:</p><ol><li>å»ºç«‹ä¸€ä¸ªæœ€è¿‘ä½¿ç”¨é¡µé¢çš„é›†åˆ</li><li>åœ¨æ¯ä¸ªæ¡ç›®ä¸­ä¿ç•™è®¡æ•°å™¨, æ¯æ¬¡é€‰æ‹©æœ€ä½çš„(æœ€å°‘), å®šæœŸæ¸…é›¶(æœ€è¿‘)</li></ol><p><strong>æ¨¡æ‹ŸLRU</strong></p><h4 id="ç¡¬ä»¶æ¨¡æ‹Ÿ"><a href="#ç¡¬ä»¶æ¨¡æ‹Ÿ" class="headerlink" title="ç¡¬ä»¶æ¨¡æ‹Ÿ"></a>ç¡¬ä»¶æ¨¡æ‹Ÿ</h4><ul><li><p>å½“è®¿é—® n æ—¶, ç¬¬ n åˆ—ç½®0 , ç¬¬ n è¡Œå…¶ä»–ä½ç½®1</p></li><li><p>å½“éœ€è¦è°ƒå‡ºæ—¶, è°ƒå‡ºæ¯è¡Œå’Œæœ€å°‘çš„, å¦‚æœç›¸åŒ, è°ƒå‡ºâ€¦.</p></li></ul><p>å­˜ç–‘: ä¸åº”è¯¥æ˜¯è°ƒå‡ºç¦»è‡ªå·±æœ€è¿œçš„å—.? å‘ä¸‹æ•°çš„ç¬¬ä¸€ä¸ª?</p><p><strong>ç¼ºç‚¹</strong></p><p>å¼€é”€å¤§</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/09/QQ%E6%88%AA%E5%9B%BE20200609125518.jpg" alt="çŸ©é˜µ"></p><h4 id="è½¯ä»¶æ¨¡æ‹Ÿ"><a href="#è½¯ä»¶æ¨¡æ‹Ÿ" class="headerlink" title="è½¯ä»¶æ¨¡æ‹Ÿ"></a>è½¯ä»¶æ¨¡æ‹Ÿ</h4><ul><li>æ¯ä¸ªé¡µéƒ½æ‹¥æœ‰è‡ªå·±çš„æ ‡è¯†æ•°,æ¯ä¸ªä¸€æ®µæ—¶é—´å°†è®¿é—®çš„é¡µé¢å¯¹åº”çš„æ ‡è¯†æ•°çš„æŸä½ç½®1, å…¶ä»–ç½®0, ä½æ•°åç§»</li><li>è°ƒå‡ºæ—¶é€‰æ‹©æ ‡è¯†å€¼æœ€å°çš„è°ƒå‡º</li></ul><h3 id="Working-Set"><a href="#Working-Set" class="headerlink" title="Working Set"></a>Working Set</h3><p>æ²¡å¬, å¥½åƒæ˜¯æŠŠé¡µé¢é›†ä¸­æˆé›†å†è°ƒåº¦</p><h3 id="WSClock-PRA"><a href="#WSClock-PRA" class="headerlink" title="WSClock PRA"></a>WSClock PRA</h3><p>ç±»ä¼¼ä¸Šé¢, é‡‡ç”¨æ—¶é’Ÿæ¨¡æ‹Ÿ</p><h2 id="å…¶ä»–éœ€è¦è€ƒè™‘çš„"><a href="#å…¶ä»–éœ€è¦è€ƒè™‘çš„" class="headerlink" title="å…¶ä»–éœ€è¦è€ƒè™‘çš„"></a>å…¶ä»–éœ€è¦è€ƒè™‘çš„</h2><h3 id="Local-vs-Global-Allocation-Policies"><a href="#Local-vs-Global-Allocation-Policies" class="headerlink" title="Local vs Global Allocation Policies"></a>Local vs Global Allocation Policies</h3><p>å…¨å±€è°ƒåº¦é¡µé¢ä¼šä½¿å¾—ä¸€æ®µæ—¶é—´åå†…å­˜çš„åˆ©ç”¨è¶‹è¿‘äºå®é™…è¿›ç¨‹æ‰€éœ€çš„æ¯”ä¾‹.</p><h3 id="Load-Control"><a href="#Load-Control" class="headerlink" title="Load Control"></a>Load Control</h3><p>å½“ <strong>PFF (page fault frequency é¡µé¢å¤±æ•ˆé¢‘ç‡)</strong> è¿‡é«˜æ—¶, ä¸»åŠ¨å‡å°‘ä½¿ç”¨å†…å­˜çš„è¿›ç¨‹.</p><p><del>è®©ä¸€éƒ¨åˆ†è¿›ç¨‹å…ˆè·‘èµ·æ¥</del></p><h3 id="Page-Size"><a href="#Page-Size" class="headerlink" title="Page Size"></a>Page Size</h3><p>small page size (typically 4k or 8k):</p><p>Advantages:</p><ul><li>å‡å°‘å†…éƒ¨ç¢ç‰‡</li><li>æ›´å¥½åœ°é€‚åˆå„ç§æ•°æ®ç»“æ„å’Œä»£ç æ®µ</li><li>å‡å°‘å†…å­˜ä¸­æœªä½¿ç”¨çš„ç¨‹åº</li></ul><p>Disadvantages:</p><ul><li>ç¨‹åºéœ€è¦å¾ˆå¤šé¡µï¼Œå› æ­¤äº§ç”Ÿå·¨å¤§çš„é¡µè¡¨</li><li>ä¼ è¾“å°é¡µæ‰€éœ€çš„æ—¶é—´å‡ ä¹ä¸ä¼ è¾“å¤§é¡µæ‰€éœ€çš„æ—¶é—´ç›¸åŒ, ä½†ä¼ è¾“æ•ˆç‡ä½</li></ul><h3 id="Cleaning-Policy"><a href="#Cleaning-Policy" class="headerlink" title="Cleaning Policy"></a>Cleaning Policy</h3><p>ä¸ºäº†ä¿è¯åœ¨æ–°è¿›ç¨‹åˆ›å»ºçš„æ—¶å€™æœ‰è¶³å¤Ÿçš„ç©ºç™½é¡µé¢æ”¯æŒ, å¿…é¡»æ—¶åˆ»ä¿è¯å†…å­˜ä¸­æœ‰è¶³å¤Ÿçš„ç©ºç™½é¡µ.</p><p> <strong>paging daemon ï¼ˆåˆ†é¡µå®ˆæŠ¤è¿›ç¨‹ï¼‰</strong>:å½“ç©ºç™½é¡µé¢ä¸è¶³æ—¶, ä¼šä¸»åŠ¨è°ƒå‡ºé¡µ, ä½†ä¸è°ƒå…¥é¡µå¸§.</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨clock</p><h2 id="é™„-Page-Fault-Handling"><a href="#é™„-Page-Fault-Handling" class="headerlink" title="é™„: Page Fault Handling"></a>é™„: Page Fault Handling</h2><ol><li>trap è¿›å†…æ ¸, ä¿å­˜PC</li><li>ä¿å­˜è¿›ç¨‹å¯„å­˜å™¨</li><li>OS ç¡®å®šè°ƒå…¥é¡µ</li><li>OS ç¡®å®šè°ƒå‡ºé¡µ</li><li>è‹¥è°ƒå‡ºé¡µä¿®æ”¹è¿‡(dirty), éœ€è¦å†™å…¥ç£ç›˜</li><li>è°ƒå…¥è°ƒå…¥é¡µ</li><li>æ›´æ–°é¡µè¡¨</li><li>æ¢å¤åˆ°é¡µé¢å¤±æ•ˆçš„æŒ‡ä»¤</li><li>æ¢å¤è¿›ç¨‹</li><li>æ¢å¤å¯„å­˜å™¨, æ¢å¤PC</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ç« å°†ä¼šæ¶‰åŠåˆ°&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åŸºæœ¬å†…å­˜ç®¡ç†&lt;/li&gt;
&lt;li&gt;Segmentation    åˆ†æ®µ &lt;/li&gt;
&lt;li&gt;Swap    äº¤æ¢&lt;/li&gt;
&lt;li&gt;â­Virtual   è™šæ‹Ÿå†…å­˜&lt;/li&gt;
&lt;li&gt;å…¶ä»–éœ€è¦è€ƒè™‘çš„é—®é¢˜&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="ä¸“ä¸šè¯¾" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/"/>
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="http://yoursite.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://yoursite.com/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>æ“ä½œç³»ç»Ÿä¹‹è¿›ç¨‹é—´é€šä¿¡</title>
    <link href="http://yoursite.com/2020/06/08/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/"/>
    <id>http://yoursite.com/2020/06/08/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/</id>
    <published>2020-06-08T07:59:19.000Z</published>
    <updated>2020-06-08T08:08:16.844Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç« èŠ‚åŒ…æ‹¬ä¸¤ä¸ªå°èŠ‚</p><ol><li>è¿›ç¨‹é—´é€šä¿¡ (InterProess Communicatiin,IPC)</li><li>ç»å…¸çš„IPCé—®é¢˜</li></ol><a id="more"></a><h2 id="IPC"><a href="#IPC" class="headerlink" title="IPC"></a>IPC</h2><p>åœ¨æœ¬å°èŠ‚ä¼šæ¶‰åŠåˆ°ï¼š</p><ol><li>ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºèµ„æº<ol><li>ç«äº‰</li><li>ä¿è¯ä¸´ç•ŒåŒºäº’æ–¥çš„4ä¸ªæ¡ä»¶</li></ol></li><li>äº’æ–¥çš„ç­–ç•¥1 (Busy Waiting)<ol><li>ç¦æ­¢ä¸­æ–­</li><li>é”å˜é‡</li><li>ä¸¥æ ¼è½®æ¢æ³•</li><li>â­Peterson ç®—æ³•</li><li>TSL æŒ‡ä»¤</li></ol></li><li>äº’æ–¥çš„ç­–ç•¥2<ol><li>ä¸Šè¿°ç­–ç•¥çš„ç¼ºé™·ï¼ˆå¿™ç­‰å¾… ä¼˜å…ˆçº§åå‘ï¼‰</li><li>Sleep &amp; Wakeup<ol><li>é—®é¢˜ï¼šå”¤é†’ä¸¢å¤±</li></ol></li><li>â­ä¿¡å·é‡ Semaphore<ol><li>äº’æ–¥ä¿¡å·é‡ Mutexe</li><li>PVæ“ä½œ</li></ol></li><li>ç®¡ç¨‹ Monitor</li><li>æ¶ˆæ¯ä¼ é€’</li><li>å±éšœ</li></ol></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TODOï¼šç¬¬å››èŠ‚ï¼šIPC</span><br></pre></td></tr></table></figure><h2 id="Classical-IPC-Problems"><a href="#Classical-IPC-Problems" class="headerlink" title="Classical IPC Problems"></a>Classical IPC Problems</h2><p>æœ¬å°èŠ‚å°†æ¶‰åŠåˆ°å‡ ä¸ªå¸¸è§IPCæ¨¡å‹ï¼š</p><ol><li>ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…</li><li>è¯»è€…ä¸å†™è€…</li><li>è¿›é¤çš„å“²å­¦å®¶</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ç« èŠ‚åŒ…æ‹¬ä¸¤ä¸ªå°èŠ‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¿›ç¨‹é—´é€šä¿¡ (InterProess Communicatiin,IPC)&lt;/li&gt;
&lt;li&gt;ç»å…¸çš„IPCé—®é¢˜&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="ä¸“ä¸šè¯¾" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/"/>
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="http://yoursite.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://yoursite.com/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ä¼ªæ‰‹å†™ä½“æå®šæ¯›æ¦‚ç¬”è®°</title>
    <link href="http://yoursite.com/2020/06/06/%E4%BD%BF%E7%94%A8%E4%BC%AA%E6%89%8B%E5%86%99%E4%BD%93%E6%90%9E%E5%AE%9A%E6%AF%9B%E6%A6%82%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/06/06/%E4%BD%BF%E7%94%A8%E4%BC%AA%E6%89%8B%E5%86%99%E4%BD%93%E6%90%9E%E5%AE%9A%E6%AF%9B%E6%A6%82%E7%AC%94%E8%AE%B0/</id>
    <published>2020-06-06T05:41:39.000Z</published>
    <updated>2020-06-06T08:39:29.488Z</updated>
    
    <content type="html"><![CDATA[<p>æ¯›æ¦‚è¯¾åœ¨æ¥è¿ä¸Šäº†äº”ä¸ªæœˆç½‘è¯¾ä¹‹å,ç»ˆäºç­‰åˆ°äº†æœŸæœ«!</p><p>å¯¹æ­¤,æ¯›æ¦‚è€å¸ˆç»™å…¨ç­åšå‡ºæŒ‡ç¤º: â€œæ”¶  ç»™æˆ‘æ”¶ç¬”è®°!â€ </p><a id="more"></a><h2 id="èµ·æº"><a href="#èµ·æº" class="headerlink" title="èµ·æº"></a>èµ·æº</h2><p>ä¼—æ‰€å‘¨çŸ¥, å¤§å­¦çš„æ€æ”¿è¯¾ç¬”è®°æ˜¯æœ€æ— èŠè™½æ²¡æ„ä¹‰çš„å½¢å¼ä¸»ä¹‰äº†.</p><p>å°¤å…¶æ˜¯ä»–è¿˜è¦æ±‚æ˜¯æ‰‹å†™çš„æƒ…å†µä¸‹.</p><p>å°¤å…¶æ˜¯æ‰‹å†™çš„ç¬”è®°è¿˜è¦æ‹ç…§æäº¤çš„æƒ…å†µä¸‹.</p><p><del>ä¸ä¼šå§ä¸ä¼šå§, ä¸ä¼šçœŸçš„æœ‰äººè¿˜åœ¨ç”¨çº¸ç¬”è®°ç¬”è®°å§? ğŸ¶<del/></p><p>å—äº²çˆ±çš„<a href="https://moefactory.com/" target="_blank" rel="noopener">å°æ¢¦åŒå­¦</a>æç‚¹, æˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹æ€ä¹ˆ<strong>ä»¿é€ æ‰‹å†™ä½“</strong>æ‰“å°ææ–™.</p><p><strong>é‡è¦æé†’</strong></p><p>ç”±äºæ‰“å°æœºæœ¬èº«çš„é™åˆ¶, å®ç‰©è¿˜æ˜¯è‚‰çœ¼å¯è§åœ°åˆ†è¾¨å‡ºä¼ªæ‰‹å†™ç¨¿. æœ¬å­¦æœŸå› ä¸ºä»¥å‰çš„å½±å“åªè¦æ±‚æŠŠç¬”è®°æ‹ç…§ä¸Šä¼ æ£€æŸ¥, æ¯”è¾ƒå¥½è’™æ··è¿‡å…³ğŸ¤”</p><p>å¦‚æœæ˜¯çº¿ä¸‹æŸ¥æ”¶, è¿˜æ˜¯æ¢ä¸ªæ‘¸é±¼æ–¹æ³•å§â€¦.</p><p>æœ¬æ–¹æ³•æ— éœ€ç¼–ç¨‹åŸºç¡€. </p><h2 id="å¼€å†²"><a href="#å¼€å†²" class="headerlink" title="å¼€å†²"></a>å¼€å†²</h2><h3 id="Step1-ç”Ÿæˆè‡ªå·±çš„æ‰‹å†™å­—ä½“"><a href="#Step1-ç”Ÿæˆè‡ªå·±çš„æ‰‹å†™å­—ä½“" class="headerlink" title="Step1. ç”Ÿæˆè‡ªå·±çš„æ‰‹å†™å­—ä½“"></a>Step1. ç”Ÿæˆè‡ªå·±çš„æ‰‹å†™å­—ä½“</h3><p>åŒ—äº¬å¤§å­¦è®¡ç®—æœºç§‘å­¦æŠ€æœ¯ç ”ç©¶æ‰€æœ‰ä¸€ä¸ªé¡¹ç›®<a href="http://59.108.48.27/flexifont-chn/login/" target="_blank" rel="noopener">Flexifontå­—åº“</a>, å¯ä»¥å®ç°è‡ªå·±çš„å­—åº“. ç‚¹å¼€æ³¨å†Œç™»å½•, æ ¹æ®æç¤ºä¸‹è½½æ¨¡æ¿, æ‰“å°ä¹¦å†™, æ‹ç…§ç”Ÿæˆå°±å¯ä»¥äº†. </p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/%5DI%7DRW22GJ%7B%401NL7JYIE%2483C.png" alt=""></p><p>å¦‚å›¾, ä¸‹è½½ä¸åŒå­—æ•°çš„æ¨¡æ¿, æ‰“å°å‡ºæ¥å¡«å¥½,  ä¸Šä¼ ç”Ÿæˆå³å¯.</p><p>ä¸è¿‡æˆ‘æ²¡æ•´è¿™ä¸€æ­¥, ç›´æ¥åœ¨å­—åº“åˆ†äº«é‡Œé¢ä¸‹äº†åˆ«äººçš„, è°¢è°¢å¼ å»ºåŒå­¦.</p><p>ä¸‹è½½å¥½.ttfæ–‡ä»¶åå¯¼å…¥ç³»ç»Ÿæ–‡ä»¶å¤¹(C:\Windows\Fonts)å³å¯.</p><h3 id="Step2-è®¾ç½®-Word-å®å‘½ä»¤"><a href="#Step2-è®¾ç½®-Word-å®å‘½ä»¤" class="headerlink" title="Step2. è®¾ç½® Word å®å‘½ä»¤"></a>Step2. è®¾ç½® Word å®å‘½ä»¤</h3><p>å‚è€ƒäº† <a href="https://www.zhihu.com/question/20308770" target="_blank" rel="noopener">è¿™ä¸ªé—®é¢˜ </a>ä¸‹çš„å›ç­”</p><p>åœ¨Wordä¸­ä¾æ¬¡ç‚¹å‡» â€œæ–‡ä»¶ -&gt; é€‰é¡¹ -&gt; ä¿¡ä»»ä¸­å¿ƒ -&gt; ä¿¡ä»»ä¸­å¿ƒè®¾ç½® -&gt; å®è®¾ç½®â€ åœ¨å³ä¾§é€‰ä¸­ â€œå¯ç”¨æ‰€æœ‰å®â€.</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/hongshezhi%20.png" alt="å®è®¾ç½®"></p><p><strong>å›åˆ°ä¸»ç•Œé¢, è§†å›¾ - å® - æŸ¥çœ‹å®</strong></p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/2020%E5%B9%B46%E6%9C%886%E6%97%A53.png" alt="å®ä»£ç ç¼–å†™1"></p><p>è¾“å…¥æ–¹æ¡ˆå,æ–°å»º, å¹¶åœ¨å¼¹å‡ºçš„çª—å£ä¸­æ’å…¥ä»¥ä¸‹ä»£ç </p><figure class="highlight vb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">' æ³¨æ„æ˜¯æ’å…¥ ä¸æ˜¯ç›´æ¥æŠŠåŸæ¥çš„æ›¿æ¢æ‰å“¦</span></span><br><span class="line">    <span class="keyword">Dim</span> R_Character <span class="keyword">As</span> Range</span><br><span class="line"></span><br><span class="line">    <span class="keyword">Dim</span> FontSize(<span class="number">5</span>)</span><br><span class="line"><span class="comment">' å­—ä½“å¤§å°åœ¨5ä¸ªå€¼ä¹‹é—´è¿›è¡Œæ³¢åŠ¨ï¼Œå¯ä»¥æ”¹å†™ </span></span><br><span class="line"><span class="comment">' ä¸ªäººå»ºè®® å¦‚æœçº¸å¼ çº¿æ¡é—´è·ä¸º8mm, å­—å·è®¾ç½®ä¸º16å·¦å³æ¯”è¾ƒåˆé€‚</span></span><br><span class="line">    FontSize(<span class="number">1</span>) = <span class="string">"15.5"</span></span><br><span class="line">    FontSize(<span class="number">2</span>) = <span class="string">"15"</span></span><br><span class="line">    FontSize(<span class="number">3</span>) = <span class="string">"16"</span></span><br><span class="line">    FontSize(<span class="number">4</span>) = <span class="string">"17"</span></span><br><span class="line">    FontSize(<span class="number">5</span>) = <span class="string">"17.5"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">Dim</span> FontName(<span class="number">3</span>)</span><br><span class="line">    <span class="comment">'å­—ä½“åç§°åœ¨ä¸‰ç§å­—ä½“ä¹‹é—´è¿›è¡Œæ³¢åŠ¨ï¼Œå¯æ”¹å†™ï¼Œä½†éœ€è¦ä¿è¯ç³»ç»Ÿæ‹¥æœ‰ä¸‹åˆ—å­—ä½“</span></span><br><span class="line">FontName(<span class="number">1</span>) = <span class="string">"å®‹ä½“"</span></span><br><span class="line">FontName(<span class="number">2</span>) = <span class="string">"å¾®è½¯é›…é»‘"</span></span><br><span class="line">FontName(<span class="number">3</span>) = <span class="string">"é»‘ä½“"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">Dim</span> ParagraphSpace(<span class="number">5</span>)</span><br><span class="line"><span class="comment">'è¡Œé—´è· åœ¨ä¸€å®šä»¥ä¸‹å€¼ä¸­å‡ç­‰åˆ†å¸ƒï¼Œå¯æ”¹å†™ </span></span><br><span class="line"><span class="comment">' ä¸ªäººå»ºè®® å¦‚æœçº¸å¼ çº¿æ¡é—´è·ä¸º8mm, å­—å·è®¾ç½®ä¸º23å·¦å³æ¯”è¾ƒåˆé€‚, å¹¶ä¸”ä¸å»ºè®®æ³¢åŠ¨è¿‡å¤§</span></span><br><span class="line">    ParagraphSpace(<span class="number">1</span>) = <span class="string">"22"</span></span><br><span class="line">    ParagraphSpace(<span class="number">2</span>) = <span class="string">"22.5"</span></span><br><span class="line">    ParagraphSpace(<span class="number">3</span>) = <span class="string">"23"</span></span><br><span class="line">    ParagraphSpace(<span class="number">4</span>) = <span class="string">"23.5"</span></span><br><span class="line">    ParagraphSpace(<span class="number">5</span>) = <span class="string">"24"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">'ä¸‹é¢æ˜¯åŠŸèƒ½ä»£ç  ä¸æƒ³è¦ä»€ä¹ˆç›´æ¥åˆ é™¤å°±è¡Œ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> R_Character <span class="keyword">In</span> ActiveDocument.Characters</span><br><span class="line"></span><br><span class="line">        VBA.Randomize</span><br><span class="line"></span><br><span class="line">        R_Character.Font.Name = FontName(Int(VBA.Rnd * <span class="number">3</span>) + <span class="number">1</span>)</span><br><span class="line"><span class="comment">'ä¸Šé¢ä¸€è¡Œæ˜¯éšæœºå˜æ¢å­—ä½“,ä¸æƒ³è¦å¯åˆ é™¤</span></span><br><span class="line">        R_Character.Font.Size = FontSize(Int(VBA.Rnd * <span class="number">5</span>) + <span class="number">1</span>)</span><br><span class="line"><span class="comment">'ä¸Šé¢ä¸€è¡Œæ˜¯éšæœºå˜æ¢å­—ä½“å¤§å°,ä¸æƒ³è¦å¯åˆ é™¤</span></span><br><span class="line">        R_Character.Font.Position = Int(VBA.Rnd * <span class="number">3</span>) + <span class="number">1</span></span><br><span class="line"><span class="comment">'ä¸Šé¢ä¸€è¡Œå¯¹æ¯ä¸ªå­—éšæœºä¸Šä¸‹å¾®è°ƒ,ä¸æƒ³è¦å¯åˆ é™¤</span></span><br><span class="line">        R_Character.Font.Spacing = <span class="number">0</span></span><br><span class="line"><span class="comment">'ä¸Šé¢ä¸€è¡Œä¸è¦ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">Next</span></span><br><span class="line"></span><br><span class="line">    Application.ScreenUpdating = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> Cur_Paragraph <span class="keyword">In</span> ActiveDocument.Paragraphs</span><br><span class="line"><span class="comment">'ä¸Šé¢ä¸‰è¡Œä¸è¦ä¿®æ”¹</span></span><br><span class="line">        Cur_Paragraph.LineSpacing = ParagraphSpace(Int(VBA.Rnd * <span class="number">5</span>) + <span class="number">1</span>)</span><br><span class="line"><span class="comment">'ä¸Šé¢ä¸€è¡Œå¯¹æ¯ä¸ªè¡Œé—´è·å¾®è°ƒ,ä¸æƒ³è¦å¯åˆ é™¤</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">Next</span></span><br><span class="line">        Application.ScreenUpdating = <span class="literal">True</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹åå¦‚å›¾, è®°å¾—è¦æŠŠä»£ç 16-19è¡Œæ¢æˆä½ è‡ªå·±çš„æ‰‹å†™ä½“</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/QQ%E6%88%AA%E5%9B%BE20200606154923.jpg" alt="ä»£ç ä¿®æ”¹å¦‚ä¸‹"></p><p>ç‚¹å‡»ä¸Šé¢çš„è¿è¡ŒæŒ‰é’®(æˆ–è€…æ˜¯ä¸ªå°ç»¿ä¸‰è§’) ç­‰å¾…</p><p>ä¸å‡ºæ„å¤–ç»“æœå¦‚ä¸‹</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/2020%E5%B9%B46%E6%9C%886%E6%97%A515%E7%82%B951%E5%88%86.jpg" alt="è®°å¾—è¦æŠŠå­—ä½“æ¢æˆè‡ªå·±çš„æ‰‹å†™ä½“å“¦"></p><p>è®°å¾—æŠŠå­—ä½“æ¢æˆä¸åŒä½†ç›¸è¿‘çš„æ‰‹å†™ä½“, åˆ«æƒ³ç°åœ¨ä¸€æ ·ä¸‘ä¸æ‹‰å‡ çš„</p><h3 id="Step3-è®¾ç½®é¡µé¢ä¸æ®µè½"><a href="#Step3-è®¾ç½®é¡µé¢ä¸æ®µè½" class="headerlink" title="Step3. è®¾ç½®é¡µé¢ä¸æ®µè½"></a>Step3. è®¾ç½®é¡µé¢ä¸æ®µè½</h3><p>å‡†å¤‡å¥½æ‰“å°æœº, å¤å°çº¸, ä»¥åŠæµªè´¹å¾ˆå¤šçº¸å¼ çš„å†³å¿ƒ, å¼€å§‹ä¸‹ä¸€æ­¥.</p><p><del>å½“ç„¶ä½ è¦å®ç°å‡†å¤‡å¥½ç”µå­ç¬”è®°, ä½ ä¸ä¼šçœŸçš„æ²¡æœ‰è®°å§?<del/></p><h4 id="å­—ä½“å­—å·"><a href="#å­—ä½“å­—å·" class="headerlink" title="å­—ä½“å­—å·"></a>å­—ä½“å­—å·</h4><p>åœ¨ä¸Šä¸€æ­¥æˆ‘ä»¬åº”è¯¥æ˜¯åŸºæœ¬è§£å†³äº†è¿™ä¸ªé—®é¢˜, å¦‚æœæ²¡æœ‰, è‹¥çº¸å¼ çº¿æ¡é—´è·ä¸º8mm, å­—å·è®¾ç½®ä¸º16å·¦å³æ¯”è¾ƒåˆé€‚.</p><p>word ä¸­å­—å·çš„å•ä½æ˜¯ç£…, çº¦ä¸º0.3528æ¯«ç±³.ä¹Ÿå°±æ˜¯è¯´16çš„å­—å·æ‰“å°å‡ºæ¥å¤§çº¦æ˜¯5.645æ¯«ç±³é«˜.</p><p>æ­¤å¤–å¯ä»¥è¯•ä¸€ä¸‹å…¨éƒ¨ç”¨ <strong>ç²—ä½“</strong> , å› ä¸ºæˆ‘ç”¨çš„å­—ä½“æ¯”è¾ƒçº¤ç»†, çœ‹ç€å¤ªå‡</p><p>å¤šè¯•è¯•, ä¸è¦æ€•åºŸçº¸</p><h4 id="æ®µè½"><a href="#æ®µè½" class="headerlink" title="æ®µè½"></a>æ®µè½</h4><p>å…¨é€‰, å³é”®æ®µè½, è®¾ç½®è¡Œé—´è·ä¸æ®µé—´è·.</p><p>é—´è·ä¸€æ ä¸‹</p><p><strong>æ®µå‰æ®µå:</strong>å…¨éƒ¨è®¾ç½®æˆ0 ç©ºç™½ä¹Ÿè¦å†è®¾ç½®ä¸€æ¬¡</p><p><strong>è¡Œè·:</strong> é€‰æ‹©å›ºå®šå€¼, è¿™é‡Œå•ä½ä¾æ—§æ˜¯ç£…æ•°, å¦‚æœç›´çº¿ç›¸éš”8mmçš„è¯å¤§çº¦è®¾ç½®æˆ23ç£…(23*0.35=8.1144â€¬)</p><h4 id="é¡µé¢"><a href="#é¡µé¢" class="headerlink" title="é¡µé¢"></a>é¡µé¢</h4><p>wordä¸»é¡µé¢ - å¸ƒå±€ - é¡µè¾¹è·&amp;çº¸å¼ å¤§å°</p><p>è‡ªå·±é‡ä¸€é‡å§, ä¸Šè¾¹è·æ˜¯åˆ°ç¬¬ä¸€è¡Œçš„<strong>å­—çš„ä¸Šæ²¿</strong>, ä¸‹è¾¹è·æ˜¯æœ€åä¸€è¡Œ<strong>å­—çš„ä¸‹æ²¿</strong></p><p>å¤šè¯•è¯•, ä¸è¦æ€•åºŸçº¸</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/K%607_8GUVFXF0%24PQU81VDCUK.jpg" alt="è¿™ä¹ˆå¤šå…¨æ˜¯æµªè´¹æ‰çš„"></p><h3 id="Step4-å…¶ä»–ä½œå‡æ‰‹æ®µ"><a href="#Step4-å…¶ä»–ä½œå‡æ‰‹æ®µ" class="headerlink" title="Step4. å…¶ä»–ä½œå‡æ‰‹æ®µ"></a>Step4. å…¶ä»–ä½œå‡æ‰‹æ®µ</h3><ol><li><p>å…¨éƒ¨ç”¨ç²—ä½“, ç”Ÿæˆçš„å­—ä½“è¿‡äºçº¤ç»†</p></li><li><p>åˆ‡æ¢å­—ä½“ç¡®å®æœ‰æ•ˆ,ä½†æ˜¯å­—ä½“é£æ ¼ä¸èƒ½ç›¸å·®å¤ªå¤§</p></li><li><p>æ‰«æåå¯¹PDFåšä¸€ä¸‹é»‘ç™½å¤„ç†, æ›´éš¾å‘ç°</p><p>å¦å¤–æ¨èä½¿ç”¨app Scanbotæ‰«æ, åŠæ‰“æŸæŸæ‰«æç‹</p></li><li><p>é€šè¿‡<a href="https://www.ilovepdf.com/compress_pdf" target="_blank" rel="noopener">è¿™ä¸ªç½‘å€</a>å¯¹PDFè¿›è¡Œå…¨æŸå‹ç¼©, ç›´æ¥æŒ‘å‹ç¼©ç‡æœ€é«˜çš„é‚£ä¸ªé€‰é¡¹(æ–œçœ¼ç¬‘)</p></li></ol><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>æˆå“è¿˜æ˜¯å¾ˆæ»¡æ„æ»´~ </p><p>çº¿ä¸Šæ£€æŸ¥çš„è¯åº”è¯¥è¶³å¤Ÿä»¥å‡ä¹±çœŸäº†å§ğŸ‘Œ</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/QQ%E6%88%AA%E5%9B%BE20200606161805.jpg" alt="æ•ˆæœå›¾1"></p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/QQ%E6%88%AA%E5%9B%BE20200606161822.jpg" alt="æ•ˆæœå›¾2"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><p>å¬è¯´Githubä¸Š<a href="https://link.zhihu.com/?target=https%3A//github.com/Gsllchb/Handright">è¿™ä¸ªé¡¹ç›®</a>å¯ä»¥è¿›ä¸€æ­¥å¾®è°ƒå­—ä½“æ•ˆæœ,å®ç°åŒå­—ä¸åŒæ ·</p></li><li><p>ä½¿ç”¨å–·å¢¨å¼æ‰“å°æœºåº”è¯¥ä¼šç¨å¾®å¥½ä¸€äº›</p></li><li><p>å­¦åˆ°äº†ç£…æ•°è¿™ä¸€æ²¡ä»€ä¹ˆåµç”¨çš„çŸ¥è¯†</p></li><li><p>ä¸ºäº†æœ¬ç¯‡ä¼ å›¾å¼€äº†è…¾è®¯äº‘çš„COS, ç»ˆäºæœ‰å›¾åºŠäº†</p></li><li><p>å…¶å®ç¬”è®°æœ€å¥½è¿˜æ˜¯è‡ªå·±å¹³æ—¶å¸¦ç€è®°æ¯”è¾ƒå¥½</p><p><del>ä½†æ˜¯è¿™å½“ç„¶æ˜¯ä¸å¯èƒ½çš„å•Šå“ˆå“ˆå“ˆå“ˆ<del/></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¯›æ¦‚è¯¾åœ¨æ¥è¿ä¸Šäº†äº”ä¸ªæœˆç½‘è¯¾ä¹‹å,ç»ˆäºç­‰åˆ°äº†æœŸæœ«!&lt;/p&gt;
&lt;p&gt;å¯¹æ­¤,æ¯›æ¦‚è€å¸ˆç»™å…¨ç­åšå‡ºæŒ‡ç¤º: â€œæ”¶  ç»™æˆ‘æ”¶ç¬”è®°!â€ &lt;/p&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯å°è®°" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF%E5%B0%8F%E8%AE%B0/"/>
    
      <category term="å¿«ä¹æ‘¸é±¼" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF%E5%B0%8F%E8%AE%B0/%E5%BF%AB%E4%B9%90%E6%91%B8%E9%B1%BC/"/>
    
    
      <category term="æ‰‹å†™ä½“" scheme="http://yoursite.com/tags/%E6%89%8B%E5%86%99%E4%BD%93/"/>
    
      <category term="word å®å‘½ä»¤" scheme="http://yoursite.com/tags/word-%E5%AE%8F%E5%91%BD%E4%BB%A4/"/>
    
      <category term="æ‘¸é±¼" scheme="http://yoursite.com/tags/%E6%91%B8%E9%B1%BC/"/>
    
  </entry>
  
  <entry>
    <title>æ“ä½œç³»ç»Ÿä¹‹è¿›ç¨‹çº¿ç¨‹</title>
    <link href="http://yoursite.com/2020/06/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B/"/>
    <id>http://yoursite.com/2020/06/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B/</id>
    <published>2020-06-05T09:06:22.000Z</published>
    <updated>2020-06-09T06:13:58.037Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç« èŠ‚åŒ…æ‹¬ä¸‰ä¸ªå°èŠ‚</p><ol><li>è¿›ç¨‹ (Processes)</li><li>çº¿ç¨‹ (Threads)</li><li>è°ƒåº¦ (Scheduling)</li></ol><a id="more"></a><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/%E8%BF%9B%E7%A8%8B%2C%20%E7%BA%BF%E7%A8%8B%2C%20%E8%B0%83%E5%BA%A6.png" alt=""></p><h1 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h1><p>åœ¨æœ¬å°èŠ‚ä¼šæ¶‰åŠåˆ°ï¼š</p><ol><li>CPUæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¹¶ç”±æ­¤å¼•å…¥è¿›ç¨‹çš„æ¦‚å¿µä¸ç”¨é€”</li><li>è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼š<ol><li>â­è¿›ç¨‹çš„äº”ç§çŠ¶æ€åŠä¹‹é—´çš„è½¬æ¢</li><li>è¿›ç¨‹çš„åˆ›å»º</li><li>è¿›ç¨‹çš„ä¸­æ­¢</li><li>ä¸¤ä¸ªè¿›ç¨‹çš„åˆ‡æ¢ï¼ˆä¸Šä¸‹æ–‡ä¿å­˜ï¼‰</li></ol></li><li>â­Process Control Blocks,PCB (è¿›ç¨‹è¡¨, è¿›ç¨‹æ§åˆ¶å—)<ol><li>ä¸ºä»€ä¹ˆè¦ç”¨PCBï¼Ÿ</li><li>PCB ä¸­åŒ…æ‹¬ä»€ä¹ˆï¼Ÿ</li></ol></li></ol><h2 id="è¿›ç¨‹çš„å¼•å…¥åŠæ¦‚å¿µ"><a href="#è¿›ç¨‹çš„å¼•å…¥åŠæ¦‚å¿µ" class="headerlink" title="è¿›ç¨‹çš„å¼•å…¥åŠæ¦‚å¿µ"></a>è¿›ç¨‹çš„å¼•å…¥åŠæ¦‚å¿µ</h2><p>æœ¬ç« çš„å†…å®¹(åŒ…æ‹¬è¿›ç¨‹çº¿ç¨‹è°ƒåº¦IPC)åœ¨äºæ¢è®¨å¦‚ä½•æ›´é«˜æ•ˆåœ°åˆ©ç”¨CPU. å°½ç®¡å¸‚é¢ä¸Šæ—©å·²é‡‡ç”¨äº†å¤šæ ¸æ¶æ„, ä½†ä¸‹è¿°åˆ†æå‡ä¸ºå•æ ¸CPU, å¦‚æœè¦è€ƒè™‘å¤šæ ¸çš„æƒ…å†µä¼šäº‹å…ˆè¯´æ˜ã€‚</p><p>æ—¢ç„¶æ˜¯å•æ ¸CPUï¼Œé‚£ä¹ˆåœ¨åŒä¸€æ—¶é—´åˆ»CPUè®¡ç®—èµ„æºåªèƒ½ç”¨åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚å¦‚æœæˆ‘æ­¤æ—¶ä¸€è¾¹æ•²ä»£ç ï¼Œä¸€è¾¹å¬æ­Œï¼Œä¸€è¾¹æŒ‚QQï¼Œé‚£ä¹ˆå®é™…ä¸ŠCPUçš„è¿è¡ŒçŠ¶æ€æ˜¯åœ¨è¿™äº›å·¥ä½œä¹‹é—´ä»¥æ¯«ç§’çº§åˆ«çš„é€Ÿåº¦æ¥å›è¿…é€Ÿåˆ‡æ¢ï¼Œåœ¨å®è§‚ä¸Šé€ æˆå‡ ä¸ªå·¥ä½œåŒæ—¶è¿›è¡Œçš„å‡è±¡ã€‚ä¹Ÿå³æ˜¯<strong>â€œå¾®è§‚ä¸²è¡Œï¼Œå®è§‚å¹¶è¡Œâ€</strong>ã€‚<br>è¿™æ ·çš„æƒ…å†µæˆ‘ä»¬è¢«ç§°ä¸º<strong>å¤šé“ç¨‹åº</strong> ï¼Œå³åŒæ—¶æœ‰å¤šä¸ªç¨‹åºåœ¨æ‰§è¡Œä¸­(å®è§‚)ï¼Œä½†å®é™…ä¸Šåªæœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨ä½¿ç”¨CPU(å¾®è§‚)</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/1.jpg" alt="å¾…é…å›¾1"></p><p><strong>è¿›ç¨‹ï¼š</strong> an executing program, including the current values of the program counter, register, and variables.<br>è¿›ç¨‹æ˜¯è¿›è¡Œä¸­çš„ç¨‹åºã€‚ç¼–å†™å¥½çš„ä»£ç (.c, .py)æˆ–å¯è¿è¡Œçš„æ–‡ä»¶(.exe, .bat) è¢«æˆä¸ºç¨‹åºã€‚å½“ä»–ä»¬è¢«è¿è¡Œæ—¶æ‰è¢«ç§°ä¸ºè¿›ç¨‹ã€‚<br>ä¸€ä¸ªè¿›ç¨‹åŒ…æ‹¬ï¼š</p><ul><li>program counter, ç¨‹åºè®¡æ•°å™¨;ç”¨äºæ ‡å¿—è¯¥è¿›ç¨‹å½“å‰è¿è¡Œè‡³ç¨‹åºçš„ä½•å¤„</li><li>stack, æ ˆ; </li><li>data section,æ•°æ®éƒ¨åˆ†</li></ul><p>é‚£ä¹ˆæ˜¾ç„¶ï¼Œå¤šé“ç¨‹åºä¸­æ¯ä¸ªç¨‹åºéƒ½æ‹¥æœ‰è‡ªå·±çš„PCã€stackâ€¦</p><h2 id="è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></a>è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="è¿›ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢"><a href="#è¿›ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢" class="headerlink" title="è¿›ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢"></a>è¿›ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢</h3><h4 id="è¿›ç¨‹çš„çŠ¶æ€"><a href="#è¿›ç¨‹çš„çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çš„çŠ¶æ€"></a>è¿›ç¨‹çš„çŠ¶æ€</h4><p>è¿›ç¨‹æ˜¯ä¸€ä¸ªåŠ¨æ€çš„å®¢ä½“ï¼Œå¯ä»¥è¢«åˆ›å»ºé”€æ¯ç­‰ã€‚è¿›ç¨‹æ€»å…±æ‹¥æœ‰äº”ç§ç”Ÿå‘½çŠ¶æ€(state)ï¼š</p><ol><li>new               åˆ›å»º</li><li>ready             å°±ç»ª</li><li>running           è¿è¡Œ</li><li>waiting/blocked   é˜»å¡/ç­‰å¾…æ€</li><li>terminated/exit        é”€æ¯</li></ol><h4 id="çŠ¶æ€ä¹‹é—´è½¬æ¢"><a href="#çŠ¶æ€ä¹‹é—´è½¬æ¢" class="headerlink" title="çŠ¶æ€ä¹‹é—´è½¬æ¢"></a>çŠ¶æ€ä¹‹é—´è½¬æ¢</h4><ul><li>new -&gt; ready</li><li>ready -&gt; running</li><li>running -&gt; ready</li><li>running -&gt; blocked</li><li>running -&gt; exit</li><li>blocked -&gt; ready</li></ul><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/2.jpg" alt="çŠ¶æ€è½¬æ¢2"></p><h3 id="è¿›ç¨‹çš„åˆ›å»º"><a href="#è¿›ç¨‹çš„åˆ›å»º" class="headerlink" title="è¿›ç¨‹çš„åˆ›å»º"></a>è¿›ç¨‹çš„åˆ›å»º</h3><h4 id="è¿›ç¨‹çš„åˆ›å»ºåœºæ™¯"><a href="#è¿›ç¨‹çš„åˆ›å»ºåœºæ™¯" class="headerlink" title="è¿›ç¨‹çš„åˆ›å»ºåœºæ™¯:"></a>è¿›ç¨‹çš„åˆ›å»ºåœºæ™¯:</h4><ol><li>ç³»ç»Ÿåˆå§‹åŒ–</li><li>ç³»ç»Ÿè°ƒç”¨</li><li>ç”¨æˆ·å‘½ä»¤</li><li>æ‰¹å¤„ç†ä½œä¸šçš„åˆå§‹åŒ–</li></ol><h4 id="çˆ¶å­è¿›ç¨‹"><a href="#çˆ¶å­è¿›ç¨‹" class="headerlink" title="çˆ¶å­è¿›ç¨‹"></a>çˆ¶å­è¿›ç¨‹</h4><ul><li>çˆ¶è¿›ç¨‹ä¸æ–­åˆ›å»ºå­è¿›ç¨‹,ç”±æ­¤å½¢æˆè¿›ç¨‹æ ‘</li><li>å­è¿›ç¨‹<strong>å¯ä»¥</strong>ç»§æ‰¿çˆ¶çš„èµ„æº(ä¹Ÿå¯ä»¥ä¸ç»§æ‰¿æˆ–åŠç»§æ‰¿)</li><li>çˆ¶å­è¿›ç¨‹å¯ä»¥åŒæ—¶æ‰§è¡Œ,ä¹Ÿæœ‰å¯èƒ½çˆ¶ç­‰å¾…å­</li><li>Unix ä¸­å­˜åœ¨è¿™ç§è¿›ç¨‹çš„å±‚çº§å…³ç³»,Win ä¸­è¿›ç¨‹çš„åœ°ä½å¹³ç­‰,ä¸å­˜åœ¨çˆ¶å­å…³ç³»<ul><li>ä½†æ˜¯è¿™ä¸€è¯´æ³•ä¼¼ä¹ä¸å½“, <a href="https://www.zhihu.com/question/31429459" target="_blank" rel="noopener">å‚çœ‹æ­¤å¤„</a></li></ul></li></ul><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/3.jpg" alt="Unixè¿›ç¨‹æ ‘3"></p><h3 id="è¿›ç¨‹çš„é”€æ¯"><a href="#è¿›ç¨‹çš„é”€æ¯" class="headerlink" title="è¿›ç¨‹çš„é”€æ¯"></a>è¿›ç¨‹çš„é”€æ¯</h3><h4 id="è¿›ç¨‹é”€æ¯çš„åœºæ™¯"><a href="#è¿›ç¨‹é”€æ¯çš„åœºæ™¯" class="headerlink" title="è¿›ç¨‹é”€æ¯çš„åœºæ™¯"></a>è¿›ç¨‹é”€æ¯çš„åœºæ™¯</h4><ol><li><p>Normal exit    æ­£å¸¸é€€å‡º (è‡ªæ„¿)</p></li><li><p>Error exit        é”™è¯¯é€€å‡º (è‡ªæ„¿)</p></li><li><p>Fatal error      è‡´å‘½æ€§é”™è¯¯é€€å‡º (éè‡ªæ„¿)</p><p>eg: é™¤0, å–éæ³•åœ°å€</p></li><li><p>è¢«å…¶ä»–è¿›ç¨‹æ€æ­»  (éè‡ªæ„¿)</p><p>eg: çˆ¶è¿›ç¨‹, ç³»ç»Ÿ, å…¶ä»–ä¼˜å…ˆçº§æ›´é«˜çš„è¿›ç¨‹</p></li></ol><h4 id="çº§è”ç»ˆæ­¢"><a href="#çº§è”ç»ˆæ­¢" class="headerlink" title="çº§è”ç»ˆæ­¢"></a>çº§è”ç»ˆæ­¢</h4><p>â€‹    å½“çˆ¶è¿›ç¨‹é€€å‡ºæ—¶,å­è¿›ç¨‹å¿…é¡»é€€å‡º.</p><h3 id="è¿›ç¨‹çš„åˆ‡æ¢"><a href="#è¿›ç¨‹çš„åˆ‡æ¢" class="headerlink" title="è¿›ç¨‹çš„åˆ‡æ¢"></a>è¿›ç¨‹çš„åˆ‡æ¢</h3><ul><li>è¿›ç¨‹çš„åˆ‡æ¢éå¸¸é¢‘ç¹, ä¸€èˆ¬åœ¨æ¯«ç§’çº§</li><li>è¿›ç¨‹åˆ‡æ¢éœ€è¦è€—è´¹æ—¶é—´, ç§°ä¸ºGap</li></ul><h4 id="è¿›ç¨‹åˆ‡æ¢çš„åœºæ™¯"><a href="#è¿›ç¨‹åˆ‡æ¢çš„åœºæ™¯" class="headerlink" title="è¿›ç¨‹åˆ‡æ¢çš„åœºæ™¯"></a>è¿›ç¨‹åˆ‡æ¢çš„åœºæ™¯</h4><ol><li><p>æ—¶é’Ÿä¸­æ–­</p><p>eg æ—¶é—´è½®ç‰‡ç”¨å°½</p></li><li><p>IO ä¸­æ–­</p></li><li><p>Memory Fault  å†…å­˜å¤±æ•ˆ</p><p>eg å†…å­˜ä¸­é¡µé¢å¤±æ•ˆ</p></li><li><p>Trap é™·å…¥</p><p>å‘ç”Ÿé”™è¯¯æ—¶</p></li><li><p>Supervisor Call</p><p>ç®¡ç†ç¨‹åºè°ƒç”¨</p></li></ol><h4 id="ä¸Šä¸‹æ–‡åˆ‡æ¢"><a href="#ä¸Šä¸‹æ–‡åˆ‡æ¢" class="headerlink" title="ä¸Šä¸‹æ–‡åˆ‡æ¢"></a>ä¸Šä¸‹æ–‡åˆ‡æ¢</h4><p>åˆ‡å‡ºæ—¶, å¿…é¡»ä¿å­˜è¯¥è¿›ç¨‹ç›®å‰çš„ç¯å¢ƒ.åˆ‡å…¥æ—¶,å¿…é¡»åŠ è½½å…ˆå‰çš„ç¯å¢ƒ</p><p>ä½¿ç”¨ PCB(Processing Control Block, è¿›ç¨‹è¡¨,è¿›ç¨‹æ§åˆ¶å—) æ¥å‚¨å­˜è¿›ç¨‹çš„ç¯å¢ƒ</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/4.jpg" alt=""></p><h4 id="è¿›ç¨‹è°ƒåº¦é˜Ÿåˆ—"><a href="#è¿›ç¨‹è°ƒåº¦é˜Ÿåˆ—" class="headerlink" title="è¿›ç¨‹è°ƒåº¦é˜Ÿåˆ—"></a>è¿›ç¨‹è°ƒåº¦é˜Ÿåˆ—</h4><p>è¿™ä¸€å—æ²¡å¬ ä¼¼ä¹æ˜¯è°ƒåº¦é˜Ÿåˆ—åŒ…æ‹¬ä»¥ä¸‹ä¸‰ç§</p><ol><li>Job queue ç³»ç»Ÿä¸­æ‰€æœ‰è¿›ç¨‹çš„é˜Ÿåˆ—</li><li>Ready queue ä¸»å­˜ä¸­æ‰€æœ‰è¿›ç¨‹çš„é˜Ÿåˆ—, æ‹¿åˆ°CPUå°±è·‘çš„é‚£ç§</li><li>Device queues ç­‰å¾…IOè®¾å¤‡çš„è¿›ç¨‹é˜Ÿåˆ—</li></ol><h4 id="PCB"><a href="#PCB" class="headerlink" title="PCB"></a>PCB</h4><p>åŒ…æ‹¬:</p><ol><li>è¿›ç¨‹ç®¡ç†æ•°æ®<ul><li>å¯„å­˜å™¨</li><li>PC</li><li>çŠ¶æ€å­— PSW </li><li>è¿›ç¨‹çŠ¶æ€</li><li>ä¼˜å…ˆçº§</li><li>è°ƒåº¦ç®—æ³•å‚æ•°</li><li>è¿›ç¨‹ID</li><li>çˆ¶è¿›ç¨‹ID</li><li>ç»„è¿›ç¨‹ID</li><li>ä¿¡å·é‡</li><li>è¿›ç¨‹å¼€å§‹æ—¶é—´</li><li>è¿›ç¨‹å·²ç”¨æ—¶é—´</li><li>å­è¿›ç¨‹å·²ç”¨æ—¶é—´</li><li>â€¦â€¦</li></ul></li><li>å†…å­˜ç®¡ç†æ•°æ®<ul><li>æŒ‡å‘æœ¬è¿›ç¨‹ä»£ç æ®µæŒ‡é’ˆ</li><li>æŒ‡å‘æœ¬è¿›ç¨‹æ•°æ®æ®µæŒ‡é’ˆ</li><li>æŒ‡å‘æœ¬è¿›ç¨‹å †æ ˆæ®µæŒ‡é’ˆ</li></ul></li><li>æ–‡ä»¶ç®¡ç†æ•°æ®<ul><li>æ ¹ç›®å½•</li><li>å·¥ä½œç›®å½•</li><li>æ–‡ä»¶æè¿°ç¬¦</li><li>â€¦â€¦</li></ul></li></ol><p>ä»¥ä¸Šå…¨éƒ¨ä¸ç”¨è®°ğŸ¶ ä¸‹é¢çš„è¦è®°ä½(ç²¾ç®€ç‰ˆ)</p><blockquote><ol><li>Process state                 è¿›ç¨‹çŠ¶æ€ </li><li>Program counter ç¨‹åºè®¡æ•°å™¨ </li><li>CPU registers CPUå¯„å­˜å™¨</li><li>CPU scheduling information CPUè°ƒåº¦ä¿¡æ¯</li><li>Memory-management information  å†…å­˜ç®¡ç†ä¿¡æ¯ </li><li>Accounting information è®¡è´¦ä¿¡æ¯</li><li>I/O status information I/OçŠ¶æ€ä¿¡æ¯</li></ol></blockquote><hr><h1 id="Threads"><a href="#Threads" class="headerlink" title="Threads"></a>Threads</h1><p>åœ¨æœ¬å°èŠ‚ä¼šæ¶‰åŠåˆ°ï¼š</p><ol><li>äº†è§£è¿›ç¨‹åˆ‡æ¢ä¸­çš„ç¼ºé™·ï¼ˆæ—¶ç©ºå¼€é”€è¿‡å¤§ï¼‰ï¼Œå¹¶ç”±æ­¤å¼•å…¥çº¿ç¨‹çš„æ¦‚å¿µåŠç”¨é€”</li><li>äº†è§£çº¿ç¨‹èµ„æºçš„ç§æœ‰ä¸å…±äº«ï¼ˆæœ‰åŠ©äºè§£å†³ä¸Šä¸€ç‚¹çš„ç¼ºé™·ï¼‰, å¹¶è®¤è¯†çº¿ç¨‹çš„ä¼˜åŠ¿</li><li>å‡ ç§çº¿ç¨‹çš„å®ç°æ–¹å¼åŠåŒºåˆ«<ol><li>Kernel-level Thread   (å†…æ ¸çº§çº¿ç¨‹)</li><li>User-level Thread     (ç”¨æˆ·çº§çº¿ç¨‹)</li><li>Hybrid Thread         (æ··åˆå¼çº¿ç¨‹)</li><li>Pop-up Thread         (å¼¹å‡ºå¼çº¿ç¨‹)</li></ol></li></ol><h2 id="çº¿ç¨‹çš„å¼•å…¥åŠæ¦‚å¿µ"><a href="#çº¿ç¨‹çš„å¼•å…¥åŠæ¦‚å¿µ" class="headerlink" title="çº¿ç¨‹çš„å¼•å…¥åŠæ¦‚å¿µ"></a>çº¿ç¨‹çš„å¼•å…¥åŠæ¦‚å¿µ</h2><p>ä½ çœ‹è¿›ç¨‹ä¹‹é—´åˆ‡æ¢æ˜¯ä¸æ˜¯è¦ä¿å­˜å¥½å¤šä¸œè¥¿,æ—¶ç©ºå¼€é”€è¿‡å¤§. çº¿ç¨‹æ˜¯è½»é‡çº§çš„è¿›ç¨‹, å®ƒæ‹¥æœ‰çš„ç¯å¢ƒæ²¡æœ‰è¿›ç¨‹é‚£ä¹ˆå¤š, æ‰€ä»¥çº¿ç¨‹é—´çš„åˆ‡æ¢æ›´åŠ è½»ä¾¿.</p><ul><li>è¿›ç¨‹æ˜¯ä¸ºäº†é¿å…ç­‰å¾…IOçš„æ—¶é—´, çº¿ç¨‹æ˜¯ä¸ºäº†ç¼©çŸ­è¿›ç¨‹åˆ‡æ¢ä¸­çš„æµªè´¹çš„æ—¶é—´</li><li>çº¿ç¨‹æ˜¯éš¶å±äºæŸä¸€è¿›ç¨‹, æˆ–è€…è¯´<em>( traditional or heavyweight )</em>è¿›ç¨‹æ˜¯ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹çš„è¿›ç¨‹</li><li>ä½†æ˜¯çº¿ç¨‹è¿˜æ˜¯æœ‰å¿…è¦çš„ç¯å¢ƒçš„</li><li>åŒä¸€ä¸ªè¿›ç¨‹çš„ä¸åŒçº¿ç¨‹(å…„å¼Ÿçº¿ç¨‹)å¯ä»¥å…±äº«ä¸€éƒ¨åˆ†èµ„æº</li></ul><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/5.jpg" alt="è¿›ç¨‹ä¸çº¿ç¨‹5"></p><p>å¦‚ä¸Šå›¾, aå›¾ä¸­æ¯ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰ä¸€ä¸ªçº¿ç¨‹, è¿™äº›çº¿ç¨‹æ‹¥æœ‰ä¸åŒçš„åœ°å€ç©ºé—´. bå›¾è¿›ç¨‹æ‹¥æœ‰3ä¸ªçº¿ç¨‹, å…±äº«ä¸€ä¸ªè¿›ç¨‹åœ°å€.å› æ­¤çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢ä¼šæ›´åŠ è½»é‡.</p><p>ä½†æ˜¯ä¹Ÿç”±äºçº¿ç¨‹ä¹‹é—´æ²¡æœ‰æ•°æ®ä¿æŠ¤, æ‰€ä»¥è¦é˜²æ­¢çº¿ç¨‹é—´ç›¸äº’ä¿®æ”¹æ•°æ®.</p><h2 id="è¿›ç¨‹èµ„æºçš„ç§æœ‰ä¸å…±äº«"><a href="#è¿›ç¨‹èµ„æºçš„ç§æœ‰ä¸å…±äº«" class="headerlink" title="è¿›ç¨‹èµ„æºçš„ç§æœ‰ä¸å…±äº«"></a>è¿›ç¨‹èµ„æºçš„ç§æœ‰ä¸å…±äº«</h2><p>å¯¹äºåŒä¸€ä¸ªè¿›ç¨‹çš„ä¸åŒçº¿ç¨‹(å…„å¼Ÿçº¿ç¨‹)æ¥è¯´:</p><h3 id="å…±äº«çš„items"><a href="#å…±äº«çš„items" class="headerlink" title="å…±äº«çš„items"></a>å…±äº«çš„items</h3><ol><li>åœ°å€ç©ºé—´</li><li>å…¨å±€å˜é‡</li><li>æ–‡ä»¶æµ</li><li>å­è¿›ç¨‹</li><li>Pending alarm (è¿™æ˜¯ä»€ä¹ˆ?)</li><li>ä¿¡å·é‡</li><li>è®°è´¦ä¿¡æ¯( Accounting information)</li></ol><h3 id="ç§æœ‰çš„items"><a href="#ç§æœ‰çš„items" class="headerlink" title="ç§æœ‰çš„items"></a>ç§æœ‰çš„items</h3><ul><li>PC</li><li>å¯„å­˜å™¨(é›†)</li><li>å †æ ˆç©ºé—´</li><li>çº¿ç¨‹çŠ¶æ€</li></ul><blockquote><p>When a multithreaded process is run on a single-CPU system, the threads take turns running</p><p>å¤šçº¿ç¨‹è¿ç”¨åœ¨å•æ ¸CPUä¸Šæ—¶å¹¶ä¸èƒ½æå‡æ€§èƒ½,åè€Œå› ä¸ºçº¿ç¨‹åˆ‡æ¢è€Œç‰ºç‰²æ•ˆç‡</p></blockquote><p>æ­¤å¤„å­˜ç–‘: æ— è®ºå•æ ¸å¤šæ ¸, çº¿ç¨‹åˆ‡æ¢ä¸æ˜¯æ€»æ¯”è¿›ç¨‹åˆ‡æ¢é«˜æ•ˆå—?</p><h2 id="çº¿ç¨‹çš„çŠ¶æ€"><a href="#çº¿ç¨‹çš„çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çš„çŠ¶æ€"></a>çº¿ç¨‹çš„çŠ¶æ€</h2><p>ä¸è¿›ç¨‹ä¸€è‡´:</p><ol><li>running</li><li>blocked</li><li>ready</li><li>terminated</li></ol><p>æˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰newæ€, å¯èƒ½å¤ªå¿«å¿½ç•¥ä¸è®¡? â”‘(ï¿£Ğ” ï¿£)â”</p><h2 id="çº¿ç¨‹çš„ä¼˜åŠ£åŠåº”ç”¨åœºæ™¯"><a href="#çº¿ç¨‹çš„ä¼˜åŠ£åŠåº”ç”¨åœºæ™¯" class="headerlink" title="çº¿ç¨‹çš„ä¼˜åŠ£åŠåº”ç”¨åœºæ™¯"></a>çº¿ç¨‹çš„ä¼˜åŠ£åŠåº”ç”¨åœºæ™¯</h2><p>ä¼˜åŠ¿:</p><ul><li>å ç”¨ç©ºé—´å°,åˆ‡æ¢æ—¶å¿«æ·</li><li>åˆ’åˆ†çš„èµ„æºå°‘, åˆ›å»ºé”€æ¯æ›´åŠ å®¹æ˜“</li><li>çº¿ç¨‹å¸¸è¢«ç”¨äºå¤šæ ¸CPU</li></ul><p>åº”ç”¨åœºæ™¯:</p><ul><li>åŒæ—¶éœ€è¦IOä¸å¤„ç†çš„è¿›ç¨‹(eg æ–‡å­—å¤„ç†)</li><li>å¤§å‹æœåŠ¡å™¨å›åº”ç”¨æˆ·è¯·æ±‚.  ä½œä¸šå°è€Œå¤š</li></ul><h2 id="ä¸åŒçº§åˆ«çš„çº¿ç¨‹"><a href="#ä¸åŒçº§åˆ«çš„çº¿ç¨‹" class="headerlink" title="ä¸åŒçº§åˆ«çš„çº¿ç¨‹"></a>ä¸åŒçº§åˆ«çš„çº¿ç¨‹</h2><h3 id="User-level-Thread"><a href="#User-level-Thread" class="headerlink" title="User-level Thread"></a>User-level Thread</h3><p>ç”¨æˆ·çº§çº¿ç¨‹.</p><p>å¯¹äºçº¿ç¨‹çš„æ§åˆ¶, èµ„æºçš„åˆ†é…éƒ½æ˜¯ç”±è¿›ç¨‹è‡ªå·±æŒæ§. </p><p>ä»å†…æ ¸è§’åº¦, ç³»ç»ŸåªçŸ¥è¿›ç¨‹, æ„ŸçŸ¥ä¸åˆ°å…¶çº¿ç¨‹çš„å­˜åœ¨.</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/7.jpg" alt="çº¿ç¨‹æ¨¡å‹6"></p><p>ä¼˜ç‚¹</p><ul><li>å¯ä»¥åœ¨ä¸æ”¯æŒçº¿ç¨‹çš„OSä¸Šå®ç°çº¿ç¨‹.<ul><li>OSç®¡ç†è¿›ç¨‹è¡¨, è¿›ç¨‹æœ¬èº«ç®¡ç†çº¿ç¨‹è¡¨</li><li>ç®¡ç†æ•ˆç‡æ›´é«˜, ç›¸æ¯”å†…æ ¸ç®¡ç†æ—¶æ›´å°‘çš„å‡½æ•°è°ƒç”¨</li></ul></li><li>ä¸åŒè¿›ç¨‹çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•å¯ä»¥é‡‡å–ä¸åŒç­–ç•¥</li><li>å¤§å¤§ç®€åŒ–äº†å†…æ ¸çš„ç®¡ç†å‹åŠ›(éœ€è¦ç®¡ç†çš„å¤§é‡çº¿ç¨‹æ‰˜ä»˜ç»™è¿›ç¨‹ç®¡ç†äº†)</li></ul><h3 id="Kernel-level-Thread"><a href="#Kernel-level-Thread" class="headerlink" title="Kernel-level Thread"></a>Kernel-level Thread</h3><p>å†…æ ¸çº§çº¿ç¨‹</p><p>çº¿ç¨‹è¿˜æ˜¯å±äºè¿›ç¨‹, ä½†æ˜¯çº¿ç¨‹çš„ç®¡ç†æœ‰OSè´Ÿè´£</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/8.jpg" alt="å¾…é…å›¾7"></p><p>ä¼˜ç‚¹</p><ul><li><p>å†…æ ¸ç®¡ç†å…¨éƒ¨çš„çº¿ç¨‹, è°ƒåº¦åœ°æ›´åŠ çµæ´»</p><p>æŒ‡: Aè¿›ç¨‹çš„A1çº¿ç¨‹é˜»å¡å, OSå¯ä»¥åˆ‡æ¢è‡³A2çº¿ç¨‹ æˆ–Bè¿›ç¨‹ä¸­çš„B1çº¿ç¨‹</p><p><del>ä½†æ˜¯è¿™ä¸å°±æ˜¯è¿›ç¨‹åˆ‡æ¢äº†å—å“ªå„¿æ˜¯ä¼˜ç‚¹äº†å•Šå–‚</del>!</p></li></ul><h3 id="Hybrid-Thread"><a href="#Hybrid-Thread" class="headerlink" title="Hybrid Thread"></a>Hybrid Thread</h3><p>æ··åˆçº§çº¿ç¨‹</p><p>å¾…é…å›¾</p><p>å°±æ˜¯ä¸€éƒ¨åˆ†ç”¨æˆ·çº§ä¸€éƒ¨åˆ†å†…æ ¸çº§</p><p><del>å…¶å®æˆ‘ä¹Ÿæ²¡è§‰å¾—å¥½å“ªäº†</del></p><p>ä¼˜ç‚¹</p><ul><li>å°†ç”¨æˆ·çº§ å†…æ ¸çº§çš„ä¼˜åŠ¿ç›¸ç»“åˆ<ul><li>å†…æ ¸çº§çš„æ¨¡ä»¿(mimic?)åŠŸèƒ½            //å­˜ç–‘ æ²¡æ‡‚æƒ³è¡¨è¾¾ä»€ä¹ˆ</li><li>ç”¨æˆ·çº§çš„æ€§èƒ½</li></ul></li><li>é¿å…ä¸å¿…è¦çš„ç”¨æˆ·-å†…æ ¸è½¬æ¢</li><li>Kernel assigns virtual processors to each process //å­˜ç–‘ æ²¡æ‡‚</li></ul><h3 id="Pop-up-Thread"><a href="#Pop-up-Thread" class="headerlink" title="Pop-up Thread"></a>Pop-up Thread</h3><p>å¼¹å‡ºå¼çº¿ç¨‹</p><p>æ¯å½“ä¸€ä¸ªæ–°æ¶ˆæ¯(æŒ‡å¤–ç•Œè¯·æ±‚)è¿›å…¥æ—¶, è¿›ç¨‹å¼¹å‡ºçº¿ç¨‹è§£å†³, è§£å†³åé”€æ¯è¿›ç¨‹.</p><p>é€‚ç”¨äºç±»æ‰¹å¤„ç†ä»»åŠ¡, å¦‚å¤§å‹æœåŠ¡å™¨å›åº”ç”¨æˆ·è¯·æ±‚.  ä½œä¸šå°è€Œå¤š</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/10.jpg" alt="é…å›¾10"></p><p>ä¼˜åŠ¿</p><ul><li>çº¿ç¨‹å³ç”¨å³å¼ƒ, æ²¡æœ‰åˆ‡æ¢, ä¹Ÿæ— éœ€ä¿å­˜å†å²æ•°æ®</li></ul><h1 id="Scheduling"><a href="#Scheduling" class="headerlink" title="Scheduling"></a>Scheduling</h1><p>åœ¨æœ¬å°èŠ‚ä¼šæ¶‰åŠåˆ°ï¼š</p><ol><li>è°ƒåº¦çš„æ¦‚å¿µ<ol><li>CPUå¯†é›†å‹ä¸IOå¯†é›†å‹ä½œä¸š</li><li>è°ƒåº¦çš„ç›®çš„</li><li>ä»€ä¹ˆæ—¶å€™éœ€è¦è°ƒåº¦ï¼Ÿ</li><li>è°ƒåº¦ç®—æ³•çš„ç›®æ ‡ï¼ˆä¸åŒOSä¸‹ç›®æ ‡æœ‰å·®å¼‚ï¼‰</li></ol></li><li>ä¸åŒç³»ç»Ÿä¸‹å¸¸è§çš„è°ƒåº¦ç®—æ³•<ol><li>æ‰¹å¤„ç†ç³»ç»Ÿ (Batch SystemSs)<ol><li>First-come first-served        (FCFS,å…ˆæ¥å…ˆæœåŠ¡)</li><li>Shortest job first             (SJF,çŸ­ä½œä¸šä¼˜å…ˆ)</li><li>Shortest remaining time first (SRTF,æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ)</li></ol></li><li>äº¤äº’å¼ç³»ç»Ÿ (Interactive Systems)<ol><li>Round Robin                    (RR,æ—¶é—´ç‰‡è½®è½¬)</li><li>Priority<ol><li>Statically Priority         (é™æ€ä¼˜å…ˆçº§)</li><li>Dynamically Priority        (åŠ¨æ€ä¼˜å…ˆçº§)</li></ol></li><li>Shortest Process Next          (SPN, æœ€çŸ­è¿›ç¨‹ä¼˜å…ˆ)</li><li>Others</li></ol></li><li>å®æ—¶æ“ä½œç³»ç»Ÿ (Real-Time Systems)<ol><li>å¯è°ƒåº¦æ€§</li></ol></li></ol></li><li>å…³äºçº¿ç¨‹è°ƒåº¦çš„ä¸€äº›è¡¥å……</li></ol><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè™½ç„¶è¿›ç¨‹è°ƒåº¦ä¸çº¿ç¨‹è°ƒåº¦æ˜¯ä¸¤ç§ä¸œè¥¿ï¼Œä½†ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä¸€è‡´çš„ï¼Œè¿™é‡Œä¸è¿‡åˆ†åŒºåˆ†ã€‚</p><h2 id="è°ƒåº¦çš„æ¦‚å¿µ"><a href="#è°ƒåº¦çš„æ¦‚å¿µ" class="headerlink" title="è°ƒåº¦çš„æ¦‚å¿µ"></a>è°ƒåº¦çš„æ¦‚å¿µ</h2><h3 id="CPUå¯†é›†å‹ä»»åŠ¡ä¸IOå¯†é›†å‹ä»»åŠ¡"><a href="#CPUå¯†é›†å‹ä»»åŠ¡ä¸IOå¯†é›†å‹ä»»åŠ¡" class="headerlink" title="CPUå¯†é›†å‹ä»»åŠ¡ä¸IOå¯†é›†å‹ä»»åŠ¡"></a>CPUå¯†é›†å‹ä»»åŠ¡ä¸IOå¯†é›†å‹ä»»åŠ¡</h3><p>å¦‚æœä¸€ä¸ªä»»åŠ¡æ›´å¤šåœ°éœ€è¦CPUèµ„æº (ä¾‹å¦‚Matlab, å¤§é‡çš„è¿ç®—) æˆ‘ä»¬ç§°ä¹‹ä¸ºCPUå¯†é›†å‹ä»»åŠ¡.</p><p>å¦‚æœä¸€ä¸ªä»»åŠ¡æ›´å¤šåœ°éœ€è¦IOèµ„æº (ä¾‹å¦‚Wordçš„æ‰“å°ä»»åŠ¡(å¤–è®¾), è¯»å†™ä»»åŠ¡(å¤–å­˜)) æˆ‘ä»¬ç§°ä¹‹ä¸ºCPUå¯†é›†å‹ä»»åŠ¡.</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/QQ%E6%88%AA%E5%9B%BE20200608155404.jpg" alt="ä¸åŒçš„ä»»åŠ¡ç§ç±»"></p><h3 id="è°ƒåº¦çš„ç›®çš„"><a href="#è°ƒåº¦çš„ç›®çš„" class="headerlink" title="è°ƒåº¦çš„ç›®çš„"></a>è°ƒåº¦çš„ç›®çš„</h3><p>è¿˜æ˜¯è€ƒè™‘å•æ ¸CPU, åœ¨å¤šé“ç¨‹åº(å³å¤šä¸ªè¿›ç¨‹åŒæ—¶â€å·¥ä½œâ€) çš„æƒ…å†µä¸‹, ä¼šå‡ºç°ä¸åŒè¿›ç¨‹åŒæ—¶éœ€è¦CPUçš„æƒ…å†µ. è¿™æ—¶å€™CPUçš„èµ„æºå°±éœ€è¦åˆç†åˆ†é….</p><h3 id="ä»€ä¹ˆæ—¶å€™éœ€è¦è°ƒåº¦"><a href="#ä»€ä¹ˆæ—¶å€™éœ€è¦è°ƒåº¦" class="headerlink" title="ä»€ä¹ˆæ—¶å€™éœ€è¦è°ƒåº¦?"></a>ä»€ä¹ˆæ—¶å€™éœ€è¦è°ƒåº¦?</h3><ol><li>æ–°è¿›ç¨‹çš„åˆ›å»º</li><li>è¿›ç¨‹çš„é€€å‡º</li><li>æŸè¿›ç¨‹éœ€è¦IOæ“ä½œ,</li><li>IOè®¾å¤‡ç”³è¯·CPUä¸­æ–­ (ç§°ä¹‹ä¸ºIOä¸­æ–­)</li></ol><h3 id="è°ƒåº¦çš„å‡ ä¸ªåŸåˆ™"><a href="#è°ƒåº¦çš„å‡ ä¸ªåŸåˆ™" class="headerlink" title="è°ƒåº¦çš„å‡ ä¸ªåŸåˆ™"></a>è°ƒåº¦çš„å‡ ä¸ªåŸåˆ™</h3><p>æˆ‘ä»¬å¸Œæœ›ä»€ä¹ˆæ ·çš„è°ƒåº¦ç®—æ³•?</p><h4 id="All-System"><a href="#All-System" class="headerlink" title="All System"></a>All System</h4><ol><li><p>å…¬å¹³</p><p>å…¬å¹³, å…¬å¹³. è¿˜æ˜¯tmdå…¬å¹³</p></li><li><p>å¼ºåˆ¶</p><p>ç­–ç•¥çš„è°ƒåº¦å¿…é¡»è¢«å¼ºåˆ¶æ‰§è¡Œ</p></li><li><p>å¹³è¡¡</p><p>èƒ½å¤Ÿä½¿ç³»ç»Ÿä¸­çš„å„éƒ¨ä»¶éƒ½ä¿æŒbusy</p></li></ol><h4 id="æ‰¹å¤„ç†ç³»ç»Ÿ"><a href="#æ‰¹å¤„ç†ç³»ç»Ÿ" class="headerlink" title="æ‰¹å¤„ç†ç³»ç»Ÿ"></a>æ‰¹å¤„ç†ç³»ç»Ÿ</h4><ol><li><p>ååé‡</p><p>æ¯å°æ—¶å·¥ä½œæ•°</p></li><li><p>å‘¨è½¬æ—¶é—´</p><p>å•æ¬¡ä½œä¸šå¼€å§‹ç»“æŸé—´çš„æ—¶é—´</p></li><li><p>CPUåˆ©ç”¨ç‡</p><p>ä¿æŒCPUå§‹ç»ˆå¿™ç¢Œ</p></li></ol><h4 id="äº¤äº’å¼ç³»ç»Ÿ"><a href="#äº¤äº’å¼ç³»ç»Ÿ" class="headerlink" title="äº¤äº’å¼ç³»ç»Ÿ"></a>äº¤äº’å¼ç³»ç»Ÿ</h4><ol><li><p>å“åº”æ—¶é—´</p><p>å¿«é€Ÿå›åº”ç”¨æˆ·è¯·æ±‚</p></li><li><p>å‡è¡¡æ€§</p><p>æ»¡è¶³ç”¨æˆ·è¯·æ±‚</p></li></ol><h4 id="å®æ—¶ç³»ç»Ÿ"><a href="#å®æ—¶ç³»ç»Ÿ" class="headerlink" title="å®æ—¶ç³»ç»Ÿ"></a>å®æ—¶ç³»ç»Ÿ</h4><ol><li><p>æ»¡è¶³deadline</p><p>ä¿è¯æ—¶æ•ˆæ€§</p></li><li><p>å¯é¢„æµ‹æ€§?</p></li></ol><h2 id="è°ƒåº¦ç®—æ³•"><a href="#è°ƒåº¦ç®—æ³•" class="headerlink" title="è°ƒåº¦ç®—æ³•"></a>è°ƒåº¦ç®—æ³•</h2><h3 id="æ‰¹å¤„ç†ç³»ç»Ÿ-1"><a href="#æ‰¹å¤„ç†ç³»ç»Ÿ-1" class="headerlink" title="æ‰¹å¤„ç†ç³»ç»Ÿ"></a>æ‰¹å¤„ç†ç³»ç»Ÿ</h3><h4 id="FCFS-First-come-first-served"><a href="#FCFS-First-come-first-served" class="headerlink" title="FCFS (First-come first-served )"></a>FCFS (First-come first-served )</h4><p>å­—é¢æ„æ€  ä¸è§£é‡Š</p><p><strong>ä¼˜åŠ¿</strong>:</p><p>ä¾¿äºå®ç°, ç»å¯¹å¹³ç­‰</p><p><strong>ç¼ºç‚¹:</strong></p><p>ä½CPUåˆ©ç”¨ç‡</p><h4 id="Shortest-Job-First-çŸ­ä½œä¸šä¼˜å…ˆ"><a href="#Shortest-Job-First-çŸ­ä½œä¸šä¼˜å…ˆ" class="headerlink" title="Shortest Job First (çŸ­ä½œä¸šä¼˜å…ˆ)"></a>Shortest Job First (çŸ­ä½œä¸šä¼˜å…ˆ)</h4><p><strong>ä¼˜åŠ¿:</strong></p><p>æé«˜äº†CPUåˆ©ç”¨ç‡</p><p><strong>åŠ£åŠ¿:</strong></p><p>å¯¹é•¿ä½œä¸šä¸åˆ©</p><h4 id="Shortest-remaining-time-next-å‰©ä½™æ—¶é—´æœ€çŸ­ä¼˜å…ˆ"><a href="#Shortest-remaining-time-next-å‰©ä½™æ—¶é—´æœ€çŸ­ä¼˜å…ˆ" class="headerlink" title="Shortest remaining time next å‰©ä½™æ—¶é—´æœ€çŸ­ä¼˜å…ˆ"></a>Shortest remaining time next å‰©ä½™æ—¶é—´æœ€çŸ­ä¼˜å…ˆ</h4><h3 id="äº¤äº’å¼ç³»ç»Ÿ-1"><a href="#äº¤äº’å¼ç³»ç»Ÿ-1" class="headerlink" title="äº¤äº’å¼ç³»ç»Ÿ"></a>äº¤äº’å¼ç³»ç»Ÿ</h3><h4 id="Round-Robin-æ—¶é—´ç‰‡è½®è½¬"><a href="#Round-Robin-æ—¶é—´ç‰‡è½®è½¬" class="headerlink" title="Round Robin (æ—¶é—´ç‰‡è½®è½¬)"></a>Round Robin (æ—¶é—´ç‰‡è½®è½¬)</h4><ul><li>æ¯ä¸ªè¿›ç¨‹è¢«åˆ†é…æ—¶è®¾ç½®å›ºå®šçš„æ—¶é—´è½®ç‰‡</li><li>æ—¶é—´ç‰‡ç”¨å®Œæˆ–è¿›ç¨‹ç»“æŸ, å‘ç”Ÿè°ƒåº¦</li></ul><p>æ—¶é—´ç‰‡å¤§å°çš„è®¾ç½®</p><ul><li>è¿‡çŸ­, CPUå°†æµªè´¹å¤§é‡æ—¶é—´åœ¨é¢‘ç¹çš„åˆ‡æ¢ä¸Š</li><li>è¿‡é•¿, é€€åŒ–æˆFCFSç®—æ³•</li></ul><h4 id="Priority-scheduling-ä¼˜å…ˆçº§è°ƒåº¦"><a href="#Priority-scheduling-ä¼˜å…ˆçº§è°ƒåº¦" class="headerlink" title="Priority scheduling (ä¼˜å…ˆçº§è°ƒåº¦)"></a>Priority scheduling (ä¼˜å…ˆçº§è°ƒåº¦)</h4><p>ç®—æ³•æ€æƒ³:</p><ol><li>ä¼˜å…ˆè°ƒåº¦ä¼˜å…ˆçº§é«˜çš„</li><li>åˆä¼˜å…ˆçº§ç›¸åŒæ—¶, é‡‡ç”¨å…¶ä»–ç®—æ³•(å¦‚FCFS)</li></ol><p>ä¼˜å…ˆçº§:</p><ul><li>é™æ€ä¼˜å…ˆçº§, ä¼˜å…ˆçº§è¢«ç¡®ç«‹åä¸æ”¹å˜</li><li>åŠ¨æ€ä¼˜å…ˆçº§, å˜åŒ–</li></ul><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/QQ%E6%88%AA%E5%9B%BE20200608155437.jpg" alt=""></p><h4 id="Shortest-process-next-æœ€çŸ­è¿›ç¨‹"><a href="#Shortest-process-next-æœ€çŸ­è¿›ç¨‹" class="headerlink" title="Shortest process next (æœ€çŸ­è¿›ç¨‹)"></a>Shortest process next (æœ€çŸ­è¿›ç¨‹)</h4><p>SJFç®—æ³•æ›´åŠ é€‚ç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿ, å› ä¸ºæ¯æ¬¡çš„ä»»åŠ¡è´¹æ—¶éƒ½æ˜¯ç¡®å®šçš„.</p><p>Q : å¯¹äºäº¤äº’å¼ç³»ç»Ÿ, å¦‚ä½•é¢„ä¼°å·¥ä½œçš„ç”¨æ—¶?</p><p>A : æ ¹æ®å…¶è¿‡å¾€è¡¨ç°ä¼°ç®—</p><script type="math/tex; mode=display">T_n = \alpha T_NaN + (1-\alpha)T_NaN</script><p>å¦‚æœ <code>Î± = 1/2</code> ,é‚£ä¹ˆé¢„ä¼°æ—¶é—´ä¸º:</p><script type="math/tex; mode=display">T_0\\\frac{T_0}{2}+\frac{T_1}{2}\\\frac{T_0}{4}+\frac{T_1}{4}+\frac{T_2}{2}\\\frac{T_0}{8}+\frac{T_1}{8}+\frac{T_2}{4}+\frac{T_3}{2}</script><h4 id="å…¶ä»–è°ƒåº¦ç®—æ³•"><a href="#å…¶ä»–è°ƒåº¦ç®—æ³•" class="headerlink" title="å…¶ä»–è°ƒåº¦ç®—æ³•"></a>å…¶ä»–è°ƒåº¦ç®—æ³•</h4><ol><li><p>å¤šçº§é˜Ÿåˆ—è°ƒåº¦</p></li><li><p>ç¡®ä¿(éƒ¨åˆ†ä»»åŠ¡)è°ƒåº¦</p></li><li><p>Lottery Scheduling </p><p>ä¹é€è°ƒåº¦, å½©ç¥¨è°ƒåº¦ éšæœº</p></li><li><p>Fair-share Scheduling</p><p>è€ƒè™‘è¿›ç¨‹æ‰€å±çš„ç”¨æˆ·</p></li></ol><h3 id="å®æ—¶ç³»ç»Ÿ-1"><a href="#å®æ—¶ç³»ç»Ÿ-1" class="headerlink" title="å®æ—¶ç³»ç»Ÿ"></a>å®æ—¶ç³»ç»Ÿ</h3><h4 id="ç³»ç»Ÿçš„å¯è°ƒåº¦æ€§"><a href="#ç³»ç»Ÿçš„å¯è°ƒåº¦æ€§" class="headerlink" title="ç³»ç»Ÿçš„å¯è°ƒåº¦æ€§"></a><strong>ç³»ç»Ÿçš„å¯è°ƒåº¦æ€§</strong></h4><p>å‡è®¾æŸä¸€æ—¶åˆ»ç³»ç»Ÿæœ‰ $m$ ä¸ªäº‹ä»¶,æ¯ä¸ªäº‹ä»¶ $i$ éœ€è¦åœ¨ $P_i$ å†…å®Œæˆ,éœ€è¦å æ®CPUçš„ $C_i$ ç§’æ¥å®ç°<br>å€˜è‹¥æ»¡è¶³</p><script type="math/tex; mode=display">\qquad \sum^{m}_{i=1}\frac{C_i}{P_i}\leq1\\</script><p>ç§°æ­¤æ—¶ç³»ç»Ÿæ˜¯å¯è°ƒåº¦çš„ (Schedulable)</p><h2 id="å…³äºçº¿ç¨‹è°ƒåº¦çš„ä¸€äº›è¡¥å……"><a href="#å…³äºçº¿ç¨‹è°ƒåº¦çš„ä¸€äº›è¡¥å……" class="headerlink" title="å…³äºçº¿ç¨‹è°ƒåº¦çš„ä¸€äº›è¡¥å……"></a>å…³äºçº¿ç¨‹è°ƒåº¦çš„ä¸€äº›è¡¥å……</h2><p>ç”¨æˆ·çº§çº¿ç¨‹:</p><p>OSæŠŠæ—¶é—´ç‰‡åˆ†é…ç»™è¿›ç¨‹, è¿›ç¨‹å†å†…éƒ¨åˆ†é…åˆ°æ¯ä¸ªçº¿ç¨‹.</p><h2 id="å…³äºè°ƒåº¦çš„å…¶ä»–è¡¥å……"><a href="#å…³äºè°ƒåº¦çš„å…¶ä»–è¡¥å……" class="headerlink" title="å…³äºè°ƒåº¦çš„å…¶ä»–è¡¥å……"></a>å…³äºè°ƒåº¦çš„å…¶ä»–è¡¥å……</h2><ul><li><p>è°ƒåº¦ç®—æ³•è¿˜æœ‰ æŠ¢å å¼/éæŠ¢å å¼ä¹‹åˆ†</p></li><li><p>è¿›ç¨‹è°ƒåº¦æ¨¡å—è´Ÿè´£ä¸“ä¸šCPUæ§åˆ¶æƒ,åŒ…æ‹¬:</p><ul><li>åˆ‡æ¢ä¸Šä¸‹æ–‡</li><li>åˆ‡æ¢åˆ°ç”¨æˆ·æ€</li><li>è·³è½¬åˆ°ç¨‹åºé€‚å½“ä½ç½®å¹¶è¿è¡Œä¹‹</li></ul></li><li><p>ç®—æ³•çš„æ€§èƒ½å‚æ•°</p><ul><li><p>CPUåˆ©ç”¨ç‡    (max)</p></li><li><p>Throughput  (min)</p><p>æ¯ä¸ªæ—¶é—´å•å…ƒå†…è¿›ç¨‹å®Œæˆçš„æ•°ç›®</p></li><li><p>å‘¨è½¬æ—¶é—´  (min)</p></li><li><p>ç­‰å¾…æ—¶é—´  (min)</p></li><li><p>å“åº”æ—¶é—´  (min)</p></li></ul></li></ul><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/QQ%E6%88%AA%E5%9B%BE20200608155420.jpg" alt="ç”¨æˆ·çº¿ç¨‹è°ƒåº¦"></p><p>ç³»ç»Ÿçº§çº¿ç¨‹</p><p>OSç›´æ¥æŠŠæ—¶é—´ç‰‡åˆ†é…åˆ°çº¿ç¨‹.</p><p><img src="https://my-pic-bed-1302358960.cos.ap-nanjing.myqcloud.com/Blog/202006/img/QQ%E6%88%AA%E5%9B%BE20200608155427.jpg" alt="ç³»ç»Ÿçº¿ç¨‹è°ƒåº¦"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ç« èŠ‚åŒ…æ‹¬ä¸‰ä¸ªå°èŠ‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¿›ç¨‹ (Processes)&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹ (Threads)&lt;/li&gt;
&lt;li&gt;è°ƒåº¦ (Scheduling)&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="ä¸“ä¸šè¯¾" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/"/>
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="http://yoursite.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://yoursite.com/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>Hello_Hexo_Blog</title>
    <link href="http://yoursite.com/2020/05/31/Hello-Hexo-Blog/"/>
    <id>http://yoursite.com/2020/05/31/Hello-Hexo-Blog/</id>
    <published>2020-05-31T05:53:07.000Z</published>
    <updated>2020-06-05T09:01:50.723Z</updated>
    
    <content type="html"><![CDATA[<p> ç¬¬ä¸€ç¯‡åšå®¢~ å¼€å¿ƒ</p><a id="more"></a><h3 id="ç®€å•è®°å½•ä¸€ä¸‹æ­å»ºè¿‡ç¨‹"><a href="#ç®€å•è®°å½•ä¸€ä¸‹æ­å»ºè¿‡ç¨‹" class="headerlink" title="ç®€å•è®°å½•ä¸€ä¸‹æ­å»ºè¿‡ç¨‹"></a>ç®€å•è®°å½•ä¸€ä¸‹æ­å»ºè¿‡ç¨‹</h3><p>åšå®¢åŸºäº<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexoæ¡†æ¶</a> + Githubï¼ŒåŸŸåå½“ç„¶æ˜¯é˜¿é‡Œäº‘äº† ï¼ˆ6å…ƒä¸€å¹´ä»–ä¸é¦™å—hhhï¼‰</p><p>æ„Ÿè°¢èˆå‹ <a href="https://www.117503445.top/" target="_blank" rel="noopener">@117503445</a> æŒ‡åäº†åšå®¢æ­å»ºçš„ä¸»è¦æ–¹å‘ï¼Œæ­å»ºè¿‡ç¨‹ä¸­ä¸»è¦å‚è€ƒäº†çŸ¥ä¹ç”¨æˆ· @å´æ¶¦ çš„<a href="https://zhuanlan.zhihu.com/p/26625249" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>ï¼ŒåŸºæœ¬å¾ˆé¡ºç•…åœ°æ­å»ºèµ·æ¥äº†ï¼Œä¸€å¹¶è‡´è°¢ã€‚</p><ol><li>å®‰è£…å¹¶é…ç½®Node.js</li><li>å®‰è£… Hexo æ¡†æ¶</li><li>å…³è” Github ä»“åº“</li><li>ç”³è¯·åŸŸåå¹¶ç»‘å®š</li><li>å‘å¸ƒç¬¬ä¸€ç¯‡åšå®¢</li></ol><h3 id="ToDo"><a href="#ToDo" class="headerlink" title="ToDo"></a>ToDo</h3><p>ç°åœ¨åªæ˜¯æŠŠæˆ¿å­æ­èµ·æ¥è¿˜æ²¡æœ‰è£…ä¿®å•¥å•Šï¼Œè®©ä¿ºæ¥ç€å»å­¦ä¸€å­¦~</p><p>[x] æ›´æ¢ Hexo ä¸»é¢˜</p><p>[x] ç†Ÿæ‚‰åšå®¢çš„å‘å¸ƒä¿®æ”¹æ ‡ç­¾ç­‰åŠŸèƒ½</p><p>[ ] å»ºç«‹å›¾åºŠ</p><p>[ ] å¢åŠ å…¶ä»–çš„å°æ’ä»¶ ~~</p><h3 id="åˆ†ç±»è®¾ç½®"><a href="#åˆ†ç±»è®¾ç½®" class="headerlink" title="åˆ†ç±»è®¾ç½®"></a>åˆ†ç±»è®¾ç½®</h3><ul><li>å­¦ä¹ ç¬”è®°    | ç³»ç»Ÿæ€§çš„å­¦ä¹ <ul><li>ä¸“ä¸šè¯¾<ul><li>æ“ä½œç³»ç»Ÿ</li></ul></li></ul></li><li>æŠ€æœ¯å°è®°    | ç¢ç‰‡åŒ–çŸ¥è¯†</li><li>ç”Ÿæ´»éšç¬”<ul><li>å±±ä¸æ°´    | æ¸¸è®°</li><li>ä¹¦ä¸å½±    | ä¹¦è¯„å½±è¯„</li><li>æ—¶ä¸å…‰    | å®šæœŸæ€»ç»“</li></ul></li><li></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; ç¬¬ä¸€ç¯‡åšå®¢~ å¼€å¿ƒ&lt;/p&gt;
    
    </summary>
    
    
      <category term="æŠ€æœ¯å°è®°" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF%E5%B0%8F%E8%AE%B0/"/>
    
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
  </entry>
  
</feed>
